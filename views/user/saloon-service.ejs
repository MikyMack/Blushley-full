<!DOCTYPE html>
<html lang="en-US">

<head>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-E1XD6E8W6H"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E1XD6E8W6H');
</script>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-W4GZFHCG');</script>
    <!-- End Google Tag Manager -->
    <meta charset="utf-8">
    <title>Blushley</title>

    <meta name="author" content="trivlogic.com">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="Blushley - Beauty Marketplace & Beautician Booking Platform ">

    <!-- font -->
    <link rel="stylesheet" href="/fonts/fonts.css">
    <link rel="stylesheet" href="/fonts/font-icons.css">
    <!-- css -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/swiper-bundle.min.css">
    <link rel="stylesheet" href="/css/animate.css">
    <link rel="stylesheet" href="https://sibforms.com/forms/end-form/build/sib-styles.css">
    <link rel="stylesheet" type="text/css" href="/css/styles.css" />


    <!-- Favicon and Touch Icons  -->


    <link rel="shortcut" type="image/x-icon" href="/images/logo/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/logo/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/logo/favicon-16x16.png">
    <link rel="apple-touch-icon-precomposed" sizes="180x180" href="/images/logo/apple-touch-icon.png">
<style>
    /* Filter styles */
.filter-count {
    background: var(--primary-color);
    color: white;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    margin-left: 5px;
}

.applied-filter {
    background: #f0f0f0;
    border: 1px solid #ddd;
    border-radius: 20px;
    padding: 4px 12px;
    margin-right: 8px;
    margin-bottom: 8px;
    display: inline-flex;
    align-items: center;
    font-size: 14px;
}

.remove-filter {
    background: none;
    border: none;
    color: #666;
    margin-left: 6px;
    cursor: pointer;
    font-size: 16px;
    padding: 0 4px;
}

.remove-filter:hover {
    color: #ff0000;
}

.remove-all-filters {
    background: none;
    border: none;
    color: var(--primary-color);
    cursor: pointer;
    font-size: 14px;
    margin-top: 8px;
}

.remove-all-filters:hover {
    text-decoration: underline;
}

/* Salon card enhancements */
.rating-badge {
    color: #ffc107;
    margin-right: 5px;
}

.price-badge {
    background: var(--primary-color);
    color: white;
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 600;
}

.availability-badge {
    background: #e8f5e9;
    color: #2e7d32;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    margin-right: 5px;
}

.availability-badge.available-today {
    background: #e3f2fd;
    color: #1565c0;
}

.availability-badge.unavailable {
    background: #ffebee;
    color: #c62828;
}

.availability-badge.home-service {
    background: #f3e5f5;
    color: #7b1fa2;
}

.service-badges {
    display: flex;
    flex-wrap: wrap;
    gap: 5px;
    margin-top: 5px;
}

/* Filter sidebar */
.canvas-filter {
    width: 300px;
}

.canvas-body {
    padding: 20px;
    overflow-y: auto;
    max-height: calc(100vh - 120px);
}

.widget-facet {
    margin-bottom: 24px;
}

.facet-title {
    font-size: 16px;
    font-weight: 600;
    margin-bottom: 12px;
    color: #333;
}

.facet-content {
    list-style: none;
    padding: 0;
    margin: 0;
}

.categories-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 0;
    cursor: pointer;
    transition: color 0.2s;
}

.categories-item:hover {
    color: var(--primary-color);
}

.count-cate {
    color: #666;
    font-size: 12px;
}

.box-fieldset-item {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.fieldset-item {
    display: flex;
    align-items: center;
    gap: 8px;
}

.tf-check {
    width: 18px;
    height: 18px;
}

.canvas-bottom {
    padding: 20px;
    border-top: 1px solid #eee;
    display: flex;
    gap: 10px;
}

.btn-reset {
    background: #f5f5f5;
    color: #666;
    border: 1px solid #ddd;
    flex: 1;
}

.btn-apply {
    background: var(--primary-color);
    color: white;
    border: none;
    flex: 1;
}

.btn-reset:hover {
    background: #e0e0e0;
}

.btn-apply:hover {
    background: var(--primary-dark);
}

/* Pagination */
.salon-pagination {
    margin-top: 40px;
}

.wg-pagination {
    display: flex;
    list-style: none;
    padding: 0;
    gap: 5px;
}

.pagination-item {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    border-radius: 4px;
    border: 1px solid #ddd;
    text-decoration: none;
    color: #333;
    transition: all 0.2s;
}

.pagination-item:hover {
    border-color: var(--primary-color);
    color: var(--primary-color);
}

.wg-pagination li.active .pagination-item {
    background: var(--primary-color);
    color: white;
    border-color: var(--primary-color);
}

/* Loading state */
.loading-skeleton {
    animation: pulse 1.5s ease-in-out infinite;
}

@keyframes pulse {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.5;
    }
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .canvas-filter {
        width: 100%;
    }
    
    .applied-filter {
        font-size: 12px;
        padding: 3px 8px;
    }
    
    .service-badges {
        flex-direction: column;
        align-items: flex-start;
    }
    
    .availability-badge {
        margin-bottom: 5px;
    }
}
</style>
</head>

<body class="preload-wrapper">

    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W4GZFHCG"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <!-- Scroll Top -->
    <button id="scroll-top">
        <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_15741_24194)">
                <path
                    d="M3 11.9175L12 2.91748L21 11.9175H16.5V20.1675C16.5 20.3664 16.421 20.5572 16.2803 20.6978C16.1397 20.8385 15.9489 20.9175 15.75 20.9175H8.25C8.05109 20.9175 7.86032 20.8385 7.71967 20.6978C7.57902 20.5572 7.5 20.3664 7.5 20.1675V11.9175H3Z"
                    stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            </g>
            <defs>
                <clipPath id="clip0_15741_24194">
                    <rect width="24" height="24" fill="white" transform="translate(0 0.66748)" />
                </clipPath>
            </defs>
        </svg>
    </button>


    <!-- preload -->
    <div class="preload preload-container-img">
        <div class="preload-logo-img">
            <img src="/images/logo/Blushley-png-logo.png" alt="Glow & Glamour Logo" class="logo-img">
            <!--<div class="spinner"></div>-->
        </div>
    </div>
    <!-- /preload -->

    <div id="wrapper">
        <!-- Top Bar-->
        <div class="tf-topbar bg-main">
            <div class="container">
                <div class="tf-topbar_wrap d-flex align-items-center justify-content-center justify-content-xl-between">
                    <ul class="topbar-left">
                        <li><a class="text-caption-1 text-white" href="tel:+917994145723">+91 7994 145 723</a></li>
                                 <li><a class="text-caption-1 text-white" href="mailto:blushleyoffice@gmail.com">blushleyoffice@gmail.com</a></li>

                    </ul>
                    <div class="topbar-right d-none d-xl-block">
                        <div class="tf-cur justify-content-end">

                            <a class="text-caption-1 text-white text-decoration-none" href="/shop">Our
                                Store</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- /Top Bar -->

        <!-- Header -->
        <header id="header" class="header-default">
            <div class="container">
                <div class="row wrapper-header align-items-center">
                    <div class="col-md-4 col-3 d-xl-none">
                        <a href="#mobileMenu" class="mobile-menu" data-bs-toggle="offcanvas" aria-controls="mobileMenu">
                            <i class="icon icon-categories"></i>
                        </a>
                    </div>
                    <div class="col-xl-3 col-md-4 col-6">
                        <a href="/" class="logo-header">
                            <img src="/images/logo/logoggg.png" alt="logo" class="logo">
                        </a>
                    </div>
                    <div class="col-xl-6 d-none d-xl-block">
                        <nav class="box-navigation text-center">
                            <ul class="box-nav-ul d-flex align-items-center justify-content-center">
                                <li class="menu-item active">
                                    <a href="/" class="item-link">Home</a>
                              
                                </li>

                                <li class="menu-item"><a href="/about" class="item-link">About</a></li>
                                <li class="menu-item">
                                    <a href="/shop" class="item-link">Shop</a>



                                </li>
                                <li class="menu-item salon-at-home-link"><a href="/saloon-at-home"
                                        class="item-link">Salon at Home</a>
                                </li>

                                </li>
                                <li class="menu-item book-salon-link"><a href="/book-a-saloon"
                                        class="item-link">Book a Salon</a>
                                </li>
                                <li class="menu-item position-relative">
                                    <a href="/userblogs" class="item-link">Blogs</a>

                                </li>

                                <li class="menu-item"><a href="/contact" class="item-link">Contact</a></li>



                            </ul>
                        </nav>
                    </div>
                    <div class="col-xl-3 col-md-4 col-3">
                        <ul class="nav-icon d-flex justify-content-end align-items-center">
                            <li class="nav-search"><a href="#search" data-bs-toggle="modal" class="nav-icon-item">

                                    <img src="/images/icons/search.svg" alt="search icon">
                                </a></li>
                                <li class="nav-account">
                                    <a href="#" class="nav-icon-item">
                                        <img src="/images/icons/user.svg" alt="user">
                                    </a>
                                
                                    <div class="dropdown-account dropdown-login">
                                        <div class="sub-top">
                                            <% if (!user || user.role !== "user") { %>
                                                <!-- NOT LOGGED IN or Not a normal user -->
                                                <a href="/userLogin" class="nav-acc-link">Login</a>
                                            <% } else { %>
                                                <!-- NORMAL USER -->
                                                <a href="/user-account" class="nav-acc-link">My Account</a>
                                                <a href="/user-orders" class="nav-acc-link">Orders</a>
                                                <a href="/user-addresses" class="nav-acc-link">Addresses</a>
                                                <a href="/userBookings" class="nav-acc-link">My Bookings</a>
                                                <a href="/logout" class="nav-acc-link">Logout</a>
                                            <% } %>
                                        </div>
                                    </div>
                                </li>
                            <li class="nav-wishlist"><a href="/wishlist" class="nav-icon-item">
                                    <img src="/images/icons/heart.svg" alt="wish list">


                                </a>
                            </li>
                            <li class="nav-cart"><a href="#shoppingCart" data-bs-toggle="modal" class="nav-icon-item">

                                    <img src="/images/icons/shopping-bag.svg" alt="cart icon">
                                    <span class="count-box">0</span></a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </header>

        <!-- /Header -->

        <!-- page-title -->
        <div class="page-title" style="background-image: url('/images/banners/beautician-services.png');">
            <div class="container-full">
                <div class="row">
                    <div class="col-12">
                        <h3 class="heading text-center">Salon Services</h3>
                        <ul class="breadcrumbs d-flex align-items-center justify-content-center">
                            <li>
                                <a class="link" href="/">Home</a>
                            </li>
                            <li>
                                <i class="icon-arrRight"></i>
                            </li>
                            <li>
                                Salon Services
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <!-- /page-title -->

        <!-- Section beautician list -->
        <section class="flat-spacing">
            <div class="container">
                <!-- Filter Controls -->
                <div class="tf-shop-control">
                    <div class="tf-control-filter">
                        <a href="#filterShop" data-bs-toggle="offcanvas" aria-controls="filterShop" class="tf-btn-filter">
                            <span class="icon icon-filter"></span>
                            <span class="text">Filters</span>
                            <% if (Object.values(filters).some(f => f)) { %>
                                <span class="filter-count"><%= Object.values(filters).filter(f => f).length %></span>
                            <% } %>
                        </a>
                        <div class="d-none d-lg-flex shop-sale-text">
                            <i class="icon icon-checkCircle"></i>
                            <p class="text-caption-1">Exclusive salon offers today only</p>
                        </div>
                    </div>
        
                    <ul class="tf-control-layout">
                        <li class="tf-view-layout-switch sw-layout-list list-layout active" data-value-layout="list">
                            <div class="item"></div>
                        </li>
                    </ul>
        
                    <div class="tf-control-sorting">
                        <p class="d-none d-lg-block text-caption-1">Sort by:</p>
                        <div class="tf-dropdown-sort" data-bs-toggle="dropdown">
                            <div class="btn-select">
                                <span class="text-sort-value">
                                    <% if (filters.sort === 'top-rated') { %>Top rated<% } %>
                                    <% if (filters.sort === 'price-low-high') { %>Price: Low to High<% } %>
                                    <% if (filters.sort === 'price-high-low') { %>Price: High to Low<% } %>
                                </span>
                                <span class="icon icon-arrow-down"></span>
                            </div>
                            <div class="dropdown-menu">
                                <div class="select-item" data-sort-value="top-rated">
                                    <span class="text-value-item">Top rated</span>
                                </div>
                                <div class="select-item" data-sort-value="price-low-high">
                                    <span class="text-value-item">Price: Low to High</span>
                                </div>
                                <div class="select-item" data-sort-value="price-high-low">
                                    <span class="text-value-item">Price: High to Low</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
        
                <!-- Applied Filters -->
                <div class="wrapper-control-shop">
                    <div class="meta-filter-shop">
                        <div id="salon-count" class="count-text">
                            Showing <%= Math.min(salons.length, pageSize) %> of <%= totalSalons %> salons
                        </div>
                        <div id="applied-filters">
                            <% if (filters.service) { %>
                                <span class="applied-filter">
                                    Service: <%= filters.service %>
                                    <button class="remove-filter" data-filter="service">√ó</button>
                                </span>
                            <% } %>
                            <% if (filters.location) { %>
                                <span class="applied-filter">
                                    Location: <%= filters.location %>
                                    <button class="remove-filter" data-filter="location">√ó</button>
                                </span>
                            <% } %>
                            <% if (filters.price_min || filters.price_max) { %>
                                <span class="applied-filter">
                                    Price: ‚Çπ<%= filters.price_min || 0 %> - ‚Çπ<%= filters.price_max || '5000+' %>
                                    <button class="remove-filter" data-filter="price">√ó</button>
                                </span>
                            <% } %>
                            <% if (filters.rating) { %>
                                <span class="applied-filter">
                                    Rating: <%= filters.rating %>‚òÖ+
                                    <button class="remove-filter" data-filter="rating">√ó</button>
                                </span>
                            <% } %>
                        </div>
                        <% if (Object.values(filters).some(f => f)) { %>
                            <button id="remove-all" class="remove-all-filters text-btn-uppercase">
                                REMOVE ALL <i class="icon icon-close"></i>
                            </button>
                        <% } %>
                    </div>
        
                    <!-- Salon List -->
                    <div class="tf-list-layout wrapper-shop" id="listLayout">
                        <% if (salons.length === 0) { %>
                            <div class="text-center py-5">
                                <i class="icon icon-search fs-1 text-muted mb-3"></i>
                                <p class="text-muted">No salons found matching your criteria</p>
                                <button class="btn btn-outline-primary mt-3" onclick="resetFilters()">
                                    Reset Filters
                                </button>
                            </div>
                        <% } %>
        
                        <% salons.forEach(salon => { %>
                            <div class="card-product style-list"
                                 data-rating="<%= salon.avgRating %>"
                                 data-price="<%= salon.lowestPrice %>"
                                 data-location="<%= salon.address?.city || '' %>">
                                <div class="card-product-wrapper salon-img">
                                    <a href="/book-a-saloon/<%= salon._id %>" class="product-img">
                                        <img class="lazyload img-product" 
                                             src="<%= salon.images && salon.images[0] ? salon.images[0] : '/images/brand/salon-default.jpg' %>" 
                                             alt="<%= salon.name %>">
                                    </a>
                                </div>
                                <div class="card-product-info">
                                    <a href="/book-a-saloon/<%= salon._id %>" class="title link"><%= salon.name %></a>
                                    <div class="price">
                                        <span class="rating-badge">
                                            <%= '‚òÖ'.repeat(Math.floor(salon.avgRating)) %><%= '‚òÜ'.repeat(5-Math.floor(salon.avgRating)) %>
                                        </span>
                                        <span class="review-count">(<%= salon.reviewCount %> reviews)</span>
                                        <span class="price-badge ms-2">From ‚Çπ<%= salon.lowestPrice %></span>
                                    </div>
        
                                    <div class="location-info">
                                        <span class="icon icon-location"></span>
                                        <span class="location-text">
                                            <%= salon.address?.line1 ? salon.address.line1 + ', ' : '' %>
                                            <%= salon.address?.city || '' %>
                                            <%= salon.address?.state ? ', ' + salon.address.state : '' %>
                                        </span>
                                    </div>
        
                                    <p class="description text-secondary text-line-clamp-2">
                                        <%= salon.description || 'Premium salon services by expert stylists.' %>
                                    </p>
        
                                    <div class="variant-wrap-list">
                                        <div class="size-box list-product-btn">
                                            <div class="service-badges">
                                                <% salon.serviceNames && salon.serviceNames.forEach((service, index) => { %>
                                                    <% if (index < 3) { %>
                                                        <span class="availability-badge"><%= service %></span>
                                                    <% } %>
                                                <% }) %>
                                                <% if (salon.serviceNames && salon.serviceNames.length > 3) { %>
                                                    <span class="availability-badge">+<%= salon.serviceNames.length - 3 %> More</span>
                                                <% } %>
                                            </div>
                                        </div>
        
                                        <div class="size-box list-product-btn">
                                            <% if (salon.isAvailableToday) { %>
                                                <span class="availability-badge available-today">Available Today</span>
                                            <% } else { %>
                                                <span class="availability-badge unavailable">Booked Out</span>
                                            <% } %>
                                            <% if (salon.serviceMode?.homeService) { %>
                                                <span class="availability-badge home-service">Home Service Available</span>
                                            <% } %>
                                        </div>
        
                                        <div class="list-product-btn">
                                            <button class="btn-main-product" onclick="openBookingModal('<%= salon._id %>')">
                                                Book Your Appointment
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        <% }) %>
                    </div>
        
                    <!-- Pagination -->
                    <% 
                        function paginationUrl(pageNum) {
                            let baseUrl = '/book-a-saloon';
                            let params = [];
                            if (filters.service) params.push('service=' + encodeURIComponent(filters.service));
                            if (filters.price_min) params.push('price_min=' + encodeURIComponent(filters.price_min));
                            if (filters.price_max) params.push('price_max=' + encodeURIComponent(filters.price_max));
                            if (filters.availability) params.push('availability=' + encodeURIComponent(filters.availability));
                            if (filters.gender) params.push('gender=' + encodeURIComponent(filters.gender));
                            if (filters.location) params.push('location=' + encodeURIComponent(filters.location));
                            if (filters.rating) params.push('rating=' + encodeURIComponent(filters.rating));
                            if (filters.service_mode) params.push('service_mode=' + encodeURIComponent(filters.service_mode));
                            if (filters.sort) params.push('sort=' + encodeURIComponent(filters.sort));
                            params.push('page=' + pageNum);
                            params.push('limit=' + pageSize);
                            return baseUrl + (params.length ? '?' + params.join('&') : '');
                        }
                    %>
                    <% if (totalPages > 1) { %>
                        <ul class="wg-pagination justify-content-center salon-pagination">
                            <% if (currentPage > 1) { %>
                                <li>
                                    <a href="<%= paginationUrl(currentPage - 1) %>" class="pagination-item text-button">
                                        <i class="icon-arrLeft"></i>
                                    </a>
                                </li>
                            <% } %>

                            <% for (let i = 1; i <= totalPages; i++) { %>
                                <% if (i === 1 || i === totalPages || (i >= currentPage - 1 && i <= currentPage + 1)) { %>
                                    <li class="<%= currentPage === i ? 'active' : '' %>">
                                        <% if (currentPage === i) { %>
                                            <div class="pagination-item text-button"><%= i %></div>
                                        <% } else { %>
                                            <a href="<%= paginationUrl(i) %>" class="pagination-item text-button"><%= i %></a>
                                        <% } %>
                                    </li>
                                <% } else if (i === currentPage - 2 || i === currentPage + 2) { %>
                                    <li><span class="pagination-item text-button">...</span></li>
                                <% } %>
                            <% } %>

                            <% if (currentPage < totalPages) { %>
                                <li>
                                    <a href="<%= paginationUrl(currentPage + 1) %>" class="pagination-item text-button">
                                        <i class="icon-arrRight"></i>
                                    </a>
                                </li>
                            <% } %>
                        </ul>
                    <% } %>
                </div>
            </div>
        </section>

        <!-- Booking Modal -->
        <div class="sbm-modal-overlay" id="bookingModal">
            <div class="sbm-modal-container">
                <div class="sbm-modal-header">
                    <div class="sbm-modal-title">Book Your Appointment</div>
                    <div class="sbm-modal-subtitle">Glam Studio Salon - Indiranagar</div>
                    <button class="sbm-close-btn" onclick="closeBookingModal()">√ó</button>
                </div>

                <div class="sbm-modal-body">
                    <!-- Services Section -->
                    <div class="sbm-section">
                        <div class="sbm-section-title">
                            <div class="sbm-section-icon">‚úÇ</div>
                            Select Services
                        </div>
                        <div class="sbm-services-grid" id="servicesGrid">
                            <!-- Services will be populated here -->
                        </div>
                    </div>

                    <!-- Date Selection -->
                    <div class="sbm-section">
                        <div class="sbm-section-title">
                            <div class="sbm-section-icon">üìÖ</div>
                            Choose Date
                        </div>
                        <div class="sbm-date-selector" id="dateSelector">
                            <!-- Dates will be populated here -->
                        </div>
                    </div>

                    <div class="sbm-modal-body">
                        <!-- Service Type Selection -->
                        <div class="sbm-section">
                            <div class="sbm-section-title">
                                <div class="sbm-section-icon">üè†</div>
                                Service Location
                            </div>
                            <div class="sbm-service-type-container">
                                <div class="sbm-service-type-option" id="salonVisit"
                                    onclick="selectServiceType('salon')">
                                    <div class="sbm-service-type-icon">üè¢</div>
                                    <div class="sbm-service-type-title">Visit Salon</div>
                                    <div class="sbm-service-type-desc">Come to our salon at Indiranagar</div>
                                </div>
                                <div class="sbm-service-type-option" id="homeService"
                                    onclick="selectServiceType('home')">
                                    <div class="sbm-service-type-icon">üè°</div>
                                    <div class="sbm-service-type-title">Home Service</div>
                                    <div class="sbm-service-type-desc">Beautician visits your location</div>
                                </div>
                            </div>
                        </div>

                        <!-- Home Address Section - Add this in your HTML modal body after Service Type Selection -->
                        <div class="sbm-section" id="homeAddressSection" style="display: none;">
                            <div class="sbm-section-title">
                                <div class="sbm-section-icon">üìç</div>
                                Service Address
                            </div>
                            <div class="sbm-form-group">
                                <label class="sbm-form-label">Complete Address *</label>
                                <input type="text" class="sbm-form-input" id="userAddress"
                                    placeholder="Enter your complete address (House/Flat No, Street, Area)">
                            </div>
                            <div class="sbm-form-group">
                                <label class="sbm-form-label">Landmark / Additional Details</label>
                                <input type="text" class="sbm-form-input" id="addressDetails"
                                    placeholder="Nearby landmark or additional directions">
                            </div>
                            <div class="sbm-form-group">
                                <label for="customerAddress" class="sbm-form-label">Google Maps Link</label>
                                <input type="text" id="customerAddress" name="customerAddress"
                                    placeholder="Enter your address or paste Google Maps link" class="sbm-form-input" />
                                <small style="color: #777;">
                                    Example: https://maps.app.goo.gl/abcd1234
                                </small>
                            </div>
                            <!--  <div class="sbm-form-group">
                                <label class="sbm-form-label">Mark Location on Map</label>
                                <div class="sbm-map-container">
                                    <input type="text" class="sbm-form-input" id="mapSearch"
                                        placeholder="Search location or click on map" style="margin-bottom: 12px;">
                                    <div class="sbm-map-wrapper">
                                        <div id="map"></div>
                                    </div>
                                    <div class="sbm-coordinates">
                                        <span style="font-weight: 600;">Selected Location:</span>
                                        <span id="selectedLocation">Not selected yet</span>
                                    </div>
                                </div>
                            </div>-->
                        </div>



                        <!-- Time Slots -->
                        <div class="sbm-section">
                            <div class="sbm-section-title">
                                <div class="sbm-section-icon">üïê</div>
                                Available Time Slots
                            </div>
                            <div class="sbm-slots-container" id="slotsContainer">
                                <!-- Slots will be populated here -->
                            </div>
                        </div>

                        <!-- User Details -->
                        <div class="sbm-section">
                            <div class="sbm-section-title">
                                <div class="sbm-section-icon">üë§</div>
                                Your Details
                            </div>
                            <div class="sbm-form-row">
                                <div class="sbm-form-group">
                                    <label class="sbm-form-label">Full Name *</label>
                                    <input type="text" class="sbm-form-input" id="userName"
                                        placeholder="Enter your name" required>
                                </div>
                                <div class="sbm-form-group">
                                    <label class="sbm-form-label">Phone Number *</label>
                                    <input type="tel" class="sbm-form-input" id="userPhone"
                                        placeholder="+91 XXXXX XXXXX" required>
                                </div>
                            </div>
                            <div class="sbm-form-group">
                                <label class="sbm-form-label">Email Address</label>
                                <input type="email" class="sbm-form-input" id="userEmail"
                                    placeholder="your.email@example.com">
                            </div>
                            <div class="sbm-form-group">
                                <label class="sbm-form-label">Special Requests (Optional)</label>
                                <textarea class="sbm-form-textarea" id="userNotes"
                                    placeholder="Any specific requirements or preferences..."></textarea>
                            </div>
                        </div>
                    </div>

                    <div class="sbm-modal-footer">
                        <div class="sbm-total-price">
                            Total: <span class="sbm-price-amount" id="totalPrice">‚Çπ0</span>
                        </div>
                        <button class="sbm-submit-btn" onclick="submitBooking()">Confirm Booking</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- /Section beautician list -->
<script>
    // Booking Modal JavaScript
let selectedServices = [];
let selectedDate = null;
let selectedTimeSlot = null;
let selectedServiceType = 'salon'; // 'salon' or 'home'
let homeServiceCharge = 0;
let salonData = null;

async function openBookingModal(salonId) {
    try {
        // Show loading state
        document.getElementById('bookingModal').classList.add('sbm-active');
        document.body.style.overflow = 'hidden';
        
        // Store salon ID
        window.currentSalonId = salonId;
        
        // Reset selections
        selectedServices = [];
        selectedDate = null;
        selectedTimeSlot = null;
        selectedServiceType = 'salon';
        homeServiceCharge = 0;
        
        // Load salon data
        await loadSalonData(salonId);
        
        // Load services
        await loadSalonServices(salonId);
        
        // Initialize date selector for next 30 days
        initializeDateSelector();
        
        // Update total price
        updateTotalPrice();
        
    } catch (error) {
        console.error('Error opening booking modal:', error);
        alert('Failed to load salon information. Please try again.');
        closeBookingModal();
    }
}

async function loadSalonData(salonId) {
    try {
        const response = await fetch(`/api/salon/${salonId}`);
        const data = await response.json();
        
        if (data.success) {
            salonData = data.salon;
            
            // Update modal title with salon name
            const modalTitle = document.querySelector('.sbm-modal-subtitle');
            if (modalTitle) {
                modalTitle.textContent = `${salonData.name} - ${salonData.address?.city || ''}`;
            }
            
            // Set home service charge
            if (salonData.serviceMode?.homeService) {
                homeServiceCharge = salonData.serviceMode.homeServiceExtraCharge || 0;
            }
            
            // Show/hide home service option
            const homeServiceOption = document.getElementById('homeService');
            if (homeServiceOption) {
                if (salonData.serviceMode?.homeService) {
                    homeServiceOption.style.display = 'flex';
                    homeServiceOption.onclick = () => selectServiceType('home');
                } else {
                    homeServiceOption.style.display = 'none';
                }
            }
        }
    } catch (error) {
        console.error('Error loading salon data:', error);
    }
}

async function loadSalonServices(salonId) {
    try {
        const response = await fetch(`/api/salon/${salonId}/services`);
        const data = await response.json();
        
        const servicesGrid = document.getElementById('servicesGrid');
        if (!servicesGrid) return;
        
        if (data.success && data.services && data.services.length > 0) {
            servicesGrid.innerHTML = data.services.map(service => `
                <div class="sbm-service-card" data-service-id="${service._id}" 
                     onclick="toggleService('${service._id}', ${service.price})">
                    <div class="sbm-service-checkbox">
                        <input type="checkbox" id="service-${service._id}" 
                               onchange="toggleService('${service._id}', ${service.price})">
                        <label for="service-${service._id}"></label>
                    </div>
                    <div class="sbm-service-details">
                        <div class="sbm-service-name">${service.serviceName}</div>
                        <div class="sbm-service-meta">
                            <span class="sbm-service-price">‚Çπ${service.price}</span>
                            <span class="sbm-service-duration">${service.durationMinutes || 60} min</span>
                        </div>
                    </div>
                </div>
            `).join('');
        } else {
            servicesGrid.innerHTML = '<p class="text-muted">No services available</p>';
        }
    } catch (error) {
        console.error('Error loading services:', error);
        servicesGrid.innerHTML = '<p class="text-danger">Failed to load services</p>';
    }
}

function toggleService(serviceId, price) {
    const checkbox = document.querySelector(`#service-${serviceId}`);
    const serviceCard = document.querySelector(`[data-service-id="${serviceId}"]`);
    
    if (checkbox.checked) {
        // Add service
        selectedServices.push({ id: serviceId, price: price });
        serviceCard.classList.add('selected');
    } else {
        // Remove service
        selectedServices = selectedServices.filter(service => service.id !== serviceId);
        serviceCard.classList.remove('selected');
    }
    
    // Update total price
    updateTotalPrice();
    
    // If date is selected, check availability
    if (selectedDate) {
        checkAvailability();
    }
}

function initializeDateSelector() {
    const dateSelector = document.getElementById('dateSelector');
    if (!dateSelector) return;
    
    const today = new Date();
    const next30Days = [];
    
    for (let i = 0; i < 30; i++) {
        const date = new Date(today);
        date.setDate(today.getDate() + i);
        next30Days.push(date);
    }
    
    dateSelector.innerHTML = next30Days.map(date => {
        const dateStr = date.toISOString().split('T')[0];
        const dayName = date.toLocaleDateString('en-US', { weekday: 'short' });
        const dayNum = date.getDate();
        const monthName = date.toLocaleDateString('en-US', { month: 'short' });
        
        return `
            <div class="sbm-date-card ${dateStr === selectedDate ? 'selected' : ''}" 
                 onclick="selectDate('${dateStr}')">
                <div class="sbm-date-day">${dayName}</div>
                <div class="sbm-date-number">${dayNum}</div>
                <div class="sbm-date-month">${monthName}</div>
            </div>
        `;
    }).join('');
    
    // Select today by default
    const todayStr = today.toISOString().split('T')[0];
    selectDate(todayStr);
}

function selectDate(dateStr) {
    selectedDate = dateStr;
    
    // Update UI
    document.querySelectorAll('.sbm-date-card').forEach(card => {
        card.classList.remove('selected');
    });
    document.querySelector(`.sbm-date-card[onclick*="${dateStr}"]`)?.classList.add('selected');
    
    // Check availability
    checkAvailability();
}

async function checkAvailability() {
    const slotsContainer = document.getElementById('slotsContainer');
    if (!slotsContainer || !currentSalonId || !selectedDate || selectedServices.length === 0) {
        slotsContainer.innerHTML = '<p class="text-muted">Please select services and date to see available slots</p>';
        return;
    }
    
    // Show loading
    slotsContainer.innerHTML = '<p class="text-muted">Checking availability...</p>';
    
    try {
        const serviceIds = selectedServices.map(s => s.id).join(',');
        const response = await fetch(
            `/api/booking/available-slots?salonId=${currentSalonId}&bookingDate=${selectedDate}&serviceIds=${serviceIds}`
        );
        const data = await response.json();
        
        if (data.success) {
            if (data.availableSlots.length > 0) {
                slotsContainer.innerHTML = data.availableSlots.map(slot => `
                    <div class="sbm-slot-card ${selectedTimeSlot === slot.startTime ? 'selected' : ''}" 
                         onclick="selectTimeSlot('${slot.startTime}')">
                        <div class="sbm-slot-time">${formatTime(slot.startTime)} - ${formatTime(slot.endTime)}</div>
                        <div class="sbm-slot-duration">${slot.duration} min</div>
                    </div>
                `).join('');
            } else {
                slotsContainer.innerHTML = '<p class="text-muted">No slots available for selected services and date</p>';
            }
        } else {
            slotsContainer.innerHTML = `<p class="text-danger">${data.message || 'Failed to check availability'}</p>`;
        }
    } catch (error) {
        console.error('Error checking availability:', error);
        slotsContainer.innerHTML = '<p class="text-danger">Error checking availability</p>';
    }
}

function formatTime(timeStr) {
    const [hours, minutes] = timeStr.split(':').map(Number);
    const period = hours >= 12 ? 'PM' : 'AM';
    const formattedHours = hours % 12 || 12;
    return `${formattedHours}:${minutes.toString().padStart(2, '0')} ${period}`;
}

function selectTimeSlot(timeSlot) {
    selectedTimeSlot = timeSlot;
    
    // Update UI
    document.querySelectorAll('.sbm-slot-card').forEach(card => {
        card.classList.remove('selected');
    });
    document.querySelector(`.sbm-slot-card[onclick*="${timeSlot}"]`)?.classList.add('selected');
}

function selectServiceType(type) {
    selectedServiceType = type;
    
    // Update UI
    const salonVisit = document.getElementById('salonVisit');
    const homeService = document.getElementById('homeService');
    const homeAddressSection = document.getElementById('homeAddressSection');
    
    if (type === 'salon') {
        salonVisit.classList.add('selected');
        homeService.classList.remove('selected');
        homeAddressSection.style.display = 'none';
    } else {
        homeService.classList.add('selected');
        salonVisit.classList.remove('selected');
        homeAddressSection.style.display = 'block';
        
        // Validate home service is available
        if (!salonData?.serviceMode?.homeService) {
            alert('Home service is not available for this salon');
            selectServiceType('salon');
            return;
        }
    }
    
    // Update total price
    updateTotalPrice();
}

function updateTotalPrice() {
    const totalElement = document.getElementById('totalPrice');
    if (!totalElement) return;
    
    let total = selectedServices.reduce((sum, service) => sum + service.price, 0);
    
    // Add home service charge if applicable
    if (selectedServiceType === 'home') {
        total += homeServiceCharge;
    }
    
    totalElement.textContent = `‚Çπ${total}`;
}

async function submitBooking() {
    try {
        // Validate required fields
        if (selectedServices.length === 0) {
            alert('Please select at least one service');
            return;
        }
        
        if (!selectedDate) {
            alert('Please select a date');
            return;
        }
        
        if (!selectedTimeSlot) {
            alert('Please select a time slot');
            return;
        }
        
        if (!currentSalonId) {
            alert('Salon information missing');
            return;
        }
        
        // Validate user details
        const userName = document.getElementById('userName').value.trim();
        const userPhone = document.getElementById('userPhone').value.trim();
        
        if (!userName) {
            alert('Please enter your name');
            return;
        }
        
        if (!userPhone || userPhone.length < 10) {
            alert('Please enter a valid phone number');
            return;
        }
        
        // Additional validation for home service
        if (selectedServiceType === 'home') {
            const userAddress = document.getElementById('userAddress').value.trim();
            if (!userAddress) {
                alert('Please enter your address for home service');
                return;
            }
        }
        
        // Check if user is logged in
        const isLoggedIn = document.body.getAttribute('data-user-logged-in') === 'true';
        if (!isLoggedIn) {
            // Store booking data and redirect to login
            localStorage.setItem('pendingBooking', JSON.stringify({
                salonId: currentSalonId,
                selectedServices,
                selectedDate,
                selectedTimeSlot,
                selectedServiceType,
                userDetails: {
                    name: userName,
                    phone: userPhone,
                    email: document.getElementById('userEmail').value.trim(),
                    notes: document.getElementById('userNotes').value.trim()
                }
            }));
            
            window.location.href = '/userLogin?redirect=/book-a-saloon';
            return;
        }
        
        // Prepare booking data
        const bookingData = {
            salonId: currentSalonId,
            serviceIds: selectedServices.map(s => s.id),
            bookingDate: selectedDate,
            bookingTime: selectedTimeSlot,
            bookingType: selectedServiceType,
            paymentMethod: 'online', // Default, can be changed to dropdown
            userNotes: document.getElementById('userNotes').value.trim()
        };
        
        // Add address for home service
        if (selectedServiceType === 'home') {
            bookingData.addressId = null; // You'll need address selection logic
            bookingData.homeAddress = document.getElementById('userAddress').value.trim();
            bookingData.googleMapLink = document.getElementById('customerAddress').value.trim();
        }
        
        // Show loading
        const submitBtn = document.querySelector('.sbm-submit-btn');
        const originalText = submitBtn.textContent;
        submitBtn.textContent = 'Processing...';
        submitBtn.disabled = true;
        
        // Submit booking
        const response = await fetch('/api/booking/create', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(bookingData)
        });
        
        const result = await response.json();
        
        if (result.success) {
            // Show success message
            alert('Booking confirmed! Your booking ID: ' + result.booking.token);
            
            // Redirect to booking confirmation page
            window.location.href = `/booking-confirmation/${result.booking.id}`;
        } else {
            alert(result.message || 'Failed to create booking');
            submitBtn.textContent = originalText;
            submitBtn.disabled = false;
        }
        
    } catch (error) {
        console.error('Error submitting booking:', error);
        alert('An error occurred. Please try again.');
        
        const submitBtn = document.querySelector('.sbm-submit-btn');
        submitBtn.textContent = 'Confirm Booking';
        submitBtn.disabled = false;
    }
}

function closeBookingModal() {
    document.getElementById('bookingModal').classList.remove('sbm-active');
    document.body.style.overflow = 'auto';
    
    // Clear selections
    selectedServices = [];
    selectedDate = null;
    selectedTimeSlot = null;
    
    // Reset form fields
    const inputs = document.querySelectorAll('#bookingModal input, #bookingModal textarea');
    inputs.forEach(input => {
        input.value = '';
    });
    
    // Reset checkboxes
    document.querySelectorAll('#bookingModal input[type="checkbox"]').forEach(cb => {
        cb.checked = false;
    });
    
    // Reset UI
    document.querySelectorAll('.sbm-service-card.selected').forEach(card => {
        card.classList.remove('selected');
    });
    
    document.querySelectorAll('.sbm-date-card.selected').forEach(card => {
        card.classList.remove('selected');
    });
    
    document.querySelectorAll('.sbm-slot-card.selected').forEach(card => {
        card.classList.remove('selected');
    });
    
    // Reset service type
    selectServiceType('salon');
}

// Add CSS for booking modal
const bookingModalStyles = `
.sbm-modal-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 10000;
    overflow-y: auto;
}

.sbm-modal-overlay.sbm-active {
    display: flex;
    justify-content: center;
    align-items: flex-start;
    padding: 20px;
}

.sbm-modal-container {
    background: white;
    border-radius: 12px;
    width: 100%;
    max-width: 800px;
    margin: 20px auto;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
    animation: sbmSlideIn 0.3s ease;
}

@keyframes sbmSlideIn {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
}

.sbm-modal-header {
    padding: 24px 32px;
    border-bottom: 1px solid #eee;
    position: relative;
}

.sbm-modal-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: #333;
    margin-bottom: 4px;
}

.sbm-modal-subtitle {
    font-size: 0.95rem;
    color: #666;
}

.sbm-close-btn {
    position: absolute;
    top: 24px;
    right: 32px;
    background: none;
    border: none;
    font-size: 2rem;
    cursor: pointer;
    color: #999;
    line-height: 1;
    padding: 0;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: all 0.2s;
}

.sbm-close-btn:hover {
    background: #f5f5f5;
    color: #333;
}

.sbm-modal-body {
    padding: 24px 32px;
}

.sbm-section {
    margin-bottom: 32px;
}

.sbm-section-title {
    font-size: 1.2rem;
    font-weight: 600;
    color: #333;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.sbm-section-icon {
    background: #f0f0f0;
    width: 36px;
    height: 36px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
}

.sbm-services-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 12px;
}

.sbm-service-card {
    border: 2px solid #eee;
    border-radius: 8px;
    padding: 16px;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 12px;
}

.sbm-service-card:hover {
    border-color: #ddd;
    background: #f9f9f9;
}

.sbm-service-card.selected {
    border-color: #ff4081;
    background: #fff5f7;
}

.sbm-service-checkbox {
    position: relative;
}

.sbm-service-checkbox input[type="checkbox"] {
    display: none;
}

.sbm-service-checkbox label {
    width: 20px;
    height: 20px;
    border: 2px solid #ccc;
    border-radius: 4px;
    display: block;
    cursor: pointer;
    position: relative;
    transition: all 0.2s;
}

.sbm-service-checkbox input[type="checkbox"]:checked + label {
    background: #ff4081;
    border-color: #ff4081;
}

.sbm-service-checkbox input[type="checkbox"]:checked + label:after {
    content: '‚úì';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: white;
    font-size: 12px;
    font-weight: bold;
}

.sbm-service-details {
    flex: 1;
}

.sbm-service-name {
    font-weight: 600;
    color: #333;
    margin-bottom: 4px;
}

.sbm-service-meta {
    display: flex;
    justify-content: space-between;
    font-size: 0.9rem;
    color: #666;
}

.sbm-date-selector {
    display: flex;
    gap: 12px;
    overflow-x: auto;
    padding: 10px 0;
}

.sbm-date-card {
    min-width: 80px;
    padding: 12px 8px;
    border: 2px solid #eee;
    border-radius: 8px;
    text-align: center;
    cursor: pointer;
    transition: all 0.2s;
}

.sbm-date-card:hover {
    border-color: #ddd;
}

.sbm-date-card.selected {
    border-color: #ff4081;
    background: #fff5f7;
}

.sbm-date-day {
    font-size: 0.8rem;
    color: #666;
    margin-bottom: 4px;
}

.sbm-date-number {
    font-size: 1.4rem;
    font-weight: 700;
    color: #333;
    margin-bottom: 2px;
}

.sbm-date-month {
    font-size: 0.8rem;
    color: #666;
}

.sbm-service-type-container {
    display: flex;
    gap: 16px;
}

.sbm-service-type-option {
    flex: 1;
    border: 2px solid #eee;
    border-radius: 8px;
    padding: 20px;
    cursor: pointer;
    transition: all 0.2s;
    text-align: center;
}

.sbm-service-type-option:hover {
    border-color: #ddd;
}

.sbm-service-type-option.selected {
    border-color: #ff4081;
    background: #fff5f7;
}

.sbm-service-type-icon {
    font-size: 2rem;
    margin-bottom: 8px;
}

.sbm-service-type-title {
    font-weight: 600;
    color: #333;
    margin-bottom: 4px;
}

.sbm-service-type-desc {
    font-size: 0.9rem;
    color: #666;
}

.sbm-form-group {
    margin-bottom: 20px;
}

.sbm-form-label {
    display: block;
    font-weight: 600;
    color: #333;
    margin-bottom: 8px;
}

.sbm-form-input, .sbm-form-textarea {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid #eee;
    border-radius: 8px;
    font-size: 1rem;
    transition: all 0.2s;
}

.sbm-form-input:focus, .sbm-form-textarea:focus {
    outline: none;
    border-color: #ff4081;
}

.sbm-form-textarea {
    min-height: 100px;
    resize: vertical;
}

.sbm-form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
}

.sbm-slots-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
    gap: 12px;
}

.sbm-slot-card {
    border: 2px solid #eee;
    border-radius: 8px;
    padding: 16px;
    text-align: center;
    cursor: pointer;
    transition: all 0.2s;
}

.sbm-slot-card:hover {
    border-color: #ddd;
}

.sbm-slot-card.selected {
    border-color: #ff4081;
    background: #fff5f7;
}

.sbm-slot-time {
    font-weight: 600;
    color: #333;
    margin-bottom: 4px;
}

.sbm-slot-duration {
    font-size: 0.85rem;
    color: #666;
}

.sbm-modal-footer {
    padding: 24px 32px;
    border-top: 1px solid #eee;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.sbm-total-price {
    font-size: 1.3rem;
    font-weight: 700;
    color: #333;
}

.sbm-price-amount {
    color: #ff4081;
}

.sbm-submit-btn {
    background: #ff4081;
    color: white;
    border: none;
    border-radius: 8px;
    padding: 14px 32px;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
}

.sbm-submit-btn:hover {
    background: #e91e63;
    transform: translateY(-2px);
}

.sbm-submit-btn:disabled {
    background: #ccc;
    cursor: not-allowed;
    transform: none;
}

.sbm-map-container {
    margin-top: 12px;
}

.sbm-map-wrapper {
    width: 100%;
    height: 200px;
    border-radius: 8px;
    overflow: hidden;
    margin-bottom: 12px;
}

#map {
    width: 100%;
    height: 100%;
}

.sbm-coordinates {
    font-size: 0.9rem;
    color: #666;
}

/* Responsive */
@media (max-width: 768px) {
    .sbm-modal-overlay.sbm-active {
        padding: 10px;
    }
    
    .sbm-modal-container {
        margin: 10px;
    }
    
    .sbm-modal-header,
    .sbm-modal-body,
    .sbm-modal-footer {
        padding: 16px;
    }
    
    .sbm-services-grid {
        grid-template-columns: 1fr;
    }
    
    .sbm-form-row {
        grid-template-columns: 1fr;
        gap: 0;
    }
    
    .sbm-service-type-container {
        flex-direction: column;
    }
    
    .sbm-date-selector {
        flex-wrap: nowrap;
        overflow-x: auto;
    }
}

@media (max-width: 480px) {
    .sbm-slots-container {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .sbm-modal-footer {
        flex-direction: column;
        gap: 16px;
        text-align: center;
    }
}
`;

// Add styles to document
const styleSheet = document.createElement('style');
styleSheet.textContent = bookingModalStyles;
document.head.appendChild(styleSheet);

// Add event listeners for filter functionality
document.addEventListener('DOMContentLoaded', function() {
    // Initialize filter count
    updateFilterCount();
    
    // Handle filter changes
    document.querySelectorAll('.filter-checkbox, .filter-radio').forEach(input => {
        input.addEventListener('change', updateFilterCount);
    });
    
    // Handle sort selection
    document.querySelectorAll('.select-item').forEach(item => {
        item.addEventListener('click', function() {
            const sortValue = this.dataset.sortValue;
            document.querySelector('.text-sort-value').textContent = 
                this.querySelector('.text-value-item').textContent;
            document.querySelector('.text-sort-value').dataset.sortValue = sortValue;
            
            // Update URL with sort parameter
            const url = new URL(window.location);
            url.searchParams.set('sort', sortValue);
            url.searchParams.delete('page'); // Reset to page 1
            window.location.href = url.toString();
        });
    });
    
    // Handle applied filters removal
    document.addEventListener('click', function(e) {
        if (e.target.classList.contains('remove-filter')) {
            const filterName = e.target.dataset.filter;
            removeFilter(filterName);
        }
    });
    
    // Handle "Remove All" button
    document.getElementById('remove-all')?.addEventListener('click', function() {
        window.location.href = '/book-a-saloon';
    });
});

function updateFilterCount() {
    const filterCount = document.querySelectorAll('.filter-checkbox:checked, .filter-radio:checked').length;
    const priceMin = document.getElementById('price_min')?.value;
    const priceMax = document.getElementById('price_max')?.value;
    
    let count = filterCount;
    if (priceMin || priceMax) {
        count++;
    }
    
    const filterCountElement = document.querySelector('.filter-count');
    if (filterCountElement) {
        filterCountElement.textContent = count;
        filterCountElement.style.display = count > 0 ? 'inline-flex' : 'none';
    }
}

function removeFilter(filterName) {
    const url = new URL(window.location);
    
    if (filterName === 'price') {
        url.searchParams.delete('price_min');
        url.searchParams.delete('price_max');
    } else {
        url.searchParams.delete(filterName);
    }
    
    url.searchParams.delete('page'); // Reset to page 1
    window.location.href = url.toString();
}

// Handle login redirect with pending booking
document.addEventListener('DOMContentLoaded', function() {
    const pendingBooking = localStorage.getItem('pendingBooking');
    if (pendingBooking && window.location.pathname.includes('book-a-saloon')) {
        // Check if user just logged in
        if (document.body.getAttribute('data-user-logged-in') === 'true') {
            try {
                const bookingData = JSON.parse(pendingBooking);
                localStorage.removeItem('pendingBooking');
                
                // Auto-fill the form with saved data
                if (bookingData.userDetails) {
                    const { name, phone, email, notes } = bookingData.userDetails;
                    document.getElementById('userName').value = name || '';
                    document.getElementById('userPhone').value = phone || '';
                    document.getElementById('userEmail').value = email || '';
                    document.getElementById('userNotes').value = notes || '';
                }
                
                // Show success message
                alert('Welcome back! Your booking details have been restored.');
                
            } catch (error) {
                console.error('Error restoring booking:', error);
            }
        }
    }
});

// Price slider initialization (requires noUiSlider library)
function initPriceSlider() {
    const priceSlider = document.getElementById('price-value-range');
    if (!priceSlider) return;
    
    const minPrice = parseInt(priceSlider.dataset.min) || 100;
    const maxPrice = parseInt(priceSlider.dataset.max) || 5000;
    const currentMin = parseInt(priceSlider.dataset.currentMin) || minPrice;
    const currentMax = parseInt(priceSlider.dataset.currentMax) || maxPrice;
    
    // Check if noUiSlider is available
    if (typeof noUiSlider !== 'undefined') {
        noUiSlider.create(priceSlider, {
            start: [currentMin, currentMax],
            connect: true,
            range: {
                'min': minPrice,
                'max': maxPrice
            },
            step: 100,
            tooltips: [true, true],
            format: {
                to: function(value) {
                    return '‚Çπ' + Math.round(value);
                },
                from: function(value) {
                    return Number(value.replace('‚Çπ', ''));
                }
            }
        });
        
        priceSlider.noUiSlider.on('update', function(values) {
            const [min, max] = values;
            document.getElementById('price-min-value').textContent = min;
            document.getElementById('price-max-value').textContent = max;
            document.getElementById('price_min').value = min.replace('‚Çπ', '');
            document.getElementById('price_max').value = max.replace('‚Çπ', '');
            updateFilterCount();
        });
    } else {
        // Fallback to simple inputs if noUiSlider not available
        priceSlider.innerHTML = `
            <input type="number" id="price_min_input" class="form-control" 
                   min="${minPrice}" max="${maxPrice}" value="${currentMin}" 
                   placeholder="Min price">
            <span>to</span>
            <input type="number" id="price_max_input" class="form-control" 
                   min="${minPrice}" max="${maxPrice}" value="${currentMax}" 
                   placeholder="Max price">
        `;
        
        document.getElementById('price_min_input').addEventListener('change', function() {
            document.getElementById('price_min').value = this.value;
            updateFilterCount();
        });
        
        document.getElementById('price_max_input').addEventListener('change', function() {
            document.getElementById('price_max').value = this.value;
            updateFilterCount();
        });
    }
}

// Initialize price slider when DOM is loaded
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initPriceSlider);
} else {
    initPriceSlider();
}
</script>



        <!-- Footer -->
         <footer id="footer" class="footer">
    <div class="footer-wrap">
        <div class="footer-body">
            <div class="container">
                <div class="row">
                    <div class="col-lg-5">
                        <div class="footer-infor">
                            <div class="footer-logo">
                                <a href="/">
                                    <img src="/images/logo/blushley-png-without-shade.png" alt="">
                                </a>
                            </div>
                            <p>Premium beauty products and professional beautician services. Shop skincare,
                                makeup, and hair care essentials, or book appointments with our network of
                                experienced beauticians.</p>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="footer-menu footer-menu-texts">
                            <div class="footer-col-block">
                                <div class="footer-heading text-button footer-heading-mobile">
                                    Information
                                </div>
                                <div class="tf-collapse-content">
                                    <ul class="footer-menu-list">
                                        <li class="text-caption-1">
                                            <a href="/about" class="footer-menu_item">About Us</a>
                                        </li>
                                        <li class="text-caption-1">
                                            <a href="/contact" class="footer-menu_item">Contact us</a>
                                        </li>
                                        <li class="text-caption-1">
                                            <a href="/user-account" class="footer-menu_item">My Account</a>
                                        </li>
                                        <li class="text-caption-1">
                                            <a href="/terms_and_conditions" class="footer-menu_item">Terms & Conditions</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="footer-col-block">
                                <div class="footer-heading text-button footer-heading-mobile">
                                    Services
                                </div>
                                <div class="tf-collapse-content">
                                    <ul class="footer-menu-list">
                                        <li class="text-caption-1">
                                            <a href="#" class="footer-menu_item">Shipping</a>
                                        </li>
                                        <li class="text-caption-1">
                                            <a href="#" class="footer-menu_item">Return & Refund</a>
                                        </li>
                                        <li class="text-caption-1">
                                            <a href="/wishlist" class="footer-menu_item">My Wishlist</a>
                                        </li>
                                        <li class="text-caption-1">
                                            <a href="/privacy_policy" class="footer-menu_item">Privacy Policy</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="footer-heading text-button footer-heading-mobile">
                            contact us
                        </div>
                        <div class="footer-address">
                            <p>Trivandrum, Kerala</p>
                        </div>
                        <ul class="footer-info">
                            <li>
                                <i class="icon-mail"></i>
                                <p><a  href="mailto:blushleyoffice@gmail.com">blushleyoffice@gmail.com</a></p>
                            </li>
                            <li>
                                <i class="icon-phone"></i>
 <p><a class="ft-number" href="tel:+917994145723">+91 7994 145 723</a></p>
                            </li>
                        </ul>
                          <div class="tf-cur mt-3">
                                    <ul class="tf-social-icon">
                                        <li><a href="#" class="social-facebook"><i class="icon icon-fb"></i></a></li>
                                        <li><a href="#" class="social-twiter"><i class="icon icon-x"></i></a></li>
                                        <li><a href="#" class="social-instagram"><i class="icon icon-instagram"></i></a></li>
                                    </ul>
                                </div>
                    </div>
                 
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="footer-bottom-wrap">
                            <div class="left">
                                <p class="text-caption-1">¬©2025 Blushley. All Rights Reserved.| Developed by Trivlogic Private Limited</p>
                              
                            </div>
                            <div class="tf-payment">
                                <p class="text-caption-1">Payment:</p>
                                <ul>
                                    <li><img src="/images/payment/img-1.png" alt=""></li>
                                    <li><img src="/images/payment/img-2.png" alt=""></li>
                                    <li><img src="/images/payment/img-3.png" alt=""></li>
                                    <li><img src="/images/payment/img-4.png" alt=""></li>
                                    <li><img src="/images/payment/img-5.png" alt=""></li>
                                    <li><img src="/images/payment/img-6.png" alt=""></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>
</div>

<div class="mobile-nav-wrapper" id="mobileNavWrapper">
    <!-- Floating Top Toolbar -->
    <div class="tf-toolbar-top hide" id="mobileTopToolbar">

        <div class="toolbar-item">
          <a href="/saloon-at-home">
            <div class="toolbar-icon">
              <!-- svg -->
            </div>
            <div class="toolbar-label">Salon at Home</div>
          </a>
        </div>

        <div class="toolbar-logo">
          <a href="/" aria-label="Home">
            <img src="/images/logo/Blushley-png-logo.png" alt="Logo" style="width: 30px;">
          </a>
        </div>
      
        <div class="toolbar-item">
          <a href="/book-a-saloon">
            <!-- svg -->
            <div class="toolbar-label">Book a Salon</div>
          </a>
        </div>
      
      </div>
      
    <!-- toolbar-bottom -->
    <div class="tf-toolbar-bottom">
        <div class="toolbar-item">
            <a href="/">
                <div class="toolbar-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                        fill="none" stroke="#4D4E4F" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2v-5H9v5a2 2 0 0 1-2 2H3z"></path>
                    </svg>
                </div>
                <div class="toolbar-label">Home</div>
            </a>
        </div>
        <div class="toolbar-item">
            <a href="/shop">
                <div class="toolbar-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                        fill="none" stroke="#4D4E4F" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M6 2l1 7h10l1-7H6zM5 9h14l-1 11H6L5 9z"></path>
                    </svg>
                </div>
                <div class="toolbar-label">Store</div>
            </a>
        </div>
        <div class="toolbar-item">
            <% if (!user || user.role !== "user") { %>
                <!-- NOT LOGGED IN or NOT a normal user -->
                <a href="/userLogin">
                  <div class="toolbar-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                        fill="none" stroke="#4D4E4F" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                      <path d="M20 21v-2a4 4 0 0 0-3-3.87"></path>
                      <path d="M4 21v-2a4 4 0 0 1 3-3.87"></path>
                      <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                  </div>
                  <div class="toolbar-label">Login</div>
                </a>
            <% } else { %>
                <!-- NORMAL USER -->
                <a href="/user-account">
                  <div class="toolbar-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                        fill="none" stroke="#4D4E4F" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                      <path d="M20 21v-2a4 4 0 0 0-3-3.87"></path>
                      <path d="M4 21v-2a4 4 0 0 1 3-3.87"></path>
                      <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                  </div>
                  <div class="toolbar-label">Account</div>
                </a>
            <% } %>
        </div>
          
        <div class="toolbar-item">
            <a href="/user-orders">
                <div class="toolbar-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                        xmlns="http://www.w3.org/2000/svg">
                        <rect x="3" y="3" width="18" height="18" rx="2" stroke="#4D4E4F" stroke-width="2" />
                        <path d="M9 3V6M15 3V6M3 9H21" stroke="#4D4E4F" stroke-width="2"
                            stroke-linecap="round" />
                    </svg>
                </div>
                <div class="toolbar-label">Orders</div>
            </a>
        </div>
        <div class="toolbar-item">
            <a href="/wishlist">
                <div class="toolbar-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                        xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M20.84 4.61C20.33 4.1 19.72 3.69 19.05 3.42C18.39 3.14 17.67 3 16.95 3C16.23 3 15.51 3.14 14.84 3.42C14.18 3.69 13.57 4.1 13.06 4.61L12 5.67L10.94 4.61C9.91 3.58 8.51 3 7.05 3C5.59 3 4.19 3.58 3.16 4.61C2.13 5.64 1.55 7.04 1.55 8.5C1.55 9.96 2.13 11.36 3.16 12.39L4.22 13.45L12 21.23L19.78 13.45L20.84 12.39C21.35 11.88 21.76 11.27 22.03 10.61C22.31 9.94 22.45 9.22 22.45 8.5C22.45 7.78 22.31 7.06 22.03 6.39C21.76 5.73 21.35 5.12 20.84 4.61Z"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                </div>
                <div class="toolbar-label">Wishlist</div>
            </a>
        </div>

    </div>
    <!-- /toolbar-bottom -->
</div>
<script>
    document.addEventListener("DOMContentLoaded", () => {
      const topToolbar = document.getElementById("mobileTopToolbar");
      if (!topToolbar) return;
    
      const isMobile = () => window.innerWidth <= 768;
    
      let lastScrollTop = window.pageYOffset || document.documentElement.scrollTop;
      const scrollThreshold = 5;
    
      // start hidden
      topToolbar.classList.add("hide");
      topToolbar.classList.remove("show");
    
      window.addEventListener("scroll", () => {
        if (!isMobile()) return;
    
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
    
        // ‚úÖ show only after small scroll (so not in top)
        if (scrollTop < 150) {
          topToolbar.classList.add("hide");
          topToolbar.classList.remove("show");
          lastScrollTop = scrollTop;
          return;
        }
    
        if (Math.abs(scrollTop - lastScrollTop) < scrollThreshold) return;
    
        // ‚úÖ scroll down => show
        if (scrollTop > lastScrollTop) {
          topToolbar.classList.remove("hide");
          topToolbar.classList.add("show");
        }
        // ‚úÖ scroll up => hide
        else {
          topToolbar.classList.add("hide");
          topToolbar.classList.remove("show");
        }
    
        lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;
      }, { passive: true });
    });
    </script>

<!-- Filter Sidebar -->
<div class="offcanvas offcanvas-start canvas-filter" id="filterShop">
    <div class="canvas-wrapper">
        <div class="canvas-header">
            <h5>Filters</h5>
            <span class="icon-close icon-close-popup" data-bs-dismiss="offcanvas" aria-label="Close"></span>
        </div>

        <div class="canvas-body">
            <!-- Service Categories -->
            <div class="widget-facet facet-categories">
                <h6 class="facet-title">Services</h6>
                <ul class="facet-content">
                    <% filterOptions.services.forEach(service => { %>
                        <li>
                            <label class="categories-item">
                                <input type="checkbox" 
                                       name="service" 
                                       value="<%= service.name %>"
                                       <%= filters.service === service.name ? 'checked' : '' %>
                                       class="filter-checkbox">
                                <%= service.name %>
                                <span class="count-cate">(<%= service.count %>)</span>
                            </label>
                        </li>
                    <% }) %>
                </ul>
            </div>

            <!-- Price Range -->
            <div class="widget-facet facet-price">
                <h6 class="facet-title">Price Range</h6>
                <div class="price-val-range" 
                     id="price-value-range" 
                     data-min="100" 
                     data-max="5000"
                     data-current-min="<%= filters.price_min || 100 %>"
                     data-current-max="<%= filters.price_max || 5000 %>">
                </div>
                <div class="box-price-product">
                    <div class="box-price-item">
                        <span class="title-price">Min price</span>
                        <div class="price-val" id="price-min-value">‚Çπ<%= filters.price_min || 100 %></div>
                    </div>
                    <div class="box-price-item">
                        <span class="title-price">Max price</span>
                        <div class="price-val" id="price-max-value">‚Çπ<%= filters.price_max || 5000 %></div>
                    </div>
                </div>
                <input type="hidden" id="price_min" name="price_min" value="<%= filters.price_min || '' %>">
                <input type="hidden" id="price_max" name="price_max" value="<%= filters.price_max || '' %>">
            </div>

            <!-- Availability -->
            <div class="widget-facet facet-fieldset">
                <h6 class="facet-title">Availability</h6>
                <div class="box-fieldset-item">
                    <% filterOptions.availabilities.forEach(availability => { %>
                        <fieldset class="fieldset-item">
                            <input type="radio" 
                                   name="availability" 
                                   value="<%= availability.value %>"
                                   <%= filters.availability === availability.value ? 'checked' : '' %>
                                   class="tf-check filter-radio" 
                                   id="<%= availability.value %>">
                            <label for="<%= availability.value %>"><%= availability.label %></label>
                        </fieldset>
                    <% }) %>
                </div>
            </div>

            <!-- Service Mode -->
            <div class="widget-facet facet-fieldset">
                <h6 class="facet-title">Service Type</h6>
                <div class="box-fieldset-item">
                    <% filterOptions.serviceModes.forEach(mode => { %>
                        <fieldset class="fieldset-item">
                            <input type="radio" 
                                   name="service_mode" 
                                   value="<%= mode.value %>"
                                   <%= filters.service_mode === mode.value ? 'checked' : '' %>
                                   class="tf-check filter-radio" 
                                   id="mode-<%= mode.value %>">
                            <label for="mode-<%= mode.value %>"><%= mode.label %></label>
                        </fieldset>
                    <% }) %>
                </div>
            </div>

            <!-- Location -->
            <div class="widget-facet facet-location">
                <h6 class="facet-title">Location</h6>
                <div class="box-fieldset-item">
                    <% filterOptions.locations.forEach(location => { %>
                        <fieldset class="fieldset-item">
                            <input type="checkbox" 
                                   name="location" 
                                   value="<%= location.name %>"
                                   <%= filters.location === location.name ? 'checked' : '' %>
                                   class="tf-check filter-checkbox" 
                                   id="loc-<%= location.name.replace(/\s+/g, '-') %>">
                            <label for="loc-<%= location.name.replace(/\s+/g, '-') %>">
                                <%= location.name %>
                                <span class="count-cate">(<%= location.count %>)</span>
                            </label>
                        </fieldset>
                    <% }) %>
                </div>
            </div>

            <!-- Ratings -->
            <div class="widget-facet facet-rating">
                <h6 class="facet-title">Ratings</h6>
                <div class="box-fieldset-item">
                    <% filterOptions.ratings.forEach(rating => { %>
                        <fieldset class="fieldset-item">
                            <input type="radio" 
                                   name="rating" 
                                   value="<%= rating.value %>"
                                   <%= filters.rating == rating.value ? 'checked' : '' %>
                                   class="tf-check filter-radio" 
                                   id="rating<%= rating.value %>">
                            <label for="rating<%= rating.value %>"><%= rating.label %></label>
                        </fieldset>
                    <% }) %>
                </div>
            </div>
        </div>

        <div class="canvas-bottom">
            <button type="button" class="tf-btn btn-reset" id="reset-filter">Reset Filters</button>
            <button type="button" class="tf-btn btn-apply" id="apply-filters">Apply Filters</button>
        </div>
    </div>
</div>

<!-- Add this script section -->
<script>
    // Helper function to build page URL with filters
    function buildPageUrl(page) {
        const params = new URLSearchParams(window.location.search);
        params.set('page', page);
        return '/book-a-saloon?' + params.toString();
    }

    // Initialize when DOM is loaded
    document.addEventListener('DOMContentLoaded', function() {
        // Price range slider
        const priceSlider = document.getElementById('price-value-range');
        if (priceSlider) {
            const minPrice = parseInt(priceSlider.dataset.min);
            const maxPrice = parseInt(priceSlider.dataset.max);
            const currentMin = parseInt(priceSlider.dataset.currentMin) || minPrice;
            const currentMax = parseInt(priceSlider.dataset.currentMax) || maxPrice;
            
            // Initialize slider (you'll need a slider library like noUiSlider)
            // This is a placeholder - implement with your preferred slider
            initPriceSlider(minPrice, maxPrice, currentMin, currentMax);
        }

        // Filter checkbox/radio handlers
        document.querySelectorAll('.filter-checkbox, .filter-radio').forEach(input => {
            input.addEventListener('change', function() {
                updateActiveFilters();
            });
        });

        // Apply filters button
        document.getElementById('apply-filters').addEventListener('click', function() {
            applyFilters();
        });

        // Reset filters button
        document.getElementById('reset-filter').addEventListener('click', function() {
            resetFilters();
        });

        // Remove individual filters
        document.querySelectorAll('.remove-filter').forEach(button => {
            button.addEventListener('click', function() {
                const filterName = this.dataset.filter;
                removeFilter(filterName);
            });
        });

        // Remove all filters
        document.getElementById('remove-all')?.addEventListener('click', function() {
            resetFilters();
        });

        // Sort dropdown
        document.querySelectorAll('.select-item').forEach(item => {
            item.addEventListener('click', function() {
                const sortValue = this.dataset.sortValue;
                updateSort(sortValue);
            });
        });
    });

    function initPriceSlider(min, max, currentMin, currentMax) {
        // Implement your price slider here
        // Example with noUiSlider:
        /*
        noUiSlider.create(priceSlider, {
            start: [currentMin, currentMax],
            connect: true,
            range: {
                'min': min,
                'max': max
            },
            step: 100
        });

        priceSlider.noUiSlider.on('update', function(values) {
            document.getElementById('price-min-value').textContent = '‚Çπ' + Math.round(values[0]);
            document.getElementById('price-max-value').textContent = '‚Çπ' + Math.round(values[1]);
            document.getElementById('price_min').value = Math.round(values[0]);
            document.getElementById('price_max').value = Math.round(values[1]);
        });
        */
    }

    function updateActiveFilters() {
        const activeFilters = [];
        
        // Check checkboxes
        document.querySelectorAll('.filter-checkbox:checked').forEach(cb => {
            activeFilters.push({
                name: cb.name,
                value: cb.value
            });
        });
        
        // Check radios
        document.querySelectorAll('.filter-radio:checked').forEach(radio => {
            activeFilters.push({
                name: radio.name,
                value: radio.value
            });
        });

        // Update UI
        updateFilterDisplay(activeFilters);
    }

    function updateFilterDisplay(filters) {
        // Update the applied filters display
        const container = document.getElementById('applied-filters');
        if (!container) return;
        
        container.innerHTML = filters.map(filter => `
            <span class="applied-filter">
                ${filter.name}: ${filter.value}
                <button class="remove-filter" data-filter="${filter.name}">√ó</button>
            </span>
        `).join('');
    }

    function applyFilters() {
        const formData = new FormData();
        
        // Collect filter values
        document.querySelectorAll('.filter-checkbox:checked').forEach(cb => {
            formData.append(cb.name, cb.value);
        });
        
        document.querySelectorAll('.filter-radio:checked').forEach(radio => {
            formData.append(radio.name, radio.value);
        });
        
        // Add price range
        const priceMin = document.getElementById('price_min')?.value;
        const priceMax = document.getElementById('price_max')?.value;
        if (priceMin) formData.append('price_min', priceMin);
        if (priceMax) formData.append('price_max', priceMax);
        
        // Add sort value
        const sortValue = document.querySelector('.text-sort-value').dataset.sortValue;
        if (sortValue) formData.append('sort', sortValue);
        
        // Build query string
        const params = new URLSearchParams();
        for (let [key, value] of formData.entries()) {
            params.append(key, value);
        }
        
        // Redirect with filters
        window.location.href = '/book-a-saloon?' + params.toString();
    }

    function resetFilters() {
        window.location.href = '/book-a-saloon';
    }

    function removeFilter(filterName) {
        const params = new URLSearchParams(window.location.search);
        params.delete(filterName);
        window.location.href = '/book-a-saloon?' + params.toString();
    }

    function updateSort(sortValue) {
        const params = new URLSearchParams(window.location.search);
        params.set('sort', sortValue);
        window.location.href = '/book-a-saloon?' + params.toString();
    }

    // AJAX filtering (optional)
    function loadSalons(page = 1) {
        const params = new URLSearchParams(window.location.search);
        params.set('page', page);
        
        fetch('/api/salons?' + params.toString())
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    updateSalonList(data.salons);
                    updatePagination(data.pagination);
                }
            })
            .catch(error => console.error('Error:', error));
    }

    function updateSalonList(salons) {
        const container = document.getElementById('listLayout');
        if (!container) return;
        
        // Update salon list with new data
        // Implement based on your template structure
    }

    function updatePagination(pagination) {
        // Update pagination controls
        // Implement based on your template structure
    }

    // Update your existing booking modal function
    function openBookingModal(salonId) {
        // Store salon ID for booking
        window.currentSalonId = salonId;
        
        // Show modal (your existing modal code)
        document.getElementById('bookingModal').classList.add('sbm-active');
        document.body.style.overflow = 'hidden';
        
        // Load salon-specific data
        loadSalonServices(salonId);
    }

    async function loadSalonServices(salonId) {
        try {
            const response = await fetch(`/api/salons/${salonId}/services`);
            const data = await response.json();
            
            if (data.success) {
                populateServices(data.services);
            }
        } catch (error) {
            console.error('Error loading services:', error);
        }
    }
</script>

        <!-- search -->
        <div class="modal fade modal-search" id="search" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
              <div class="modal-content p-3">
                <div class="d-flex justify-content-between align-items-center mb-2">
                  <h5 class="m-0">Search</h5>
                  <button type="button" class="btn btn-sm btn-light" data-bs-dismiss="modal" aria-label="Close">&times;</button>
                </div>
          
                <div class="search-bar-wrapper d-flex align-items-center mb-2">
                  <form class="form-search flex-grow-1" onsubmit="return false;" id="searchForm">
                    <fieldset class="text m-0">
                      <input id="searchInput" type="text" placeholder="Start typing (min 3 characters)..." name="text" tabindex="0"
                             aria-required="true" autocomplete="off" class="form-control" />
                    </fieldset>
                  </form>
          
                  <button id="searchFilterToggleBtn" class="btn btn-outline-secondary ms-2" type="button" onclick="Search.toggleFilterSection()">
                      Filters <span id="searchFilterCount" class="badge bg-secondary" style="display:none;">0</span>
                  </button>
                </div>
          
                <!-- Filters (hidden until modal opened and data loaded) -->
                <div id="searchFilterSection" class="card card-body mb-2" style="display:none;">
                  <div class="d-flex justify-content-between mb-2">
                    <strong>Filters</strong>
                    <button class="btn btn-sm btn-link" id="searchClearFiltersBtn" onclick="Search.clearAllFilters()" style="display:none;">Clear All</button>
                  </div>
          
                  <div class="mb-2">
                    <label class="form-label mb-1">Categories</label>
                    <div id="searchCategoryContainer" class="d-flex flex-wrap gap-2"></div>
                  </div>
          
                  <div class="mb-2">
                    <label class="form-label mb-1">Brands</label>
                    <div id="searchBrandContainer" class="d-flex flex-wrap gap-2"></div>
                  </div>
                </div>
          
                <div class="mb-2">
                  <h6 class="mb-1">Suggestions</h6>
                  <div id="searchSuggestions" class="small text-muted">Type 3 characters to see results</div>
                </div>
          
                <div class="mb-2">
                  <h6 class="mb-1">Recently viewed</h6>
                  <div id="searchRecentlyViewed" class="d-flex flex-wrap gap-2"></div>
                </div>
          
                <!-- Results -->
                <div id="searchResultsContainer" class="list-group"></div>
          
                <div class="mt-3 text-end">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
              </div>
            </div>
          </div>
        <!-- /search -->
    <!-- mobile menu -->
    <div class="offcanvas offcanvas-start canvas-mb" id="mobileMenu">
        <span class="icon-close icon-close-popup" data-bs-dismiss="offcanvas" aria-label="Close"></span>
        <div class="mb-canvas-content">
            <div class="mb-body">
                <div class="mb-content-top">
                    <form class="form-search">
                        <fieldset class="text">
                            <input type="text" placeholder="What are you looking for?" class="" name="text" tabindex="0"
                                value="" aria-required="true" required="">
                        </fieldset>
                        <button class="" type="submit">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M11 19C15.4183 19 19 15.4183 19 11C19 6.58172 15.4183 3 11 3C6.58172 3 3 6.58172 3 11C3 15.4183 6.58172 19 11 19Z"
                                    stroke="#181818" stroke-linecap="round" stroke-linejoin="round" />
                                <path d="M20.9984 20.9999L16.6484 16.6499" stroke="#181818" stroke-linecap="round"
                                    stroke-linejoin="round" />
                            </svg>
                        </button>
                    </form>
                    <ul class="nav-ul-mb" id="wrapper-menu-navigation">
                        <li class="nav-mb-item active">
                            <a href="/" class="mb-menu-link">
                                <span>Home</span>

                            </a>

                        </li>

                        <li class="nav-mb-item active">
                            <a href="/about" class="mb-menu-link">
                                <span>About</span>
                            </a>
                        </li>
                        <li class="nav-mb-item active">
                            <a href="/shop" class="mb-menu-link">
                                <span>Shop</span>

                            </a>

                        </li>
                        <li class="nav-mb-item active">
                            <a href="/saloon-at-home" class="mb-menu-link">
                                <span>Salon at Home</span>

                            </a>

                        </li>
                        <li class="nav-mb-item active">
                            <a href="/book-a-saloon" class="mb-menu-link">
                                <span>Book a Salon</span>

                            </a>

                        </li>

                        <li class="nav-mb-item active">
                            <a href="/userblogs" class="mb-menu-link">
                                <span>Blogs</span>

                            </a>

                        </li>
                        <li class="nav-mb-item active">
                            <a href="/contact" class="mb-menu-link">
                                <span>Contact</span>

                            </a>

                        </li>


                    </ul>
                </div>
                <div class="mb-other-content">
                    <div class="group-icon">
                        <a href="/wishlist" class="site-nav-icon">
                            <svg class="icon" width="18" height="18" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M20.8401 4.60987C20.3294 4.09888 19.7229 3.69352 19.0555 3.41696C18.388 3.14039 17.6726 2.99805 16.9501 2.99805C16.2276 2.99805 15.5122 3.14039 14.8448 3.41696C14.1773 3.69352 13.5709 4.09888 13.0601 4.60987L12.0001 5.66987L10.9401 4.60987C9.90843 3.57818 8.50915 2.99858 7.05012 2.99858C5.59109 2.99858 4.19181 3.57818 3.16012 4.60987C2.12843 5.64156 1.54883 7.04084 1.54883 8.49987C1.54883 9.95891 2.12843 11.3582 3.16012 12.3899L4.22012 13.4499L12.0001 21.2299L19.7801 13.4499L20.8401 12.3899C21.3511 11.8791 21.7565 11.2727 22.033 10.6052C22.3096 9.93777 22.4519 9.22236 22.4519 8.49987C22.4519 7.77738 22.3096 7.06198 22.033 6.39452C21.7565 5.72706 21.3511 5.12063 20.8401 4.60987V4.60987Z"
                                    stroke="#181818" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                            Wishlist
                        </a>

                        <a href="/userLogin" class="site-nav-icon">
                            <svg class="icon" width="18" height="18" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21"
                                    stroke="#181818" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                <path
                                    d="M12 11C14.2091 11 16 9.20914 16 7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7C8 9.20914 9.79086 11 12 11Z"
                                    stroke="#181818" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                            Login
                        </a>

                    </div>
                    <div class="mb-notice">
                        <a href="/contact" class="text-need">Need Help?</a>
                    </div>
                    <div class="mb-contact">
                        <p class="text-caption-1">Trivandrum, Kerala</p>
                        <!-- <a href="/contact" class="tf-btn-default text-btn-uppercase">GET DIRECTION<i
                                class="icon-arrowUpRight"></i></a>-->
                    </div>
                    <ul class="mb-info">
                        <li>
                            <i class="icon icon-mail"></i>
                            <p><a  href="mailto:blushleyoffice@gmail.com">blushleyoffice@gmail.com</a></p>
                        </li>
                        <li>
                            <i class="icon icon-phone"></i>
                            <p>+91 7994 145 723</p>
                        </li>
                    </ul>
                </div>
            </div>

        </div>
    </div>
    <!-- /mobile menu -->

    <!-- shoppingCart -->

    <div class="modal fullRight fade modal-shopping-cart" id="shoppingCart">
        <div class="modal-dialog">
            <div class="modal-content">
    
                <div class="d-flex flex-column flex-grow-1 h-100">
                    <div class="header">
                        <h5 class="title">Shopping Cart</h5>
                        <span class="icon-close icon-close-popup" data-bs-dismiss="modal"></span>
                    </div>
    
                    <div class="wrap">
                        <div class="tf-mini-cart-wrap">
    
                            <!-- MAIN CART SCROLL AREA -->
                            <div class="tf-mini-cart-main">
                                <div class="tf-mini-cart-sroll">
    
                                    <!-- *********************************** -->
                                    <!-- THIS IS THE ONLY CHANGE YOU MUST KEEP -->
                                    <!-- *********************************** -->
                                    <div class="tf-mini-cart-items"></div>
                                    <!-- cart.js will dynamically append items here -->
    
                                </div>
                            </div>
    
                            <!-- BOTTOM SECTION -->
                            <div class="tf-mini-cart-bottom">
                                <div class="tf-mini-cart-tool"></div>
    
                                <div class="tf-mini-cart-bottom-wrap">
                                    <div class="tf-cart-totals-discounts">
                                        <h5>Subtotal</h5>
    
                                        <!-- REQUIRED for JS -->
                                        <h5 class="tf-totals-total-value">‚Çπ0</h5>
                                    </div>
    
                                    <div class="tf-cart-checkbox">
                                        <div class="tf-checkbox-wrapp">
                                            <input type="checkbox" id="CartDrawer-Form_agree">
                                            <div><i class="icon-check"></i></div>
                                        </div>
                                        <label for="CartDrawer-Form_agree">
                                            I agree with
                                            <a href="/terms_and_conditions">Terms & Conditions</a>
                                        </label>
                                    </div>
    
                                    <div class="tf-mini-cart-view-checkout">
                                        <a href="/cart" class="tf-btn w-100 btn-white radius-4 has-border">
                                            <span class="text">View cart</span>
                                        </a>
                                        <a href="/cart" class="tf-btn w-100 btn-fill radius-4">
                                            <span class="text">Check Out</span>
                                        </a>
                                    </div>
    
                                    <div class="text-center">
                                        <a class="link text-btn-uppercase" href="/shop">Or continue shopping</a>
                                    </div>
                                </div>
                            </div>
    
                            <!-- EXTRA FEATURES (no change) -->
                            <div class="tf-mini-cart-tool-openable add-note">
                                <div class="tf-mini-cart-tool-content">
                                    <label for="Cart-note" class="tf-mini-cart-tool-text">
                                        <span class="icon">üìù</span>
                                        <span class="text-title">Note</span>
                                    </label>
    
                                    <form class="form-add-note tf-mini-cart-tool-wrap">
                                        <fieldset>
                                            <textarea id="Cart-note"
                                                placeholder="Add special instructions for your order..."></textarea>
                                        </fieldset>
                                        <div class="tf-cart-tool-btns">
                                            <button type="submit" class="btn-style-2 w-100">
                                                <span class="text text-btn-uppercase">Save</span>
                                            </button>
                                            <div class="text-center tf-mini-cart-tool-close">Cancel</div>
                                        </div>
                                    </form>
                                </div>
                            </div>
    
                            <div class="tf-mini-cart-tool-openable estimate-shipping">
                                <div class="tf-mini-cart-tool-content">
                                    <label class="tf-mini-cart-tool-text">
                                        <span class="icon">üöö</span>
                                        <span class="text-title">Estimate shipping rates</span>
                                    </label>
                                    <!-- Shipping form unchanged -->
                                </div>
                            </div>
    
                            <div class="tf-mini-cart-tool-openable add-gift">
                                <form class="tf-product-form-addgift">
                                    <!-- unchanged -->
                                </form>
                            </div>
    
                            <div class="tf-mini-cart-tool-openable add-coupon">
                                <div class="tf-mini-cart-tool-content">
                                    <label class="tf-mini-cart-tool-text">
                                        <span class="icon">üéü</span>
                                        <span class="text-title">Add A Coupon Code</span>
                                    </label>
                                    <form class="form-add-coupon tf-mini-cart-tool-wrap">
                                        <!-- unchanged -->
                                    </form>
                                </div>
                            </div>
    
                        </div>
                    </div>
    
                </div>
    
            </div>
        </div>
    </div>
    <!-- /shoppingCart -->

    <!-- Javascript -->
    <script type="text/javascript" src="/js/cart.js"></script>
    <script type="text/javascript" src="/js/search.js"></script>
    <script type="text/javascript" src="/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/js/jquery.min.js"></script>
    <script type="text/javascript" src="/js/swiper-bundle.min.js"></script>
    <script type="text/javascript" src="/js/carousel.js"></script>
    <script type="text/javascript" src="/js/bootstrap-select.min.js"></script>
    <script type="text/javascript" src="/js/lazysize.min.js"></script>
    <script type="text/javascript" src="/js/count-down.js"></script>
    <script type="text/javascript" src="/js/wow.min.js"></script>
    <script type="text/javascript" src="/js/multiple-modal.js"></script>
    <script type="text/javascript" src="/js/nouislider.min.js"></script>
    <script type="text/javascript" src="/js/shop.js"></script>
    <script type="text/javascript" src="/js/main.js"></script>

  

 
    <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY&libraries=places"></script>



       <script>
    document.addEventListener('DOMContentLoaded', function() {
    const navAccount = document.querySelector('.nav-account');
    const navIconItem = navAccount.querySelector('.nav-icon-item');
    
    // Toggle dropdown on click
    navIconItem.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        navAccount.classList.toggle('show-dropdown');
    });
    
    // Close dropdown when clicking outside
    document.addEventListener('click', function(e) {
        if (!navAccount.contains(e.target)) {
            navAccount.classList.remove('show-dropdown');
        }
    });
    
    // Prevent dropdown from closing when clicking inside it
    const dropdown = navAccount.querySelector('.dropdown-account');
    dropdown.addEventListener('click', function(e) {
        e.stopPropagation();
    });
});

</script>

       <script>  if (document.querySelector("#sib-form")) { const script = document.createElement('script');script.src = 'js/sibforms.js';script.defer = true;document.body.appendChild(script);}</script>
</body>




</html>