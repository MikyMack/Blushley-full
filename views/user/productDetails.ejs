<!DOCTYPE html>
<html lang="en-US">
<head>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-E1XD6E8W6H"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E1XD6E8W6H');
</script>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-W4GZFHCG');</script>
    <!-- End Google Tag Manager -->
    <meta charset="utf-8">
    <title>Blushley</title>

    <meta name="author" content="trivlogic.com">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="Blushley - Beauty Marketplace & Beautician Booking Platform ">

    <!-- font -->
    <link rel="stylesheet" href="/fonts/fonts.css">
    <link rel="stylesheet" href="/fonts/font-icons.css">
    <!-- css -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/swiper-bundle.min.css">
    <link rel="stylesheet" href="/css/animate.css">
    <link rel="stylesheet" href="https://sibforms.com/forms/end-form/build/sib-styles.css">
    <link rel="stylesheet" type="text/css" href="/css/styles.css" />


    <!-- Favicon and Touch Icons  -->


    <link rel="shortcut" type="image/x-icon" href="/images/logo/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/logo/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/logo/favicon-16x16.png">
    <link rel="apple-touch-icon-precomposed" sizes="180x180" href="/images/logo/apple-touch-icon.png">

    <style>
/* Prevent modal backdrop from blocking shopping cart */
body.modal-open {
    overflow: auto !important;
    padding-right: 0 !important;
}

.modal-backdrop {
    display: none !important;
}
/* Wishlist button styles */
.btn-add-to-wishlist {
    position: relative;
    overflow: hidden;
    transition: all 0.3s ease;
}

.btn-add-to-wishlist:hover {
    transform: translateY(-2px);
}

.btn-add-to-wishlist.added {
    background-color: #ff4444;
    color: white;
    border-color: #ff4444;
}

.btn-add-to-wishlist.added:hover {
    background-color: #ff6666;
    border-color: #ff6666;
}

.btn-add-to-wishlist .spinner-border {
    width: 18px;
    height: 18px;
    margin-right: 5px;
}

.btn-add-to-wishlist:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

/* Heart icon animation */
@keyframes heartBeat {
    0% { transform: scale(1); }
    50% { transform: scale(1.3); }
    100% { transform: scale(1); }
}

.btn-add-to-wishlist.added i {
    animation: heartBeat 0.5s ease;
    color: white;
}

/* Toast notification */
.wishlist-toast {
    position: fixed;
    top: 20px;
    right: 20px;
    padding: 12px 20px;
    border-radius: 4px;
    background: #4CAF50;
    color: white;
    z-index: 9999;
    transform: translateX(100%);
    opacity: 0;
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

.wishlist-toast.show {
    transform: translateX(0);
    opacity: 1;
}

.wishlist-toast.error {
    background: #f44336;
}

.wishlist-toast.warning {
    background: #ff9800;
}
</style>

</head>

<body class="preload-wrapper">
    
   <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W4GZFHCG"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <!-- Scroll Top -->
    <button id="scroll-top" class="type-1">
        <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_15741_24194)">
            <path d="M3 11.9175L12 2.91748L21 11.9175H16.5V20.1675C16.5 20.3664 16.421 20.5572 16.2803 20.6978C16.1397 20.8385 15.9489 20.9175 15.75 20.9175H8.25C8.05109 20.9175 7.86032 20.8385 7.71967 20.6978C7.57902 20.5572 7.5 20.3664 7.5 20.1675V11.9175H3Z" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </g>
            <defs>
            <clipPath id="clip0_15741_24194">
            <rect width="24" height="24" fill="white" transform="translate(0 0.66748)"/>
            </clipPath>
            </defs>
        </svg> 
    </button>


   <!-- preload -->
<div class="preload preload-container-img">
    <div class="preload-logo-img">
        <img src="/images/logo/Blushley-png-logo.png" alt="Glow & Glamour Logo" class="logo-img">
        <!--<div class="spinner"></div>-->
    </div>
</div>
<!-- /preload -->

    <!-- #wrapper -->
    <div id="wrapper">

 <!-- Top Bar-->
        <div class="tf-topbar bg-main">
            <div class="container">
                <div class="tf-topbar_wrap d-flex align-items-center justify-content-center justify-content-xl-between">
                    <ul class="topbar-left">
                        <li><a class="text-caption-1 text-white" href="tel:+917994145723">+91 7994 145 723</a></li>
                        <li><a class="text-caption-1 text-white" href="mailto:blushleyoffice@gmail.com">blushleyoffice@gmail.com</a></li>
                       
                    </ul>
                    <div class="topbar-right d-none d-xl-block">
                        <div class="tf-cur justify-content-end">
                           
                          <a class="text-caption-1 text-white text-decoration-none" href="/shop">Our
                                Store</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- /Top Bar -->

 <!-- Header -->
        <header id="header" class="header-default">
            <div class="container">
                <div class="row wrapper-header align-items-center">
                    <div class="col-md-4 col-3 d-xl-none">
                        <a href="#mobileMenu" class="mobile-menu" data-bs-toggle="offcanvas" aria-controls="mobileMenu">
                            <i class="icon icon-categories"></i>
                        </a>
                    </div>
                    <div class="col-xl-3 col-md-4 col-6">
                        <a href="/" class="logo-header">
                    <img src="/images/logo/logoggg.png" alt="logo" class="logo">
                        </a>
                    </div>
                    <div class="col-xl-6 d-none d-xl-block">
                        <nav class="box-navigation text-center">
                            <ul class="box-nav-ul d-flex align-items-center justify-content-center">
                                <li class="menu-item active">
                                    <a href="/" class="item-link">Home</a>
                                    <!--  <div class="sub-menu mega-menu">
                                     <div class="container">
                                            <div class="row-demo">                                              
                                                
                                                <div class="text-center view-all-demo">
                                                    <a href="#modalDemo" data-bs-toggle="modal" class="tf-btn"><span
                                                            class="text">View All Demos</span></a>
                                                </div>
                                            </div>
                                        </div>-->
                                </li>

                                <li class="menu-item"><a href="/about" class="item-link">About</a></li>
                                <li class="menu-item">
                                    <a href="/shop" class="item-link">Shop</a>



                                </li>
                                <li class="menu-item salon-at-home-link"><a href="/saloon-at-home"
                                    class="item-link">Salon at Home</a>
                            </li>

                            </li>
                            <li class="menu-item book-salon-link"><a href="/book-a-saloon"
                                    class="item-link">Book a Salon</a>
                            </li>

                                <li class="menu-item position-relative">
                                    <a href="/userblogs" class="item-link">Blogs</a>

                                </li>

                                <li class="menu-item"><a href="/contact" class="item-link">Contact</a></li>



                            </ul>
                        </nav>
                    </div>
                    <div class="col-xl-3 col-md-4 col-3">
                        <ul class="nav-icon d-flex justify-content-end align-items-center">
                            <li class="nav-search"><a href="#search" data-bs-toggle="modal" class="nav-icon-item">

                                    <img src="/images/icons/search.svg" alt="search icon">
                                </a></li>
                                <li class="nav-account">
                                    <a href="#" class="nav-icon-item">
                                        <img src="/images/icons/user.svg" alt="user">
                                    </a>
                                
                                    <div class="dropdown-account dropdown-login">
                                        <div class="sub-top">
                                
                                            <% if (!user) { %>
                                
                                                <!-- NOT LOGGED IN -->
                                                <a href="/userLogin" class="nav-acc-link">Login</a>
                                
                                            <% } else if (user.role === "user") { %>
                                
                                                <!-- NORMAL USER -->
                                                <a href="/user-account" class="nav-acc-link">My Account</a>
                                                <a href="/user-orders" class="nav-acc-link">Orders</a>
                                                <a href="/user-addresses" class="nav-acc-link">Addresses</a>
                                                <a href="/userBookings" class="nav-acc-link">My Bookings</a>
                                                <a href="/logout" class="nav-acc-link">Logout</a>
                                
                                            <% } else if (user.role === "reseller") { %>
                                
                                                <!-- RESELLER -->
                                                <a href="/reseller/dashboard" class="nav-acc-link">Reseller Dashboard</a>
                                                <a href="/logout" class="nav-acc-link">Logout</a>
                                
                                            <% } else if (user.role === "freelancer") { %>
                                
                                                <!-- FREELANCER -->
                                                <a href="/freelance/beautician_dashboard" class="nav-acc-link">Freelancer Dashboard</a>
                                                <a href="/logout" class="nav-acc-link">Logout</a>
                                
                                            <% } else if (user.role === "salon") { %>
                                
                                                <!-- SALON -->
                                                <a href="/salon/salon_dashboard" class="nav-acc-link">Salon Dashboard</a>
                                                <a href="/logout" class="nav-acc-link">Logout</a>
                                
                                            <% } else if (["admin", "superadmin", "staff"].includes(user.role)) { %>
                                
                                                <!-- ADMIN -->
                                                <a href="/admin/dashboard" class="nav-acc-link">Admin</a>
                                                <a href="/logout" class="nav-acc-link">Logout</a>
                                
                                            <% } %>
                                
                                        </div>
                                    </div>
                                </li>
                            <li class="nav-wishlist"><a href="/wishlist" class="nav-icon-item">
                                    <img src="/images/icons/heart.svg" alt="wish list">


                                </a>
                            </li>
                            <li class="nav-cart"><a href="#shoppingCart" data-bs-toggle="modal" class="nav-icon-item">

                                    <img src="/images/icons/shopping-bag.svg" alt="cart icon">
                                    <span class="count-box">0</span></a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </header>

        <!-- /Header -->

        <!-- breadcrumb -->
        <div class="tf-breadcrumb">
            <div class="container">
                <div class="tf-breadcrumb-wrap">
                    <div class="tf-breadcrumb-list">
                        <a href="/" class="text text-caption-1">Homepage</a>
                        <i class="icon icon-arrRight"></i>
                        <a href="/shop/<%= product.category && product.category.slug %>" class="text text-caption-1"><%= product.category && product.category.name %></a>
                        <i class="icon icon-arrRight"></i>
                        <span class="text text-caption-1"><%= product.title %></span>
                    </div>
                </div>
            </div>
        </div>
        <!-- /breadcrumb -->

        <!-- Product_Main -->
        <section class="flat-spacing" id="product-main-section">
            <div class="tf-main-product section-image-zoom">
                <div class="container">
                    <div class="row">
                        <!-- Product Images -->
                        <div class="col-md-6">
                            <div class="tf-product-media-wrap sticky-top">
                                <div class="thumbs-slider">
                                    <div dir="ltr" class="swiper tf-product-media-thumbs other-image-zoom" data-direction="vertical" id="product-thumbs-swiper">
                                        <div class="swiper-wrapper stagger-wrap">
                                            <% 
                                                let thumbImages = (product.allImages && product.allImages.length) 
                                                    ? product.allImages 
                                                    : (product.images && product.images.length ? product.images.map(function(im) { return {src: im}; }) : []);
                                            %>
                                            <% thumbImages.forEach(function(img, idx) { %>
                                                <div class="swiper-slide stagger-item" data-color="<%= img.color || 'default' %>">
                                                    <div class="item">
                                                        <img 
                                                            class="lazyload product-thumb-img" 
                                                            data-src="<%= img.src %>" 
                                                            src="<%= img.src %>" 
                                                            alt=""
                                                            data-img-index="<%= idx %>"
                                                        >
                                                    </div>
                                                </div>
                                            <% }); %>
                                        </div>
                                    </div>
                                    <div dir="ltr" class="swiper tf-product-media-main" id="product-gallery-swiper">
                                        <div class="swiper-wrapper">
                                            <% thumbImages.forEach(function(img, idx) { %>
                                                <div class="swiper-slide" data-color="<%= img.color || 'default' %>">
                                                    <a href="<%= img.src %>" target="_blank" class="item" data-pswp-width="600px" data-pswp-height="800px">
                                                        <img 
                                                            class="tf-image-zoom lazyload product-main-img" 
                                                            data-zoom="<%= img.src %>" 
                                                            data-src="<%= img.src %>" 
                                                            src="<%= img.src %>" 
                                                            alt=""
                                                            data-img-index="<%= idx %>"
                                                        >
                                                    </a>
                                                </div>
                                            <% }); %>
                                        </div>
                                    </div>
                                </div>  
                            </div>
                        </div>
                        <!-- /Product Images -->

                        <!-- tf-product-info-list -->
                        <div class="col-md-6">
                            <div class="tf-product-info-wrap position-relative">
                                <div class="tf-zoom-main"></div>
                                <div class="tf-product-info-list other-image-zoom">
                                    <div class="tf-product-info-heading">
                                        <div class="tf-product-info-name">
                                            <% if (product.category) { %>
                                                <div class="text text-btn-uppercase"><%= product.category.name %></div>
                                            <% } %>
                                            <h3 class="name"><%= product.title %></h3>
                                            <div class="sub">
                                                <div class="tf-product-info-rate">
                                                    <div class="list-star">
                                                        <% 
                                                            const fullStars = Math.round((product.averageRating || 0) * 2) / 2;
                                                            for (let i = 1; i <= 5; i++) { 
                                                                if (i <= Math.floor(fullStars)) { %>
                                                                    <i class="icon icon-star"></i>
                                                                <% } else if (i - 0.5 === fullStars) { %>
                                                                    <i class="icon icon-star-half"></i>
                                                                <% } else { %>
                                                                    <i class="icon icon-star-outline"></i>
                                                                <% }
                                                            } 
                                                        %>
                                                    </div>
                                                    <div class="text text-caption-1">(<%= product.totalReviews || 0 %> reviews)</div>
                                                </div>
                                                <div class="tf-product-info-sold">
                                                    <i class="icon icon-lightning"></i>
                                                    <div class="text text-caption-1"><%= product.totalSold || 0 %> sold so far</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="tf-product-info-desc">
                                            <% 
                                                var basePrice = typeof product.adminBasePrice === 'number' && !isNaN(product.adminBasePrice) 
                                                    ? product.adminBasePrice 
                                                    : product.basePrice;
                                                var salePrice = typeof product.adminSalePrice === 'number' && !isNaN(product.adminSalePrice) 
                                                    ? product.adminSalePrice 
                                                    : product.salePrice;
                                                if(typeof salePrice !== "number" || isNaN(salePrice)) salePrice = basePrice;
                                                basePrice = Number(basePrice) || 0;
                                                salePrice = Number(salePrice) || 0;
                                                var discountAmount = basePrice > salePrice ? (basePrice - salePrice) : 0;
                                                var discountPercent = basePrice > 0 && basePrice > salePrice 
                                                    ? Math.round(discountAmount / basePrice * 100) 
                                                    : 0;
                                            %>
                                            <div class="tf-product-info-price" id="product-main-price-block">
                                                <h5 class="price-on-sale font-2" id="main-product-sale-price">
                                                    ₹<%= salePrice.toLocaleString("en-IN", { minimumFractionDigits: 2, maximumFractionDigits: 2 }) %>
                                                </h5>
                                                <% if (discountPercent > 0) { %>
                                                    <div class="compare-at-price font-2" id="main-product-base-price">
                                                        ₹<%= basePrice.toLocaleString("en-IN", { minimumFractionDigits: 2, maximumFractionDigits: 2 }) %>
                                                    </div>
                                                    <div class="badges-on-sale text-btn-uppercase" id="main-product-discount">
                                                        -<%= discountPercent %>% (₹<%= discountAmount.toLocaleString("en-IN", { minimumFractionDigits: 2 }) %> OFF)
                                                    </div>
                                                <% } %>
                                            </div>
                                            <p>
                                                <%= product.shortDescription || "" %>
                                            </p>
                                            <div class="tf-product-info-liveview">
                                                <i class="icon icon-eye"></i>
                                                <p class="text-caption-1">
                                                    <span class="liveview-count"><%= Math.floor(Math.random() * 31) + 8 %></span> people are viewing this right now
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                <!-- Product Variants: Checkbox Display -->
<% if (product.variants && Array.isArray(product.variants) && product.variants.length) { %>
    <div class="tf-product-variants mb_24">
        <h5 class="mb_10">Select Product Variants</h5>
        <% 
            // Create a unique combination ID function
            function getVariantCombinationId(selections) {
                return selections.map(s => `${s.variantId}:${s.optionId}`).sort().join('|');
            }
        %>
        
        <!-- Hidden field to store selected combinations -->
        <input type="hidden" id="selected-variant-data" name="variantData" value="[]">
        
        <% product.variants.forEach(function(variant, vIdx) { %>
            <div class="mb_16 variant-group" data-variant-id="<%= variant._id || `variant-${vIdx}` %>">
                <div class="text-title" style="font-weight:500;"><%= variant.name %></div>
                <div class="d-flex flex-wrap gap-2">
                    <% variant.options.forEach(function(opt, optIdx) { 
                        var vBase = typeof opt.adminBasePrice === 'number' && !isNaN(opt.adminBasePrice) 
                            ? opt.adminBasePrice 
                            : (typeof opt.price === 'number' ? opt.price : (typeof opt.basePrice === 'number' ? opt.basePrice : (typeof opt.price === 'string' ? Number(opt.price) : 0)));
                        var vSale = typeof opt.adminSalePrice === 'number' && !isNaN(opt.adminSalePrice)
                            ? opt.adminSalePrice
                            : (typeof opt.price === 'number' ? opt.price : (typeof opt.salePrice === 'number' ? opt.salePrice : (typeof opt.price === 'string' ? Number(opt.price) : vBase)));
                        if(typeof vSale !== 'number' || isNaN(vSale)) vSale = vBase;
                        vBase = Number(vBase) || 0;
                        vSale = Number(vSale) || 0;
                        var vDiscountPercent = vBase > 0 && vBase > vSale ? Math.round((vBase - vSale) / vBase * 100) : 0;
                        var optionId = opt._id || `opt-${vIdx}-${optIdx}`;
                        var variantId = variant._id || `variant-${vIdx}`;
                        var isAvailable = typeof opt.stock === 'number' ? opt.stock > 0 : true;
                        var optImg = opt.image || (opt.images && opt.images[0]) || null;
                    %>
                    <div class="card shadow-none border tf-variant-card variant-option" 
                         data-variant-id="<%= variantId %>" 
                         data-option-id="<%= optionId %>"
                         data-variant-name="<%= variant.name %>"
                         data-option-value="<%= opt.value %>"
                         data-price="<%= vSale %>"
                         data-base-price="<%= vBase %>"
                         data-image="<%= optImg %>"
                         data-stock="<%= opt.stock || 0 %>"
                         style="min-width:170px; max-width:240px; margin-bottom:8px; position:relative; cursor: pointer;"
                         onclick="selectVariantOption(this)">
                        <div class="px-2 py-2 text-center">
                            <input type="checkbox"
                                id="variant-<%= variantId %>-<%= optionId %>"
                                class="variant-select-checkbox"
                                name="variant[<%= variantId %>]"
                                value="<%= optionId %>"
                                data-variant-id="<%= variantId %>"
                                data-option-id="<%= optionId %>"
                                style="position:absolute;top:10px;left:10px;width:18px;height:18px;display:none;"
                                <% if(!isAvailable){ %>disabled<% } %>
                            >
                            <div class="checkmark" style="position:absolute;top:10px;left:10px;width:18px;height:18px;border:2px solid #ddd;border-radius:3px;background:white;">
                                <i class="icon icon-check" style="display:none;color:#007bff;font-size:14px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);"></i>
                            </div>
                            <label style="margin-left:28px;cursor:pointer;display:block;">
                                <span class="fw-6"><%= opt.value %></span>
                                <% if(opt.images && opt.images.length) { %>
                                    <div class="d-flex justify-content-center gap-1 mt-1 mb-1">
                                        <% opt.images.slice(0,2).forEach(function(img) { %>
                                            <img src="<%= img %>" alt="<%= opt.value %>" style="width:28px;height:28px;object-fit:cover;border-radius:3px;border:1px solid #eee;">
                                        <% }); %>
                                    </div>
                                <% } else if (optImg) { %>
                                    <div class="d-flex justify-content-center mt-1 mb-1">
                                        <img src="<%= optImg %>" alt="<%= opt.value %>" style="width:38px;height:38px;object-fit:cover;border-radius:3px;border:1px solid #eee;">
                                    </div>
                                <% } %>
                                <div class="mb_4">
                                    <span class="badge <%= isAvailable ? 'bg-success' : 'bg-secondary' %> text-light" style="font-size:12px;">
                                        <%= isAvailable ? (opt.stock + ' in stock') : 'Out of stock' %>
                                    </span>
                                </div>
                                <div class="fw-5 mb_2 text-dark">
                                    ₹<%= vSale.toLocaleString('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) %>
                                    <% if(vBase > vSale){ %>
                                        <span class="text-decoration-line-through text-secondary small" style="margin-left:4px;">
                                            ₹<%= vBase.toLocaleString('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) %>
                                        </span>
                                    <% } %>
                                </div>
                                <% if(vDiscountPercent > 0) { %>
                                    <div class="badges-on-sale d-inline-block text-btn-uppercase" style="font-size:12px; color:#ff2540; background:#ffe8ed; border-radius:3px; padding:2px 5px; margin-bottom:4px;">-<%= vDiscountPercent %>%</div>
                                <% } %>
                            </label>
                        </div>
                    </div>
                    <% }); %>
                </div>
            </div>
        <% }); %>
        
        <!-- Selected variants display -->
        <div class="selected-variants-container mt-3" id="selected-variants-display" style="display:none;">
            <div class="card border">
                <div class="card-body">
                    <h6 class="mb-3">Selected Variants:</h6>
                    <div id="selected-variants-list"></div>
                    <div class="mt-3">
                        <strong>Total Price: </strong><span id="selected-variant-price">₹0.00</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
<% } %>
<!-- /Product Variants: Checkbox Display -->
                                  

                                    <div class="tf-product-info-choose-option" id="variant-section">
                                        <% if (product.hasVariants && Array.isArray(product.variants)) { %>
                                            <div class="mb_16">
                                                <b>Select your variant below:</b>
                                            </div>
                                            <% product.variants.forEach(function(variant, vIdx) { %>
                                                <div class="variant-picker-item mb_20">
                                                    <div class="variant-picker-label mb_12">
                                                        <%= variant.name %>:
                                                        <span class="text-title variant-picker-label-value value-currentColor"></span>
                                                    </div>
                                                    <div class="variant-picker-values gap12">
                                                        <% variant.options.forEach(function(option, optIdx) { 
                                                            var oBase = typeof option.adminBasePrice === "number" && !isNaN(option.adminBasePrice)
                                                                ? option.adminBasePrice 
                                                                : (typeof option.basePrice === "number" ? option.basePrice : basePrice);
                                                            var oSale = typeof option.adminSalePrice === "number" && !isNaN(option.adminSalePrice)
                                                                ? option.adminSalePrice 
                                                                : (typeof option.salePrice === "number" ? option.salePrice : salePrice);
                                                            if(typeof oSale !== "number" || isNaN(oSale)) oSale = oBase;
                                                            oBase = Number(oBase) || 0;
                                                            oSale = Number(oSale) || 0;
                                                            var oDiscountAmount = oBase > oSale ? oBase - oSale : 0;
                                                            var oDiscountPercent = oBase > 0 && oBase > oSale ? Math.round(oDiscountAmount / oBase * 100) : 0;
                                                            var oImg = option.image || (option.images && option.images[0]) || null;
                                                            var optionId = `opt-radio-${variant.name}-${option.value}`.replace(/\s/g, '-').toLowerCase();
                                                        %>
                                                            <!-- Below radio kept for a11y and default fallback UX -->
                                                            <input 
                                                                id="<%= optionId %>" 
                                                                type="radio" 
                                                                name="variant-radio-<%= vIdx %>" 
                                                                value="<%= option.value %>" 
                                                                data-sale="<%= oSale %>"
                                                                data-base="<%= oBase %>"
                                                                data-discount="<%= oDiscountPercent %>"
                                                                data-discount-amount="<%= oDiscountAmount %>"
                                                                data-img="<%= oImg %>"
                                                                <% if(option.isAvailable) { %> <% } else { %> disabled <% } %> <% if(optIdx === 0) { %>checked<% } %>
                                                                style="display:none;"
                                                            >
                                                            <label 
                                                                class="<% if(variant.name.toLowerCase().includes('color')) { %>hover-tooltip tooltip-bot radius-60 color-btn<% } else { %>style-text size-btn<% } %> <% if(!option.isAvailable){ %> type-disable <% } %>"
                                                                for="<%= optionId %>"
                                                                data-value="<%= option.value %>"
                                                                data-price="<%= oSale %>"
                                                                data-base="<%= oBase %>"
                                                                data-discount="<%= oDiscountPercent %>"
                                                                data-discount-amount="<%= oDiscountAmount %>"
                                                                data-img="<%= oImg %>"
                                                                data-variant-index="<%= vIdx %>"
                                                                data-option-index="<%= optIdx %>"
                                                            >
                                                                <% if(variant.name.toLowerCase().includes('color')){ %>
                                                                    <span class="btn-checkbox" style="background-color: <%= option.value.toLowerCase() %> !important; border:1px solid #cdcdcd"></span>
                                                                    <span class="tooltip"><%= option.value %></span>
                                                                <% } else { %>
                                                                    <span class="text-title"><%= option.value %></span>
                                                                <% } %>
                                                            </label>
                                                        <% }); %>
                                                    </div>
                                                </div>
                                            <% }); %>
                                        <% } %>
                                        <div class="tf-product-info-quantity">
                                            <div class="title mb_12">Quantity:</div>
                                            <div class="wg-quantity">
                                                <span class="btn-quantity btn-decrease">-</span>
                                                <input class="quantity-product" type="text" name="number" value="1">
                                                <span class="btn-quantity btn-increase">+</span>
                                            </div>
                                        </div>
                                        <div>
                                            <div class="tf-product-info-by-btn mb_10">
                                                <a href="#shoppingCart" data-bs-toggle="modal" class="btn-style-2 flex-grow-1 text-btn-uppercase fw-6 btn-add-to-cart">
                                                    <span>Add to cart</span>
                
                                                </a>
                                                <button class="btn-style-3 text-btn-uppercase btn-add-to-wishlist" 
                                                id="add-to-wishlist-btn"
                                                data-product-id="<%= product._id %>"
                                                style="margin-left: 10px; min-width: 120px;">
                                            <span id="wishlist-btn-text">
                                                <i class="icon-heart me-1"></i> Add to Wishlist
                                            </span>
                                        </button>
                                            </div>
                                            <a href="#" class="btn-style-3 text-btn-uppercase">Buy it now</a>
                                        </div>
                                        <div class="tf-product-info-help">
                                            <div class="tf-product-info-extra-link">
                                                <a href="#delivery_return" data-bs-toggle="modal" class="tf-product-extra-icon">
                                                    <div class="icon">
                                                        <i class="icon-shipping"></i>
                                                    </div>
                                                    <p class="text-caption-1">Delivery & Return</p>
                                                </a>
                                                <a href="#ask_question" data-bs-toggle="modal" class="tf-product-extra-icon">
                                                    <div class="icon">
                                                        <i class="icon-question"></i>
                                                    </div>
                                                    <p class="text-caption-1">Ask A Question</p>
                                                </a>
                                                <a href="#share_social" data-bs-toggle="modal" class="tf-product-extra-icon">
                                                    <div class="icon">
                                                        <i class="icon-share"></i>
                                                    </div>
                                                    <p class="text-caption-1">Share</p>
                                                </a>
                                            </div>
                                            <div class="tf-product-info-time">
                                                <div class="icon">
                                                    <i class="icon-timer"></i>
                                                </div>
                                                <p class="text-caption-1">Estimated Delivery:&nbsp;&nbsp;<span>2-5hrs</span> </p>
                                            </div>
                                            <div class="tf-product-info-return">
                                                <div class="icon">
                                                    <i class="icon-arrowClockwise"></i>
                                                </div>
                                                <p class="text-caption-1">Return within <span>1 hr</span> of purchase. Duties & taxes are non-refundable.</p>
                                            </div>
                                            <div class="dropdown dropdown-store-location">
                                                <div class="dropdown-title dropdown-backdrop" data-bs-toggle="dropdown" aria-haspopup="true">
                                                    <div class="tf-product-info-view link">
                                                        <div class="icon">
                                                            <i class="icon-map-pin"></i>
                                                        </div>
                                                        <span>View Store Information</span>
                                                    </div>
                                                </div>
                                                <div class="dropdown-menu dropdown-menu-end">
                                                    <div class="dropdown-content">
                                                        <div class="dropdown-content-heading">
                                                            <h5>
                                                                <% if (product.brand) { %>
                                                                    <%= product.brand %>
                                                                <% } else { %>
                                                                    Store
                                                                <% } %>
                                                            </h5>
                                                            <i class="icon icon-close"></i>
                                                        </div>
                                                        <div class="line-bt"></div>
                                                     
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <ul class="tf-product-info-sku">
                                       
                                            <li>
                                                <p class="text-caption-1">Available:</p>
                                                <p class="text-caption-1 text-1">
                                                    <% 
                                                      
                                                        var displayStock = (Array.isArray(product.variants) && product.variants.length && typeof product.variantTotalStock === 'number')
                                                            ? product.variantTotalStock
                                                            : product.totalStock;
                                                    %>
                                                    <% if (displayStock > 0) { %>Instock<% } else { %>Out of stock<% } %>
                                                </p>
                                            </li>
                                            <li>
                                                <p class="text-caption-1">Categories:</p>
                                                <p class="text-caption-1">
                                                    <% if(product.category){ %>
                                                        <a href="/store/<%= product.category.slug %>" class="text-1 link"><%= product.category.name %></a>
                                                    <% } %>
                                                    <% if(product.subCategory){ %>,
                                                        <a href="/store/<%= product.subCategory.slug %>" class="text-1 link"><%= product.subCategory.name %></a>
                                                    <% } %>
                                                    <% if(product.childCategory){ %>,
                                                        <a href="/store/<%= product.childCategory.slug %>" class="text-1 link"><%= product.childCategory.name %></a>
                                                    <% } %>
                                                </p>
                                            </li>
                                        </ul>
                                        <form class="form-bundle-product">
                                            <h5 class="mb_16">Frequently bought together</h5>
                                            <% frequentlyBoughtTogether && frequentlyBoughtTogether.forEach(function(fbt, idx) { 
                                                var fbtBase = typeof fbt.adminBasePrice === "number" && !isNaN(fbt.adminBasePrice) 
                                                    ? fbt.adminBasePrice 
                                                    : (typeof fbt.basePrice === "number" && !isNaN(fbt.basePrice) ? fbt.basePrice : 0);
                                                var fbtSale = typeof fbt.adminSalePrice === "number" && !isNaN(fbt.adminSalePrice) 
                                                    ? fbt.adminSalePrice 
                                                    : (typeof fbt.salePrice === "number" && !isNaN(fbt.salePrice) ? fbt.salePrice : fbtBase);
                                                if(typeof fbtSale !== "number" || isNaN(fbtSale)) fbtSale = fbtBase;
                                                fbtBase = Number(fbtBase) || 0;
                                                fbtSale = Number(fbtSale) || 0;
                                                var fbtDiscountAmount = fbtBase > fbtSale ? (fbtBase - fbtSale) : 0;
                                                var fbtDiscountPercent = fbtBase > 0 && fbtBase > fbtSale 
                                                    ? Math.round(fbtDiscountAmount / fbtBase * 100) : 0;
                                            %>
                                                <div class="tf-bundle-product-item">
                                                    <input class="tf-check" type="checkbox" name="fbt" value="<%= fbt.slug %>" checked="checked">
                                                    <div class="tf-product-bundle-image">
                                                        <a href="/productDetails/<%= fbt.slug %>">
                                                            <img src="<%= (fbt.images && fbt.images[0]) ? fbt.images[0] : '/images/products/beauty-cosmetic/beauty8.jpg' %>" alt="">
                                                        </a>
                                                    </div>
                                                    <div class="tf-product-bundle-infos">
                                                        <div class="text-title"><%= fbt.title %></div>
                                                        <div class="tf-product-bundle-variant tf-select">
                                                            <% if (fbt.hasVariants && Array.isArray(fbt.variants) && fbt.variants.length) { %>
                                                                <select>
                                                                    <% fbt.variants[0].options.forEach(function(opt) { %>
                                                                        <option><%= opt.value %></option>
                                                                    <% }) %>
                                                                </select>
                                                            <% } %>
                                                        </div>
                                                        <div class="tf-product-info-price type-small">
                                                            <h5 class="price-on-sale">
                                                                ₹<%= Number(fbtSale).toLocaleString("en-IN", { minimumFractionDigits: 2, maximumFractionDigits: 2 }) %>
                                                            </h5>
                                                            <% if (fbtDiscountPercent > 0) { %>
                                                                <div class="compare-at-price">
                                                                    ₹<%= Number(fbtBase).toLocaleString("en-IN", { minimumFractionDigits: 2, maximumFractionDigits: 2 }) %>
                                                                </div>
                                                                <div class="badges-on-sale">-<%= fbtDiscountPercent %>% (₹<%= fbtDiscountAmount.toLocaleString("en-IN", { minimumFractionDigits: 2 }) %> OFF)</div>
                                                            <% } %>
                                                        </div>
                                                    </div>
                                                </div>
                                            <% }); %>
                                            <div class="tf-bundle-product-total-submit">
                                                <h6>Total price:</h6>
                                                <% 
                                                    let totalBundlePrice = salePrice;
                                                    if(Array.isArray(frequentlyBoughtTogether)){
                                                        frequentlyBoughtTogether.forEach(function(fbt){
                                                            var fbtBundleSale = typeof fbt.adminSalePrice === "number" && !isNaN(fbt.adminSalePrice) 
                                                                ? fbt.adminSalePrice 
                                                                : (typeof fbt.salePrice === "number" && !isNaN(fbt.salePrice) ? fbt.salePrice : fbt.basePrice);
                                                            if(typeof fbtBundleSale !== "number" || isNaN(fbtBundleSale)) fbtBundleSale = Number(fbt.basePrice) || 0;
                                                            totalBundlePrice += Number(fbtBundleSale) || 0;
                                                        });
                                                    }
                                                %>
                                                <div class="tf-product-info-price type-1">
                                                    <h4 class="price-on-sale">₹<%= Number(totalBundlePrice).toLocaleString("en-IN", { minimumFractionDigits: 2, maximumFractionDigits: 2 }) %></h4>
                                                </div>
                                            </div>
                                            <a href="#shoppingCart" data-bs-toggle="modal" class="tf-bundle-product-btn btn-style-2 text-btn-uppercase">Add selected to cart</a>
                                        </form>
                                        <div class="tf-product-info-guranteed">
                                            <div class="text-title">
                                                Guranteed safe checkout:
                                            </div>
                                            <div class="tf-payment">
                                                <a href="#">
                                                    <img src="/images/payment/img-1.png" alt="">
                                                </a>
                                                <a href="#">
                                                    <img src="/images/payment/img-2.png" alt="">
                                                </a>
                                                <a href="#">
                                                    <img src="/images/payment/img-3.png" alt="">
                                                </a>
                                                <a href="#">
                                                    <img src="/images/payment/img-4.png" alt="">
                                                </a>
                                                <a href="#">
                                                    <img src="/images/payment/img-5.png" alt="">
                                                </a>
                                                <a href="#">
                                                    <img src="/images/payment/img-6.png" alt="">
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- /tf-product-info-list -->
                    </div>
                </div>
            </div>
            <div class="tf-sticky-btn-atc">
                <div class="container">
                    <div class="row">
                        <div class="col-12">
                            <form class="form-sticky-atc">
                                <div class="tf-sticky-atc-product">
                                    <div class="image">
                                        <img class="lazyload" id="sticky-product-img" data-src="<%= product.images && product.images.length ? product.images[0] : '/images/products/beauty-cosmetic/beauty8.jpg' %>" alt="" src="<%= product.images && product.images.length ? product.images[0] : '/images/products/beauty-cosmetic/beauty8.jpg' %>">
                                    </div>
                                    <div class="content">
                                        <div class="text-title" id="sticky-product-title">
                                            <%= product.title %>
                                        </div>
                                        <div class="text-caption-1 text-secondary-2" id="sticky-product-variants">
                                            <% 
                                                if (product.hasVariants && Array.isArray(product.variants)) {
                                                    let selectStr = [];
                                                    product.variants.forEach(function(variant) {
                                                        selectStr.push(variant.options[0] && variant.options[0].value);
                                                    });
                                                    %><%= selectStr.filter(Boolean).join(', ') %><%
                                                } else if (product.attributes) {
                                                    %><%= product.attributes.join(', ') %><%
                                                }
                                            %>
                                        </div>
                                        <div class="text-title" id="sticky-product-price">
                                            ₹<%= salePrice.toLocaleString("en-IN", { minimumFractionDigits: 2, maximumFractionDigits: 2 }) %>
                                        </div>
                                    </div>
                                </div>
                                <div class="tf-sticky-atc-infos">
                                    <% if (product.hasVariants && Array.isArray(product.variants)) { %>
                                        <% product.variants.forEach(function(variant) { %>
                                            <div class="tf-sticky-atc-size d-flex gap-12 align-items-center">
                                                <div class="tf-sticky-atc-infos-title text-title"><%= variant.name %>:</div>
                                                <div>
                                                    <% variant.options.forEach(function(opt) { %>
                                                        <span class="badge bg-light text-dark mx-1"><%= opt.value %> <small>(Stock: <%= (typeof opt.stock === 'number') ? opt.stock : '-' %>)</small></span>
                                                    <% }); %>
                                                </div>
                                            </div>
                                        <% }); %>
                                    <% } %>
                                    <div class="tf-sticky-atc-quantity d-flex gap-12 align-items-center">
                                        <div class="tf-sticky-atc-infos-title text-title">Quantity:</div>
                                        <div class="wg-quantity style-1">
                                            <span class="btn-quantity minus-btn">-</span>
                                            <input type="text" name="number" value="1">
                                            <span class="btn-quantity plus-btn">+</span>
                                        </div>
                                    </div>
                                    <div class="tf-sticky-atc-btns">
                                        <a href="#shoppingCart" data-bs-toggle="modal" class="tf-btn w-100 btn-reset radius-4 btn-add-to-cart"><span class="text text-btn-uppercase">Add To Cart</span></a>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- /Product_Main -->
        <script>
            // Global variables
            let selectedVariants = [];
            let selectedVariantImages = [];
            let baseProductPrice = <%= salePrice %>;
            let baseProductImages = [
                <% if (product.images && product.images.length) { %>
                    <% product.images.forEach(function(img, idx) { %>
                        '<%= img %>'<% if (idx < product.images.length - 1) { %>,<% } %>
                    <% }); %>
                <% } %>
            ];
            
            // Current active images array (combination of base + variant images)
            let activeProductImages = [...baseProductImages];
            
            // Wishlist variables
            let isInWishlist = false;
            let wishlistItemId = null;
        
            // Helper function for .toLocaleString fallback
            function toINR(val) {
                try {
                    return Number(val).toLocaleString("en-IN", {minimumFractionDigits:2, maximumFractionDigits:2});
                } catch(e) { return val; }
            }
        
            // Use SweetAlert for notifications
            function swalNotify(options) {
                if (window.Swal) {
                    if (typeof options === "string") {
                        Swal.fire({text: options, icon: "info"});
                    } else {
                        Swal.fire(options);
                    }
                } else {
                    // fallback
                    if (typeof options === "string") alert(options);
                    else alert(options.text || "Notification");
                }
            }
        
            // Select variant option
            function selectVariantOption(element) {
                const variantId = element.dataset.variantId;
                const optionId = element.dataset.optionId;
                const variantName = element.dataset.variantName;
                const optionValue = element.dataset.optionValue;
                const price = parseFloat(element.dataset.price) || baseProductPrice;
                const image = element.dataset.image;
                const stock = parseInt(element.dataset.stock) || 0;
        
                // Check if option is available
                if (stock <= 0) {
                    swalNotify({
                        icon: 'warning',
                        title: 'Out of Stock',
                        text: 'This variant is out of stock!',
                        timer: 1800,
                        showConfirmButton: false
                    });
                    return;
                }
        
                const checkbox = element.querySelector('.variant-select-checkbox');
                const checkmark = element.querySelector('.checkmark i');
        
                // Find existing selection for this variant
                const existingIndex = selectedVariants.findIndex(function(v) { return v.variantId === variantId; });
        
                if (existingIndex !== -1) {
                    // Deselect if clicking the same option
                    if (selectedVariants[existingIndex].optionId === optionId) {
                        selectedVariants.splice(existingIndex, 1);
                        if (checkbox) checkbox.checked = false;
                        if (checkmark) checkmark.style.display = 'none';
                        element.style.borderColor = '#ddd';
                        element.style.backgroundColor = 'white';
        
                        // Remove image from selected images
                        const imageIndex = selectedVariantImages.indexOf(image);
                        if (imageIndex !== -1) {
                            selectedVariantImages.splice(imageIndex, 1);
                        }
                    } else {
                        // Replace with new option
                        const oldOptionElement = document.querySelector('[data-option-id="' + selectedVariants[existingIndex].optionId + '"]');
                        if (oldOptionElement) {
                            const oldCheckbox = oldOptionElement.querySelector('.variant-select-checkbox');
                            const oldCheckmark = oldOptionElement.querySelector('.checkmark i');
                            if (oldCheckbox) oldCheckbox.checked = false;
                            if (oldCheckmark) oldCheckmark.style.display = 'none';
                            oldOptionElement.style.borderColor = '#ddd';
                            oldOptionElement.style.backgroundColor = 'white';
                            
                            // Remove old variant image
                            const oldImageIndex = selectedVariantImages.indexOf(selectedVariants[existingIndex].image);
                            if (oldImageIndex !== -1) {
                                selectedVariantImages.splice(oldImageIndex, 1);
                            }
                        }
        
                        selectedVariants[existingIndex] = {
                            variantId: variantId,
                            optionId: optionId,
                            variantName: variantName,
                            optionValue: optionValue,
                            price: price,
                            image: image,
                            stock: stock
                        };
        
                        if (checkbox) checkbox.checked = true;
                        if (checkmark) checkmark.style.display = 'block';
                        element.style.borderColor = '#007bff';
                        element.style.backgroundColor = '#f0f8ff';
        
                        // Add new variant image
                        if (image) {
                            selectedVariantImages.push(image);
                        }
                    }
                } else {
                    // Add new selection
                    selectedVariants.push({
                        variantId: variantId,
                        optionId: optionId,
                        variantName: variantName,
                        optionValue: optionValue,
                        price: price,
                        image: image,
                        stock: stock
                    });
        
                    if (checkbox) checkbox.checked = true;
                    if (checkmark) checkmark.style.display = 'block';
                    element.style.borderColor = '#007bff';
                    element.style.backgroundColor = '#f0f8ff';
        
                    // Add image if available
                    if (image) {
                        selectedVariantImages.push(image);
                    }
                }
        
                updateVariantDisplay();
                updatePrice();
                updateImages();
                updateAddToCartButton();
            }
        
            // Update variant display
            function updateVariantDisplay() {
                const displayContainer = document.getElementById('selected-variants-display');
                const listContainer = document.getElementById('selected-variants-list');
                const priceDisplay = document.getElementById('selected-variant-price');
        
                if (selectedVariants.length > 0) {
                    if (displayContainer) displayContainer.style.display = 'block';
        
                    let html = '<div class="d-flex flex-wrap gap-2">';
                    selectedVariants.forEach(function(variant) {
                        html += (
                            '<span class="badge bg-primary d-flex align-items-center gap-1 p-2">' +
                                '<span class="fw-bold">' + variant.variantName + ':</span> ' + variant.optionValue +
                                '<button type="button" class="btn-close btn-close-white ms-2" style="font-size:8px;" onclick="removeVariant(\'' +
                                variant.variantId + '\')"></button>' +
                            '</span>'
                        );
                    });
                    html += '</div>';
        
                    if (listContainer) listContainer.innerHTML = html;
                    
                    // Update price in the selected variants container
                    if (priceDisplay) {
                        let finalPrice = baseProductPrice;
                        selectedVariants.forEach(function(variant) {
                            if (variant.price > finalPrice) {
                                finalPrice = variant.price;
                            }
                        });
                        const quantityInput = document.querySelector('.quantity-product');
                        const quantity = quantityInput ? parseInt(quantityInput.value) || 1 : 1;
                        const totalPrice = finalPrice * quantity;
                        priceDisplay.textContent = '₹' + toINR(totalPrice);
                    }
                } else {
                    if (displayContainer) displayContainer.style.display = 'none';
                    if (priceDisplay) priceDisplay.textContent = '₹' + toINR(baseProductPrice);
                }
            }
        
            // Remove variant
            function removeVariant(variantId) {
                const index = selectedVariants.findIndex(function(v) { return v.variantId === variantId; });
                if (index !== -1) {
                    const variant = selectedVariants[index];
        
                    // Reset UI for the removed option
                    const optionElement = document.querySelector('[data-option-id="' + variant.optionId + '"]');
                    if (optionElement) {
                        const checkbox = optionElement.querySelector('.variant-select-checkbox');
                        const checkmark = optionElement.querySelector('.checkmark i');
                        if (checkbox) checkbox.checked = false;
                        if (checkmark) checkmark.style.display = 'none';
                        optionElement.style.borderColor = '#ddd';
                        optionElement.style.backgroundColor = 'white';
                    }
        
                    // Remove from arrays
                    selectedVariants.splice(index, 1);
        
                    const imageIndex = selectedVariantImages.indexOf(variant.image);
                    if (imageIndex !== -1) {
                        selectedVariantImages.splice(imageIndex, 1);
                    }
        
                    updateVariantDisplay();
                    updatePrice();
                    updateImages();
                    updateAddToCartButton();
                }
            }
        
            // Update price display
            function updatePrice() {
                let finalPrice = baseProductPrice;
                let mainPrice = baseProductPrice;
        
                if (selectedVariants.length > 0) {
                    // Use the highest price among selected variants
                    selectedVariants.forEach(function(variant) {
                        if (variant.price > finalPrice) {
                            finalPrice = variant.price;
                        }
                    });
                    mainPrice = finalPrice;
                }
        
                // Get quantity
                const quantityInput = document.querySelector('.quantity-product');
                const quantity = quantityInput ? parseInt(quantityInput.value) || 1 : 1;
                const totalPrice = finalPrice * quantity;
        
                // Update all price displays
                const priceElements = [
                    document.getElementById('main-product-sale-price'),
                    document.getElementById('add-to-cart-total-price'),
                    document.getElementById('sticky-product-price'),
                    document.getElementById('selected-variant-price')
                ];
        
                priceElements.forEach(function(el) {
                    if (el) {
                        if (el.id === 'selected-variant-price' || el.id === 'add-to-cart-total-price') {
                            el.textContent = '₹' + toINR(totalPrice);
                        } else {
                            el.textContent = '₹' + toINR(mainPrice);
                        }
                    }
                });
        
                // Update hidden field if exists
                var hiddenField = document.getElementById('selected-variant-data');
                if (hiddenField) {
                    hiddenField.value = JSON.stringify(selectedVariants);
                }
            }
        
            // Update product images
            function updateImages() {
                // Create combined images array: variant images first, then base images
                const imagesToShow = [...selectedVariantImages];
                
                // Add base images that aren't already in the array
                baseProductImages.forEach(function(img) {
                    if (!imagesToShow.includes(img)) {
                        imagesToShow.push(img);
                    }
                });
                
                // Update activeProductImages
                activeProductImages = imagesToShow.length > 0 ? imagesToShow : baseProductImages;
        
                // Update main gallery images
                const mainGallery = document.querySelector('#product-gallery-swiper .swiper-wrapper');
                const thumbGallery = document.querySelector('#product-thumbs-swiper .swiper-wrapper');
                
                if (mainGallery && thumbGallery) {
                    // Clear existing slides
                    mainGallery.innerHTML = '';
                    thumbGallery.innerHTML = '';
                    
                    // Add new slides
                    activeProductImages.forEach(function(img, index) {
                        // Main gallery slide
                        const mainSlide = document.createElement('div');
                        mainSlide.className = 'swiper-slide';
                        mainSlide.innerHTML = `
                            <a href="${img}" target="_blank" class="item" data-pswp-width="600px" data-pswp-height="800px">
                                <img class="tf-image-zoom lazyload product-main-img" 
                                     data-zoom="${img}" 
                                     data-src="${img}" 
                                     src="${img}" 
                                     alt=""
                                     data-img-index="${index}"
                                     style="width:100%; height:auto;">
                            </a>
                        `;
                        mainGallery.appendChild(mainSlide);
                        
                        // Thumb gallery slide
                        const thumbSlide = document.createElement('div');
                        thumbSlide.className = 'swiper-slide stagger-item';
                        thumbSlide.innerHTML = `
                            <div class="item">
                                <img class="lazyload product-thumb-img" 
                                     data-src="${img}" 
                                     src="${img}" 
                                     alt=""
                                     data-img-index="${index}"
                                     style="width:100%; height:auto; object-fit:cover;">
                            </div>
                        `;
                        thumbGallery.appendChild(thumbSlide);
                    });
                    
                    // Reinitialize swiper if it exists
                    if (typeof Swiper !== 'undefined') {
                        setTimeout(function() {
                            // You might need to reinitialize your swiper instances here
                            // This depends on how your swiper is initialized
                            const gallerySwiper = new Swiper('#product-gallery-swiper', {
                                // Your swiper options
                                spaceBetween: 10,
                                navigation: {
                                    nextEl: '.swiper-button-next',
                                    prevEl: '.swiper-button-prev',
                                },
                                thumbs: {
                                    swiper: {
                                        el: '#product-thumbs-swiper',
                                        direction: 'vertical',
                                        slidesPerView: 4,
                                        spaceBetween: 10,
                                    }
                                }
                            });
                        }, 100);
                    }
                }
        
                // Update sticky image
                const stickyImg = document.getElementById('sticky-product-img');
                if (stickyImg && activeProductImages[0]) {
                    stickyImg.src = activeProductImages[0];
                    stickyImg.dataset.src = activeProductImages[0];
                }
        
                // Update variant display in sticky section
                const variantDisplay = document.getElementById('sticky-product-variants');
                if (variantDisplay) {
                    const variantText = selectedVariants.map(function(v) {
                        return v.variantName + ': ' + v.optionValue;
                    }).join(', ');
                    variantDisplay.textContent = variantText || 'Default';
                    
                    // Also update the main variant display if it exists
                    const mainVariantDisplay = document.querySelector('.variant-picker-label-value');
                    if (mainVariantDisplay) {
                        mainVariantDisplay.textContent = variantText || 'Not selected';
                    }
                }
            }
        
            // Update Add to Cart button state
            function updateAddToCartButton() {
                const addToCartButtons = document.querySelectorAll('.btn-add-to-cart');
                var productHasVariants = <%= (product.variants && product.variants.length > 0) ? 'true' : 'false' %> === 'true';
        
                if (productHasVariants) {
                    const allVariantsSelected = selectedVariants.length === <%= product.variants ? product.variants.length : 0 %>;
        
                    addToCartButtons.forEach(function(button) {
                        if (allVariantsSelected) {
                            button.classList.remove('disabled');
                            button.style.pointerEvents = 'auto';
                            button.style.opacity = '1';
                        } else {
                            button.classList.add('disabled');
                            button.style.pointerEvents = 'none';
                            button.style.opacity = '0.6';
                        }
                    });
                }
            }
        
            // Initialize default variant selections (select first available option for each variant)
            function initializeDefaultVariants() {
                <% if (product.variants && product.variants.length > 0) { %>
                    const variantGroups = document.querySelectorAll('.variant-group');
                    variantGroups.forEach(function(group) {
                        const firstAvailableOption = group.querySelector('.variant-option[data-stock][data-stock!="0"]:not([data-stock=""])');
                        if (firstAvailableOption) {
                            // Simulate click on first available option
                            selectVariantOption(firstAvailableOption);
                        } else {
                            // If no stock available, select first option anyway
                            const firstOption = group.querySelector('.variant-option');
                            if (firstOption) {
                                selectVariantOption(firstOption);
                            }
                        }
                    });
                <% } %>
            }
        
            // ==================== WISHLIST FUNCTIONS ====================
            
            // Check if product is in wishlist on page load
            function checkWishlistStatus() {
                const isLoggedIn = <%= user && user.role === "user" ? 'true' : 'false' %>;
                
                if (!isLoggedIn) {
                    // If not logged in, show default state
                    updateWishlistButton(false);
                    return;
                }
                
                const productId = '<%= product._id %>';
                
                // Check if product is in wishlist
                fetch('/check-wishlist-item/' + productId, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        isInWishlist = data.inWishlist;
                        wishlistItemId = data.wishlistItemId;
                        updateWishlistButton(isInWishlist);
                    }
                })
                .catch(error => {
                    console.error('Error checking wishlist status:', error);
                });
            }
        
            // Update wishlist button appearance
            function updateWishlistButton(isAdded) {
                const wishlistBtn = document.getElementById('add-to-wishlist-btn');
                const wishlistBtnText = document.getElementById('wishlist-btn-text');
                
                if (!wishlistBtn) return;
                
                if (isAdded) {
                    wishlistBtn.classList.add('added');
                    wishlistBtnText.innerHTML = '<i class="icon-heart me-1"></i> In Wishlist';
                    wishlistBtn.title = 'Remove from wishlist';
                } else {
                    wishlistBtn.classList.remove('added');
                    wishlistBtnText.innerHTML = '<i class="icon-heart-outline me-1"></i> Add to Wishlist';
                    wishlistBtn.title = 'Add to wishlist';
                }
            }
        
            // Show toast notification
            function showToast(message, type = 'success') {
                // Remove existing toasts
                const existingToasts = document.querySelectorAll('.wishlist-toast');
                existingToasts.forEach(toast => toast.remove());
                
                // Create new toast
                const toast = document.createElement('div');
                toast.className = `wishlist-toast ${type}`;
                toast.textContent = message;
                
                // Add to body
                document.body.appendChild(toast);
                
                // Show toast
                setTimeout(() => toast.classList.add('show'), 10);
                
                // Remove after 3 seconds
                setTimeout(() => {
                    toast.classList.remove('show');
                    setTimeout(() => toast.remove(), 300);
                }, 3000);
            }
        
            // Show login required modal
            function showLoginRequiredModal() {
                const modalBody = document.getElementById('wishlistModalBody');
                modalBody.innerHTML = `
                    <div class="text-center py-4">
                        <i class="icon-user-x" style="font-size: 48px; color: #ff9800; margin-bottom: 20px;"></i>
                        <h5 class="mb-3">Login Required</h5>
                        <p class="mb-4">You need to login to add items to your wishlist.</p>
                        <div class="d-flex gap-3 justify-content-center">
                            <a href="/userLogin?redirect=${encodeURIComponent(window.location.pathname)}" 
                               class="btn btn-primary">
                                Login Now
                            </a>
                            <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                                Cancel
                            </button>
                        </div>
                    </div>
                `;
                
                // Show modal
                const wishlistModal = new bootstrap.Modal(document.getElementById('wishlistModal'));
                wishlistModal.show();
            }
        
            // Show variant selection modal for wishlist
            function showVariantSelectionModal(productId) {
                const modalBody = document.getElementById('wishlistModalBody');
                
                // Check if all variants are selected
                const productHasVariants = <%= (product.variants && product.variants.length > 0) ? 'true' : 'false' %> === 'true';
                const allVariantsSelected = selectedVariants.length === <%= product.variants ? product.variants.length : 0 %>;
                
                if (!productHasVariants) {
                    // No variants, just add to wishlist
                    addToWishlist(productId);
                    return;
                }
                
                if (!allVariantsSelected) {
                    // Show modal asking to select variants
                    modalBody.innerHTML = `
                        <div class="text-center py-4">
                            <i class="icon-alert-circle" style="font-size: 48px; color: #ff9800; margin-bottom: 20px;"></i>
                            <h5 class="mb-3">Select Variant</h5>
                            <p class="mb-4">Please select all variant options before adding to wishlist.</p>
                            
                            <div class="selected-variants-preview mb-4">
                                <h6 class="mb-2">Currently selected:</h6>
                                <div class="d-flex flex-wrap gap-2 justify-content-center">
                                    ${selectedVariants.length > 0 ? 
                                        selectedVariants.map(v => 
                                            `<span class="badge bg-primary">${v.variantName}: ${v.optionValue}</span>`
                                        ).join('') :
                                        '<span class="text-muted">No variants selected</span>'
                                    }
                                </div>
                            </div>
                            
                            <div class="d-flex gap-3 justify-content-center">
                                <button type="button" class="btn btn-primary" onclick="addToWishlistWithSelectedVariants('${productId}')">
                                    Add with Current Selection
                                </button>
                                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                                    Cancel
                                </button>
                            </div>
                        </div>
                    `;
                    
                    const wishlistModal = new bootstrap.Modal(document.getElementById('wishlistModal'));
                    wishlistModal.show();
                } else {
                    // All variants selected, proceed with adding
                    addToWishlistWithSelectedVariants(productId);
                }
            }
        
            // Add to wishlist with selected variants
            function addToWishlistWithSelectedVariants(productId) {
                const productHasVariants = <%= (product.variants && product.variants.length > 0) ? 'true' : 'false' %> === 'true';
                
                let variantData = null;
                if (productHasVariants && selectedVariants.length > 0) {
                    // Get the main variant (first selected)
                    const mainVariant = selectedVariants[0];
                    variantData = {
                        variantName: mainVariant.variantName,
                        optionValue: mainVariant.optionValue,
                        optionId: mainVariant.optionId
                    };
                }
                
                addToWishlist(productId, variantData);
            }
        
            // Main add to wishlist function
            function addToWishlist(productId, variantData = null) {
                const wishlistBtn = document.getElementById('add-to-wishlist-btn');
                const wishlistBtnText = document.getElementById('wishlist-btn-text');
                
                if (!wishlistBtn) return;
                
                // Disable button and show loading
                wishlistBtn.disabled = true;
                wishlistBtnText.innerHTML = '<span class="spinner-border spinner-border-sm me-1"></span> Adding...';
                
                // Prepare data
                const wishlistData = {
                    productId: productId
                };
                
                // Add variant data if available
                if (variantData) {
                    Object.assign(wishlistData, variantData);
                }
                
                // Send AJAX request
                fetch('/addToWishlist', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(wishlistData)
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        isInWishlist = true;
                        wishlistItemId = data.wishlistItemId;
                        updateWishlistButton(true);
                        showToast('Added to wishlist successfully!');
                    } else {
                        if (data.message === 'Product already in wishlist') {
                            // If already in wishlist, show remove option
                            showRemoveWishlistModal(productId);
                        } else {
                            showToast(data.message || 'Failed to add to wishlist', 'error');
                        }
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    showToast('Failed to add to wishlist. Please try again.', 'error');
                })
                .finally(() => {
                    // Reset button state
                    if (wishlistBtn) {
                        wishlistBtn.disabled = false;
                        updateWishlistButton(isInWishlist);
                    }
                });
            }
        
            // Remove from wishlist function
            function removeFromWishlist(productId) {
                const wishlistBtn = document.getElementById('add-to-wishlist-btn');
                const wishlistBtnText = document.getElementById('wishlist-btn-text');
                
                if (!wishlistBtn) return;
                
                // Disable button and show loading
                wishlistBtn.disabled = true;
                wishlistBtnText.innerHTML = '<span class="spinner-border spinner-border-sm me-1"></span> Removing...';
                
                // Send AJAX request
                fetch('/removeWishlist/' + productId, {
                    method: 'DELETE',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        isInWishlist = false;
                        wishlistItemId = null;
                        updateWishlistButton(false);
                        showToast('Removed from wishlist');
                    } else {
                        showToast(data.message || 'Failed to remove from wishlist', 'error');
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    showToast('Failed to remove from wishlist. Please try again.', 'error');
                })
                .finally(() => {
                    // Reset button state
                    if (wishlistBtn) {
                        wishlistBtn.disabled = false;
                        updateWishlistButton(isInWishlist);
                    }
                });
            }
        
            // Show remove confirmation modal
            function showRemoveWishlistModal(productId) {
                const modalBody = document.getElementById('wishlistModalBody');
                modalBody.innerHTML = `
                    <div class="text-center py-4">
                        <i class="icon-heart" style="font-size: 48px; color: #ff4444; margin-bottom: 20px;"></i>
                        <h5 class="mb-3">Already in Wishlist</h5>
                        <p class="mb-4">This product is already in your wishlist.</p>
                        <div class="d-flex gap-3 justify-content-center">
                            <button type="button" class="btn btn-danger" onclick="removeFromWishlist('${productId}')">
                                Remove from Wishlist
                            </button>
                            <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                                Keep in Wishlist
                            </button>
                        </div>
                    </div>
                `;
                
                const wishlistModal = new bootstrap.Modal(document.getElementById('wishlistModal'));
                wishlistModal.show();
            }
        
            // Add to wishlist directly from variant selection (optional)
            function addToWishlistFromVariant(productId, variantName, optionValue) {
                const variantData = {
                    variantName: variantName,
                    optionValue: optionValue
                };
                
                addToWishlist(productId, variantData);
            }
        
            // ==================== EVENT LISTENERS ====================
            
            document.addEventListener('DOMContentLoaded', function() {
                // Initialize default variants if product has variants
                if (<%= (product.variants && product.variants.length > 0) ? 'true' : 'false' %> === 'true') {
                    initializeDefaultVariants();
                } else {
                    updatePrice();
                }
        
                // Check wishlist status on page load
                checkWishlistStatus();
        
                // Quantity controls (down)
                document.querySelectorAll('.btn-decrease, .minus-btn').forEach(function(btn) {
                    btn.addEventListener('click', function() {
                        const input = this.closest('.wg-quantity').querySelector('input');
                        let value = parseInt(input.value) || 1;
                        if (value > 1) {
                            input.value = value - 1;
                            updatePrice();
                        }
                    });
                });
        
                // Quantity controls (up)
                document.querySelectorAll('.btn-increase, .plus-btn').forEach(function(btn) {
                    btn.addEventListener('click', function() {
                        const input = this.closest('.wg-quantity').querySelector('input');
                        let value = parseInt(input.value) || 1;
                        input.value = value + 1;
                        updatePrice();
                    });
                });
        
                // Manual quantity input
                document.querySelectorAll('.quantity-product').forEach(function(input) {
                    input.addEventListener('change', function() {
                        let value = parseInt(this.value) || 1;
                        if (value < 1) value = 1;
                        this.value = value;
                        updatePrice();
                    });
                });
        
                // Add to cart button click handler
                document.querySelectorAll('.btn-add-to-cart').forEach(function(button) {
                    button.addEventListener('click', function(e) {
                        e.preventDefault();
        
                        var isLoggedIn = <%= user && user.role === "user" ? 'true' : 'false' %>;
        
                        if (!isLoggedIn) {
                            // Redirect to login page
                            window.location.href = '/userLogin?redirect=' + encodeURIComponent(window.location.pathname);
                            return;
                        }
        
                        // Check if all variants are selected (for variant products)
                        var productHasVariants = <%= (product.variants && product.variants.length > 0) ? 'true' : 'false' %> === 'true';
                        if (productHasVariants && selectedVariants.length !== <%= product.variants ? product.variants.length : 0 %>) {
                            swalNotify({
                                icon: 'warning',
                                title: 'Select all variants',
                                text: 'Please select all variant options before adding to cart.',
                                timer: 1600,
                                showConfirmButton: false
                            });
                            return;
                        }
        
                        // Get quantity
                        const quantityInput = document.querySelector('.quantity-product');
                        const quantity = quantityInput ? parseInt(quantityInput.value) || 1 : 1;
        
                        // Prepare data
                        const cartData = {
                            productId: '<%= product._id %>',
                            quantity: quantity
                        };
        
                        // Add variant data if available
                        if (selectedVariants.length > 0) {
                            cartData.variantSelections = selectedVariants.map(function(v) {
                                return {
                                    variantId: v.variantId,
                                    optionId: v.optionId,
                                    variantName: v.variantName,
                                    optionValue: v.optionValue
                                };
                            });
                        }
        
                        // Send AJAX request
                        fetch('/addCart', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify(cartData)
                        })
                        .then(function(response) { return response.json(); })
                        .then(function(data) {
  if (data.success) {

    swalNotify({
      icon: 'success',
      title: 'Added to Cart!',
      text: 'Product added to cart successfully!',
      timer: 1500,
      showConfirmButton: false
    });

    // ✅ update count instantly
    const cartCount = document.querySelector('.cart-count');
    if (cartCount) {
      cartCount.textContent = data.cartCount;
    }

    // ✅ open cart modal
    if (typeof bootstrap !== "undefined" && bootstrap.Modal) {
      const cartModalElem = document.getElementById('shoppingCart');
      if (cartModalElem) {
        const cartModal = new bootstrap.Modal(cartModalElem);
        cartModal.show();
      }
    }

    // ✅ reload after swal ends
    setTimeout(() => {
      window.location.reload();
    }, 1600);

  } else {
    swalNotify({
      icon: 'error',
      title: 'Cart Error',
      text: data.message || 'Failed to add product to cart.',
      timer: 2000,
      showConfirmButton: false
    });
  }
})

                        .catch(function(error) {
                            console.error('Error:', error);
                            swalNotify({
                                icon: 'error',
                                title: 'Error',
                                text: 'Failed to add product to cart. Please try again.',
                                timer: 2000,
                                showConfirmButton: false
                            });
                        });
                    });
                });
        
                // Add event listener to wishlist button
                const wishlistBtn = document.getElementById('add-to-wishlist-btn');
                if (wishlistBtn) {
                    wishlistBtn.addEventListener('click', function(e) {
                        e.preventDefault();
                        
                        const productId = this.dataset.productId;
                        const isLoggedIn = <%= user && user.role === "user" ? 'true' : 'false' %>;
                        
                        if (!isLoggedIn) {
                            // Show login modal
                            showLoginRequiredModal();
                            return;
                        }
                        
                        if (isInWishlist) {
                            // Already in wishlist, show remove confirmation
                            showRemoveWishlistModal(productId);
                        } else {
                            // Not in wishlist, add it
                            showVariantSelectionModal(productId);
                        }
                    });
                }
        
                // Quick add to wishlist from product card (if you have multiple wishlist buttons)
                document.querySelectorAll('.btn-quick-wishlist').forEach(btn => {
                    btn.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        
                        const productId = this.dataset.productId;
                        const isLoggedIn = <%= user && user.role === "user" ? 'true' : 'false' %>;
                        
                        if (!isLoggedIn) {
                            showLoginRequiredModal();
                            return;
                        }
                        
                        // Quick add without variant selection
                        addToWishlist(productId);
                    });
                });
        
                // Initialize variant display
                updateAddToCartButton();
            });
        </script>
        <!-- Product tabbed info -->
        <section>
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="widget-tabs style-1">
                            <ul class="widget-menu-tab">
                                <li class="item-title active"><span class="inner">Description</span></li>
                                <li class="item-title"><span class="inner">Beauty Tips</span></li>
                                <li class="item-title"><span class="inner">Customer Reviews</span></li>
                                <li class="item-title"><span class="inner">Shipping & Returns</span></li>
                                <li class="item-title"><span class="inner">Return Policies</span></li>
                            </ul>
                            <div class="widget-content-tab">
                                <!-- Description Tab -->
                                <div class="widget-content-inner active">
                                    <div class="tab-description">
                                        <div class="right">
                                            <div class="letter-1 text-btn-uppercase mb_12"><%= product.title %></div>
                                            <p class="mb_12 text-secondary"><%= product.shortDescription %></p>
                                            <p class="text-secondary"><%= product.description %></p>
                                            <ul class="mb_12">
                                                <li><b>Brand:</b> <%= product.brand || "—" %></li>
                                                <li><b>Weight:</b> <%= product.weight ? product.weight + "g" : "—" %></li>
                                                <li><b>Dimensions:</b>
                                                    <% if(product.dimensions && (product.dimensions.length || product.dimensions.width || product.dimensions.height)){ %>
                                                        <%= product.dimensions.length || 0 %>×
                                                        <%= product.dimensions.width || 0 %>×
                                                        <%= product.dimensions.height || 0 %> cm
                                                    <% } else { %>
                                                        —
                                                    <% } %>
                                                </li>
                                                <li><b>Total Sold:</b> <%= product.totalSold %></li>
                                                <li><b>Total Reviews:</b> <%= product.totalReviews %></li>
                                            </ul>
                                        </div>
                                        <div class="left">
                                            <div class="letter-1 text-btn-uppercase mb_12">COMPOSITION, ORIGIN AND CARE GUIDELINES</div>
                                            <ul class="list-text type-disc mb_12 gap-6">
                                                <% if (product.ingredients && product.ingredients.length) { %>
                                                    <li class="font-2">Ingredients: <%= product.ingredients.join(', ') %></li>
                                                <% } else { %>
                                                    <li class="font-2">Ingredients: —</li>
                                                <% } %>
                                                <li class="font-2">Brand: <%= product.brand || "—" %></li>
                                                <% if (product.howToUse) { %>
                                                    <li class="font-2">How to use: <%= product.howToUse %></li>
                                                <% } %>
                                            </ul>
                                            <% if(product.benefits && product.benefits.length){ %>
                                                <div class="letter-1 text-btn-uppercase mb_12">Benefits</div>
                                                <ul class="list-text type-disc mb_12 gap-6">
                                                    <% product.benefits.forEach(function(b) {%>
                                                        <li class="font-2"><%= b %></li>
                                                    <% }) %>
                                                </ul>
                                            <% } %>
                                            <% if(product.tags && product.tags.length) { %>
                                                <div class="letter-1 text-btn-uppercase mb_12">Tags</div>
                                                <div class="mb_12 text-secondary"><%= product.tags.join(', ') %></div>
                                            <% } %>
                                            <% if (product.variants && product.variants.length) { %>
                                                <div class="letter-1 text-btn-uppercase mb_12">Product Variants</div>
                                                <% product.variants.forEach(function(variant) { %>
                                                    <div class="mb_10"><strong><%= variant.name %>:</strong>
                                                        <div class="d-flex flex-wrap gap-2">
                                                            <% variant.options.forEach(function(opt) { %>
                                                                <span class="badge bg-light text-dark mx-1" style="padding:8px 12px;">
                                                                    <%= opt.value %>
                                                                    <% if(typeof opt.stock === "number") { %>
                                                                        <small class="text-secondary" style="font-size:11px;">&nbsp;(<%= opt.stock %> in stock)</small>
                                                                    <% } %>
                                                                </span>
                                                            <% }); %>
                                                        </div>
                                                    </div>
                                                <% }); %>
                                            <% } %>
                                        </div>
                                    </div>
                                </div>
                                <!-- Beauty Tips Tab (from product.beautyTips) -->
                                <div class="widget-content-inner">
                                    <div class="tab-beauty-tips">
                                        <h5 class="mb_16">Beauty Tips</h5>
                                        <% if (Array.isArray(product.beautyTips) && product.beautyTips.length) { %>
                                            <div class="row">
                                                <% product.beautyTips.forEach(function(tip, idx) { %>
                                                    <div class="col-md-6 col-lg-4 mb-4">
                                                        <div class="card h-100">
                                                            <% if(tip.image) { %>
                                                                <img src="<%= tip.image %>" alt="<%= tip.title || 'Tip ' + (idx+1) %>" class="card-img-top" style="object-fit:cover;max-height:180px" loading="lazy" />
                                                            <% } %>
                                                            <div class="card-body d-flex flex-column">
                                                                <% if (tip.title) { %>
                                                                    <h6 class="card-title mb-2"><%= tip.title %></h6>
                                                                <% } else { %>
                                                                    <h6 class="card-title mb-2">Beauty Tip <%= idx+1 %></h6>
                                                                <% } %>
                                                                <% if (tip.shortDescription) { %>
                                                                    <div class="mb-2 text-secondary"><%= tip.shortDescription %></div>
                                                                <% } %>
                                                                <% if (tip.fullDescription) { %>
                                                                    <div class="mb-2"><%= tip.fullDescription %></div>
                                                                <% } else if (tip.description) { %>
                                                                    <div class="mb-2"><%= tip.description %></div>
                                                                <% } %>
                                                                <% if (Array.isArray(tip.tags) && tip.tags.length) { %>
                                                                    <div class="mb_8">
                                                                        <% tip.tags.forEach(function(tag) { %>
                                                                            <span class="badge bg-light text-dark me-1"><%= tag %></span>
                                                                        <% }); %>
                                                                    </div>
                                                                <% } %>
                                                                <% if (tip.category && tip.category.name) { %>
                                                                    <div class="mt-auto mb_8 small text-secondary">Category: <%= tip.category.name %></div>
                                                                <% } %>
                                                                <% if (Array.isArray(tip.relatedProducts) && tip.relatedProducts.length) { %>
                                                                    <div class="small text-secondary">
                                                                        Related Products:
                                                                        <% tip.relatedProducts.forEach(function(prod, pidx) { %>
                                                                            <a href="/productDetails/<%= prod.slug || prod._id %>"><%= prod.title || prod.slug || 'Product' %></a><%= pidx < tip.relatedProducts.length-1 ? ', ' : '' %>
                                                                        <% }); %>
                                                                    </div>
                                                                <% } %>
                                                            </div>
                                                        </div>
                                                    </div>
                                                <% }); %>
                                            </div>
                                        <% } else { %>
                                            <div class="mb_12 text-secondary">No beauty tips available for this product.</div>
                                        <% } %>
                                    </div>
                                </div>
                                <!-- Customer Reviews Tab -->
                                <div class="widget-content-inner">
                                    <div class="customer-reviews-section">
                                        <h5 class="mb_16">Customer Reviews</h5>

                                        <% if (user && user.role === 'user') { %>
                                            <div class="mb_16">
                                                <button type="button" id="toggle-review-form-btn" class="btn btn-outline-primary mb_8" style="font-weight:600;">
                                                    <i class="fa fa-pencil-alt mr-1"></i> Post Your Review
                                                </button>
                                                <div id="add-review-form-wrapper" style="display:none;">
                                                    <form id="add-review-form" class="mb_16 card card-body" style="box-shadow:0 4px 12px 0 rgba(0,0,0,.03);">
                                                        <div class="mb-2">
                                                            <label for="review-name" class="form-label">Your Name</label>
                                                            <input type="text" class="form-control" id="review-name" name="name" value="<%= user.name %>" <%= user.name ? 'readonly' : '' %> >
                                                        </div>
                                                        <div class="mb-2">
                                                            <label class="form-label">Your Rating</label>
                                                            <div id="review-rating" style="font-size:20px;">
                                                                <% for (var i = 1; i <= 5; i++) { %>
                                                                    <span class="star-rating" data-value="<%= i %>" style="cursor:pointer; color:#ccc;">&#9733;</span>
                                                                <% } %>
                                                                <input type="hidden" name="rating" id="review-rating-input" value="0">
                                                            </div>
                                                        </div>
                                                        <div class="mb-2">
                                                            <label for="review-content" class="form-label">Your Review</label>
                                                            <textarea id="review-content" name="content" class="form-control" rows="3" required maxlength="1500"></textarea>
                                                        </div>
                                                        <button type="submit" class="btn btn-primary">Submit Review</button>
                                                    </form>
                                                </div>
                                            </div>
                                        <% } else { %>
                                            <div class="mb_16 text-secondary">
                                                <a href="/userLogin" class="ml-2 text-link">Log in</a> to post a review.
                                            </div>
                                        <% } %>

                                        <% if (product.reviews && product.reviews.length) { %>
                                            <ul class="list-text type-disc mb_12 gap-6" id="reviews-list">
                                                <% product.reviews.forEach(function(review) { %>
                                                    <li class="font-2" data-review-id="<%= review._id %>">
                                                        <div>
                                                            <strong><%= review.name || review.userName || "Anonymous" %></strong>
                                                            <span class="text-secondary ml-2" style="font-size: 12px;">
                                                                <% if (review.createdAt) { %>
                                                                    (<%= new Date(review.createdAt).toLocaleDateString() %>)
                                                                <% } %>
                                                            </span>
                                                            <% /* DELETE TEXT BUTTON visible only to review owner */ %>
                                                            <% if (user && user.id && review.userId && user.id == review.userId.toString()) { %>
                                                                <button type="button" class="delete-review-btn text-danger border-0 bg-white ml-2" data-reviewid="<%= review._id %>" data-productid="<%= product._id %>" title="Delete review" style="font-size:13px;cursor:pointer;text-decoration:underline;">
                                                                    Delete
                                                                </button>
                                                            <% } %>
                                                        </div>
                                                        <div>
                                                            Rating:
                                                            <% for (var i = 1; i <= 5; i++) { %>
                                                                <% if (i <= review.rating) { %>
                                                                    <span style="color: #FFE066;">&#9733;</span>
                                                                <% } else { %>
                                                                    <span style="color: #CCCCCC;">&#9733;</span>
                                                                <% } %>
                                                            <% } %>
                                                        </div>
                                                        <div><%= review.content || review.comment %></div>
                                                    </li>
                                                <% }); %>
                                            </ul>
                                        <% } else { %>
                                            <div class="mb_12 text-secondary">No customer reviews yet.</div>
                                        <% } %>
                                    </div>
                                </div>

                              
                                <!-- Shipping & Returns Tab -->
                                <div class="widget-content-inner">
                                    <div class="tab-shipping">
                                        <div class="w-100">
                                            <div class="text-btn-uppercase mb_12">We've got your back</div>
                                            <p class="mb_12">Free Delivery For All products From Blushley.</p>
                                            <div class="mt_12">
                                                <strong>Replacement Policy:</strong>
                                                <p class="mb_12">We offer replacements <span style="color:#e55347;font-weight:500;">only within 2 hours after order delivery</span>. Please ensure you check your items promptly upon receipt. If you notice any issues, contact our support team immediately for assistance.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Return Policies Tab -->
                                <div class="widget-content-inner">
                                    <div class="tab-policies">
                                        <div class="text-btn-uppercase mb_12">Replacement Policy Only</div>
                                        <p class="mb_12 text-secondary">
                                            At Blushley, we do not offer returns on any products. However, if you receive a damaged, defective, or incorrect item, you are eligible for a replacement. 
                                            <br><br>
                                            <strong>No Returns &mdash; Only Replacement Within 2 Hours of Delivery:</strong> 
                                            <br>
                                            Please inspect your order upon delivery. If there is a problem, contact our support team within 2 hours of receiving your order. We will promptly assist in providing a replacement for your item. No requests for return or replacement will be accepted after this window.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
  <!-- SweetAlert for notifications -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script>
  document.addEventListener("DOMContentLoaded", function() {
      var toggleBtn = document.getElementById('toggle-review-form-btn');
      var formWrapper = document.getElementById('add-review-form-wrapper');
      if (toggleBtn && formWrapper) {
          toggleBtn.addEventListener('click', function() {
              if (formWrapper.style.display === 'none' || formWrapper.style.display === '') {
                  formWrapper.style.display = 'block';
                  setTimeout(function() {
                      formWrapper.scrollIntoView({ behavior: "smooth", block: "center" });
                  }, 100);
              } else {
                  formWrapper.style.display = 'none';
              }
          });
      }

      // Star rating selection for review form
      const stars = document.querySelectorAll('#review-rating .star-rating');
      const ratingInput = document.getElementById('review-rating-input');
      let selectedRating = 0;

      stars.forEach(star => {
          star.addEventListener('mouseenter', function() {
              let val = parseInt(this.getAttribute('data-value'));
              stars.forEach((s, idx) => {
                  s.style.color = idx < val ? "#FFE066" : "#CCCCCC";
              });
          });
          star.addEventListener('mouseleave', function() {
              stars.forEach((s, idx) => {
                  s.style.color = idx < selectedRating ? "#FFE066" : "#CCCCCC";
              });
          });
          star.addEventListener('click', function() {
              selectedRating = parseInt(this.getAttribute('data-value'));
              ratingInput.value = selectedRating;
              stars.forEach((s, idx) => {
                  s.style.color = idx < selectedRating ? "#FFE066" : "#CCCCCC";
              });
          });
      });

      // Review form submission (AJAX)
      const form = document.getElementById("add-review-form");
      if(form) {
          form.addEventListener("submit", function(e){
              e.preventDefault();
              const name = form.name.value;
              const rating = parseInt(form.rating.value);
              const content = form.content.value;
              if(!rating) {
                  Swal.fire({
                      icon: 'warning',
                      title: 'Rating required',
                      text: 'Please select a rating before submitting.'
                  });
                  return;
              }
              fetch(`/products/<%= product._id %>/review`, {
                  method: "POST",
                  headers: {
                      "Content-Type": "application/json"
                  },
                  body: JSON.stringify({ name, rating, content })
              })
              .then(res => res.json())
              .then(data => {
                  if(data.success && data.product && data.product.reviews) {
                      renderReviews(data.product.reviews);
                      form.reset();
                      selectedRating = 0;
                      stars.forEach(s => s.style.color = "#CCCCCC");
                      Swal.fire({
                          icon: 'success',
                          title: 'Review submitted!',
                          text: data.message || "Your review was submitted."
                      }).then(() => {
                          location.reload();
                      });
                  } else {
                      Swal.fire({
                          icon: 'error',
                          title: 'Error',
                          text: data.message || "There was a problem submitting your review."
                      });
                  }
              })
              .catch(() => {
                  Swal.fire({
                      icon: 'error',
                      title: 'Network error',
                      text: "Could not submit review. Please try again."
                  });
              });
          });
      }

      // Handle review deletion
      document.getElementById("reviews-list")?.addEventListener("click", function(e){
          if(e.target.closest(".delete-review-btn")) {
              const btn = e.target.closest(".delete-review-btn");
              const reviewId = btn.getAttribute("data-reviewid");
              const productId = btn.getAttribute("data-productid");

              Swal.fire({
                  title: 'Delete your review?',
                  text: "This action cannot be undone.",
                  icon: 'warning',
                  showCancelButton: true,
                  confirmButtonColor: '#e55347',
                  cancelButtonColor: '#6c757d',
                  confirmButtonText: 'Yes, delete it!'
              }).then((result) => {
                  if (result.isConfirmed) {
                      fetch(`/products/${productId}/review/${reviewId}`, {
                          method: "DELETE"
                      })
                      .then(res => res.json())
                      .then(data => {
                          if(data.success && data.product && data.product.reviews) {
                              renderReviews(data.product.reviews);
                              Swal.fire({
                                  icon: 'success',
                                  title: 'Review deleted!',
                                  text: data.message || "Your review was deleted."
                              }).then(() => {
                                  location.reload();
                              });
                          } else {
                              Swal.fire({
                                  icon: 'error',
                                  title: 'Delete failed',
                                  text: data.message || "Could not delete review."
                              });
                          }
                      })
                      .catch(() => {
                          Swal.fire({
                              icon: 'error',
                              title: 'Network error',
                              text: "Could not delete review. Please try again."
                          });
                      });
                  }
              });
          }
      });

      // Render reviews utility (client-only, rerenders the reviews list)
      function renderReviews(reviews) {
          const userId = "<%= user && user.id ? user.id : '' %>";
          const list = document.getElementById("reviews-list");
          if (!list) return;
          if (reviews.length === 0) {
              list.innerHTML = '<div class="mb_12 text-secondary">No customer reviews yet.</div>';
              return;
          }
          list.innerHTML = reviews.map(function(review) {
              let starsHTML = "";
              for (let i = 1; i <= 5; i++) {
                  starsHTML += `<span style="color:${i <= review.rating ? '#FFE066' : '#CCCCCC'}">&#9733;</span>`;
              }
              let deleteBtn = "";
              if(userId && review.userId && userId === review.userId.toString()) {
                  // Show text delete button
                  deleteBtn = `<button type="button" class="delete-review-btn text-danger border-0 bg-white ml-2" data-reviewid="${review._id}" data-productid="<%= product._id %>" title="Delete review" style="font-size:13px;cursor:pointer;text-decoration:underline;">
                      Delete
                  </button>`;
              }
              return `<li class="font-2" data-review-id="${review._id}">
                  <div>
                      <strong>${review.name || review.userName || "Anonymous"}</strong>
                      <span class="text-secondary ml-2" style="font-size: 12px;">
                          ${review.createdAt ? '('+new Date(review.createdAt).toLocaleDateString()+')' : ''}
                      </span>
                      ${deleteBtn}
                  </div>
                  <div>
                      Rating: ${starsHTML}
                  </div>
                  <div>${review.content || review.comment || ''}</div>
              </li>`;
          }).join('');
      }
  });
  </script>
       

        <!-- Related Products & Recently Viewed Tabs -->
        <section class="flat-spacing">
            <div class="container flat-animate-tab">
                <ul class="tab-product justify-content-sm-center wow fadeInUp" data-wow-delay="0s" role="tablist">
                    <li class="nav-tab-item" role="presentation">
                        <a href="#relatedProducts" class="active" data-bs-toggle="tab">Related Products</a>
                    </li>
                </ul>
                <div class="tab-content">
                    <!-- Related Products List -->
                    <div class="tab-pane active show" id="relatedProducts" role="tabpanel">
                        <div dir="ltr" class="swiper tf-sw-latest" data-preview="4" data-tablet="3" data-mobile="2" data-space-lg="30" data-space-md="30" data-space="15" data-pagination="1" data-pagination-md="1" data-pagination-lg="1">
                            <div class="swiper-wrapper">
                                <% relatedProducts && relatedProducts.forEach(function(rp) { 
                                    let rpBase = typeof rp.adminBasePrice === "number" ? rp.adminBasePrice : rp.basePrice;
                                    let rpSale = typeof rp.adminSalePrice === "number" ? rp.adminSalePrice : rp.salePrice;
                                    if(typeof rpSale !== "number" || isNaN(rpSale)) rpSale = rpBase;
                                    let rpDiscount = (rpBase > rpSale) ? Math.round((rpBase-rpSale)/rpBase*100) : 0;
                                %>
                                    <div class="swiper-slide">
                                        <div class="card-product">
                                            <div class="card-product-wrapper">
                                                <a href="/productDetails/<%= rp.slug %>" class="product-img">
                                                    <img class="lazyload img-product" data-src="<%= (rp.images && rp.images[0]) ? rp.images[0] : '/images/products/default.png' %>" src="<%= (rp.images && rp.images[0]) ? rp.images[0] : '/images/products/default.png' %>" alt="image-product">
                                                </a>
                                                <% if(rpDiscount>0){ %>
                                                    <div class="on-sale-wrap"><span class="on-sale-item">-<%= rpDiscount %>%</span></div>
                                                <% } %>
                                                <div class="list-btn-main">
                                                    <a href="/productDetails/<%= rp.slug %>#shoppingCart" data-bs-toggle="modal" class="btn-main-product">Add To cart</a>
                                                </div> 
                                            </div>
                                            <div class="card-product-info">
                                                <a href="/productDetails/<%= rp.slug %>" class="title link"><%= rp.title %></a>
                                                <% if(rpDiscount>0){ %>
                                                    <span class="price"><span class="old-price">₹<%= rpBase.toFixed(2) %></span> ₹<%= rpSale.toFixed(2) %></span>
                                                <% } else { %>
                                                    <span class="price">₹<%= rpBase.toFixed(2) %></span>
                                                <% } %>
                                            </div>
                                        </div>
                                    </div>
                                <% }) %>
                            </div>
                            <div class="sw-pagination-latest sw-dots type-circle justify-content-center"></div>
                        </div>
                    </div>
                 
                </div>
            </div>
        </section>
      
        <!-- Footer -->
         <footer id="footer" class="footer">
    <div class="footer-wrap">
        <div class="footer-body">
            <div class="container">
                <div class="row">
                    <div class="col-lg-5">
                        <div class="footer-infor">
                            <div class="footer-logo">
                                <a href="/">
                                    <img src="/images/logo/blushley-png-without-shade.png" alt="">
                                </a>
                            </div>
                            <p>Premium beauty products and professional beautician services. Shop skincare,
                                makeup, and hair care essentials, or book appointments with our network of
                                experienced beauticians.</p>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="footer-menu footer-menu-texts">
                            <div class="footer-col-block">
                                <div class="footer-heading text-button footer-heading-mobile">
                                    Information
                                </div>
                                <div class="tf-collapse-content">
                                    <ul class="footer-menu-list">
                                        <li class="text-caption-1">
                                            <a href="/about" class="footer-menu_item">About Us</a>
                                        </li>
                                        <li class="text-caption-1">
                                            <a href="/contact" class="footer-menu_item">Contact us</a>
                                        </li>
                                        <li class="text-caption-1">
                                            <a href="/user-account" class="footer-menu_item">My Account</a>
                                        </li>
                                        <li class="text-caption-1">
                                            <a href="/terms_and_conditions" class="footer-menu_item">Terms & Conditions</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="footer-col-block">
                                <div class="footer-heading text-button footer-heading-mobile">
                                    Services
                                </div>
                                <div class="tf-collapse-content">
                                    <ul class="footer-menu-list">
                                        <li class="text-caption-1">
                                            <a href="#" class="footer-menu_item">Shipping</a>
                                        </li>
                                        <li class="text-caption-1">
                                            <a href="#" class="footer-menu_item">Return & Refund</a>
                                        </li>
                                        <li class="text-caption-1">
                                            <a href="/wishlist" class="footer-menu_item">My Wishlist</a>
                                        </li>
                                        <li class="text-caption-1">
                                            <a href="/privacy_policy" class="footer-menu_item">Privacy Policy</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="footer-heading text-button footer-heading-mobile">
                            contact us
                        </div>
                        <div class="footer-address">
                            <p>Trivandrum, Kerala</p>
                        </div>
                        <ul class="footer-info">
                            <li>
                                <i class="icon-mail"></i>
                                <p><a  href="mailto:blushleyoffice@gmail.com">blushleyoffice@gmail.com</a></p>
                            </li>
                            <li>
                                <i class="icon-phone"></i>
                                <p><a class="ft-number" href="tel:+917994145723">+91 7994 145 723</a></p>
                            </li>
                        </ul>
                          <div class="tf-cur mt-3">
                                    <ul class="tf-social-icon">
                                        <li><a href="#" class="social-facebook"><i class="icon icon-fb"></i></a></li>
                                        <li><a href="#" class="social-twiter"><i class="icon icon-x"></i></a></li>
                                        <li><a href="#" class="social-instagram"><i class="icon icon-instagram"></i></a></li>
                                    </ul>
                                </div>
                    </div>
                 
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="footer-bottom-wrap">
                            <div class="left">
                                <p class="text-caption-1">©2025 Blushley. All Rights Reserved.| Developed by Trivlogic Private Limited</p>
                              
                            </div>
                            <div class="tf-payment">
                                <p class="text-caption-1">Payment:</p>
                                <ul>
                                    <li><img src="/images/payment/img-1.png" alt=""></li>
                                    <li><img src="/images/payment/img-2.png" alt=""></li>
                                    <li><img src="/images/payment/img-3.png" alt=""></li>
                                    <li><img src="/images/payment/img-4.png" alt=""></li>
                                    <li><img src="/images/payment/img-5.png" alt=""></li>
                                    <li><img src="/images/payment/img-6.png" alt=""></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
         </footer>

       
<div class="mobile-nav-wrapper" id="mobileNavWrapper">
    <!-- Floating Top Toolbar -->
    <div class="tf-toolbar-top hide" id="mobileTopToolbar">

        <div class="toolbar-item">
          <a href="/saloon-at-home">
            <div class="toolbar-icon">
              <!-- svg -->
            </div>
            <div class="toolbar-label">Salon at Home</div>
          </a>
        </div>

        <div class="toolbar-logo">
          <a href="/" aria-label="Home">
            <img src="/images/logo/Blushley-png-logo.png" alt="Logo" style="width: 30px;">
          </a>
        </div>
      
        <div class="toolbar-item">
          <a href="/book-a-saloon">
            <!-- svg -->
            <div class="toolbar-label">Book a Salon</div>
          </a>
        </div>
      
      </div>
      
    <!-- toolbar-bottom -->
    <div class="tf-toolbar-bottom">
        <div class="toolbar-item">
            <a href="/">
                <div class="toolbar-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                        fill="none" stroke="#4D4E4F" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2v-5H9v5a2 2 0 0 1-2 2H3z"></path>
                    </svg>
                </div>
                <div class="toolbar-label">Home</div>
            </a>
        </div>
        <div class="toolbar-item">
            <a href="/shop">
                <div class="toolbar-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                        fill="none" stroke="#4D4E4F" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M6 2l1 7h10l1-7H6zM5 9h14l-1 11H6L5 9z"></path>
                    </svg>
                </div>
                <div class="toolbar-label">Store</div>
            </a>
        </div>
        <div class="toolbar-item">
            <a href="/userLogin">
                <div class="toolbar-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                        fill="none" stroke="#4D4E4F" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M20 21v-2a4 4 0 0 0-3-3.87"></path>
                        <path d="M4 21v-2a4 4 0 0 1 3-3.87"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                </div>
                <div class="toolbar-label">Login</div>
            </a>
        </div>
        <div class="toolbar-item">
            <a href="/user-orders">
                <div class="toolbar-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                        xmlns="http://www.w3.org/2000/svg">
                        <rect x="3" y="3" width="18" height="18" rx="2" stroke="#4D4E4F" stroke-width="2" />
                        <path d="M9 3V6M15 3V6M3 9H21" stroke="#4D4E4F" stroke-width="2"
                            stroke-linecap="round" />
                    </svg>
                </div>
                <div class="toolbar-label">Orders</div>
            </a>
        </div>
        <div class="toolbar-item">
            <a href="#wishlist" data-bs-toggle="modal">
                <div class="toolbar-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                        xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M20.84 4.61C20.33 4.1 19.72 3.69 19.05 3.42C18.39 3.14 17.67 3 16.95 3C16.23 3 15.51 3.14 14.84 3.42C14.18 3.69 13.57 4.1 13.06 4.61L12 5.67L10.94 4.61C9.91 3.58 8.51 3 7.05 3C5.59 3 4.19 3.58 3.16 4.61C2.13 5.64 1.55 7.04 1.55 8.5C1.55 9.96 2.13 11.36 3.16 12.39L4.22 13.45L12 21.23L19.78 13.45L20.84 12.39C21.35 11.88 21.76 11.27 22.03 10.61C22.31 9.94 22.45 9.22 22.45 8.5C22.45 7.78 22.31 7.06 22.03 6.39C21.76 5.73 21.35 5.12 20.84 4.61Z"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                </div>
                <div class="toolbar-label">Wishlist</div>
            </a>
        </div>

    </div>
    <!-- /toolbar-bottom -->
</div>
    <script>
    document.addEventListener("DOMContentLoaded", () => {
      const topToolbar = document.getElementById("mobileTopToolbar");
      if (!topToolbar) return;
    
      const isMobile = () => window.innerWidth <= 768;
    
      let lastScrollTop = window.pageYOffset || document.documentElement.scrollTop;
      const scrollThreshold = 5;
    
      // start hidden
      topToolbar.classList.add("hide");
      topToolbar.classList.remove("show");
    
      window.addEventListener("scroll", () => {
        if (!isMobile()) return;
    
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
    
        // ✅ show only after small scroll (so not in top)
        if (scrollTop < 150) {
          topToolbar.classList.add("hide");
          topToolbar.classList.remove("show");
          lastScrollTop = scrollTop;
          return;
        }
    
        if (Math.abs(scrollTop - lastScrollTop) < scrollThreshold) return;
    
        // ✅ scroll down => show
        if (scrollTop > lastScrollTop) {
          topToolbar.classList.remove("hide");
          topToolbar.classList.add("show");
        }
        // ✅ scroll up => hide
        else {
          topToolbar.classList.add("hide");
          topToolbar.classList.remove("show");
        }
    
        lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;
      }, { passive: true });
    });
    </script>

        <!-- search -->
        <div class="modal fade modal-search" id="search" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
              <div class="modal-content p-3">
                <div class="d-flex justify-content-between align-items-center mb-2">
                  <h5 class="m-0">Search</h5>
                  <button type="button" class="btn btn-sm btn-light" data-bs-dismiss="modal" aria-label="Close">&times;</button>
                </div>
          
                <div class="search-bar-wrapper d-flex align-items-center mb-2">
                  <form class="form-search flex-grow-1" onsubmit="return false;" id="searchForm">
                    <fieldset class="text m-0">
                      <input id="searchInput" type="text" placeholder="Start typing (min 3 characters)..." name="text" tabindex="0"
                             aria-required="true" autocomplete="off" class="form-control" />
                    </fieldset>
                  </form>
          
                  <button id="searchFilterToggleBtn" class="btn btn-outline-secondary ms-2" type="button" onclick="Search.toggleFilterSection()">
                      Filters <span id="searchFilterCount" class="badge bg-secondary" style="display:none;">0</span>
                  </button>
                </div>
          
                <!-- Filters (hidden until modal opened and data loaded) -->
                <div id="searchFilterSection" class="card card-body mb-2" style="display:none;">
                  <div class="d-flex justify-content-between mb-2">
                    <strong>Filters</strong>
                    <button class="btn btn-sm btn-link" id="searchClearFiltersBtn" onclick="Search.clearAllFilters()" style="display:none;">Clear All</button>
                  </div>
          
                  <div class="mb-2">
                    <label class="form-label mb-1">Categories</label>
                    <div id="searchCategoryContainer" class="d-flex flex-wrap gap-2"></div>
                  </div>
          
                  <div class="mb-2">
                    <label class="form-label mb-1">Brands</label>
                    <div id="searchBrandContainer" class="d-flex flex-wrap gap-2"></div>
                  </div>
                </div>
          
                <div class="mb-2">
                  <h6 class="mb-1">Suggestions</h6>
                  <div id="searchSuggestions" class="small text-muted">Type 3 characters to see results</div>
                </div>
          
                <div class="mb-2">
                  <h6 class="mb-1">Recently viewed</h6>
                  <div id="searchRecentlyViewed" class="d-flex flex-wrap gap-2"></div>
                </div>
          
                <!-- Results -->
                <div id="searchResultsContainer" class="list-group"></div>
          
                <div class="mt-3 text-end">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
              </div>
            </div>
          </div>
        <!-- /search -->
         
       <!-- mobile menu -->
    <div class="offcanvas offcanvas-start canvas-mb" id="mobileMenu">
        <span class="icon-close icon-close-popup" data-bs-dismiss="offcanvas" aria-label="Close"></span>
        <div class="mb-canvas-content">
            <div class="mb-body">
                <div class="mb-content-top">
                    <form class="form-search">
                        <fieldset class="text">
                            <input type="text" placeholder="What are you looking for?" class="" name="text" tabindex="0"
                                value="" aria-required="true" required="">
                        </fieldset>
                        <button class="" type="submit">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M11 19C15.4183 19 19 15.4183 19 11C19 6.58172 15.4183 3 11 3C6.58172 3 3 6.58172 3 11C3 15.4183 6.58172 19 11 19Z"
                                    stroke="#181818" stroke-linecap="round" stroke-linejoin="round" />
                                <path d="M20.9984 20.9999L16.6484 16.6499" stroke="#181818" stroke-linecap="round"
                                    stroke-linejoin="round" />
                            </svg>
                        </button>
                    </form>
                    <ul class="nav-ul-mb" id="wrapper-menu-navigation">
                        <li class="nav-mb-item active">
                            <a href="/" class="mb-menu-link">
                                <span>Home</span>

                            </a>

                        </li>

                        <li class="nav-mb-item active">
                            <a href="/about" class="mb-menu-link">
                                <span>About</span>
                            </a>
                        </li>
                        <li class="nav-mb-item active">
                            <a href="/shop" class="mb-menu-link">
                                <span>Shop</span>

                            </a>

                        </li>
                        <li class="nav-mb-item active">
                            <a href="/saloon-at-home" class="mb-menu-link">
                                <span>Salon at Home</span>

                            </a>

                        </li>
                         <li class="nav-mb-item active">
                            <a href="/book-a-saloon" class="mb-menu-link">
                                <span>Book a Salon</span>

                            </a>

                        </li>

                        <li class="nav-mb-item active">
                            <a href="/userblogs" class="mb-menu-link">
                                <span>Blogs</span>

                            </a>

                        </li>
                        <li class="nav-mb-item active">
                            <a href="/contact" class="mb-menu-link">
                                <span>Contact</span>

                            </a>

                        </li>


                    </ul>
                </div>
                <div class="mb-other-content">
                    <div class="group-icon">
                        <a href="/wishlist" class="site-nav-icon">
                            <svg class="icon" width="18" height="18" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M20.8401 4.60987C20.3294 4.09888 19.7229 3.69352 19.0555 3.41696C18.388 3.14039 17.6726 2.99805 16.9501 2.99805C16.2276 2.99805 15.5122 3.14039 14.8448 3.41696C14.1773 3.69352 13.5709 4.09888 13.0601 4.60987L12.0001 5.66987L10.9401 4.60987C9.90843 3.57818 8.50915 2.99858 7.05012 2.99858C5.59109 2.99858 4.19181 3.57818 3.16012 4.60987C2.12843 5.64156 1.54883 7.04084 1.54883 8.49987C1.54883 9.95891 2.12843 11.3582 3.16012 12.3899L4.22012 13.4499L12.0001 21.2299L19.7801 13.4499L20.8401 12.3899C21.3511 11.8791 21.7565 11.2727 22.033 10.6052C22.3096 9.93777 22.4519 9.22236 22.4519 8.49987C22.4519 7.77738 22.3096 7.06198 22.033 6.39452C21.7565 5.72706 21.3511 5.12063 20.8401 4.60987V4.60987Z"
                                    stroke="#181818" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                            Wishlist
                        </a>

                        <a href="/userLogin" class="site-nav-icon">
                            <svg class="icon" width="18" height="18" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21"
                                    stroke="#181818" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                <path
                                    d="M12 11C14.2091 11 16 9.20914 16 7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7C8 9.20914 9.79086 11 12 11Z"
                                    stroke="#181818" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                            Login
                        </a>

                    </div>
                    <div class="mb-notice">
                        <a href="/contact" class="text-need">Need Help?</a>
                    </div>
                    <div class="mb-contact">
                        <p class="text-caption-1">Trivandrum, Kerala</p>
                       <!-- <a href="/contact" class="tf-btn-default text-btn-uppercase">GET DIRECTION<i
                                class="icon-arrowUpRight"></i></a>-->
                    </div>
                    <ul class="mb-info">
                        <li>
                            <i class="icon icon-mail"></i>
                            <p><a  href="mailto:blushleyoffice@gmail.com">blushleyoffice@gmail.com</a></p>
                        </li>
                        <li>
                            <i class="icon icon-phone"></i>
                            <p>+91 7994 145 723</p>
                        </li>
                    </ul>
                </div>
            </div>

        </div>
    </div>
    <!-- /mobile menu -->


  

    <!-- quickView -->
    <div class="modal fullRight fade modal-quick-view" id="quickView">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="tf-quick-view-image">
                    <div class="wrap-quick-view wrapper-scroll-quickview">
                        <div class="quickView-item item-scroll-quickview" data-scroll-quickview="beige">
                            <img class="lazyload" data-src="/images/products/beauty-cosmetic/beauty8.jpg" src="/images/products/beauty-cosmetic/beauty8.jpg" alt="">
                        </div>
                        <div class="quickView-item item-scroll-quickview" data-scroll-quickview="beige">
                            <img class="lazyload" data-src="/images/products/beauty-cosmetic/beauty8.jpg" src="/images/products/beauty-cosmetic/beauty8.jpg" alt="">
                        </div>
                        <div class="quickView-item item-scroll-quickview" data-scroll-quickview="gray">
                            <img class="lazyload" data-src="/images/products/beauty-cosmetic/beauty8.jpg" src="/images/products/beauty-cosmetic/beauty8.jpg" alt="">
                        </div>
                        <div class="quickView-item item-scroll-quickview" data-scroll-quickview="gray">
                            <img class="lazyload" data-src="/images/products/womens/women-4.jpg" src="/images/products/womens/women-4.jpg" alt="">
                        </div>
                        <div class="quickView-item item-scroll-quickview" data-scroll-quickview="grey">
                            <img class="lazyload" data-src="/images/products/beauty-cosmetic/beauty8.jpg" src="/images/products/beauty-cosmetic/beauty8.jpg" alt="">
                        </div>
                        <div class="quickView-item item-scroll-quickview" data-scroll-quickview="grey">
                            <img class="lazyload" data-src="/images/products/beauty-cosmetic/beauty8.jpg" src="/images/products/beauty-cosmetic/beauty8.jpg" alt="">
                        </div>
                    </div>
                </div>
                <div class="wrap">
                    <div class="header">
                        <h5 class="title">Quick View</h5>
                        <span class="icon-close icon-close-popup" data-bs-dismiss="modal"></span>
                    </div>
                    <div class="tf-product-info-list">
                        <div class="tf-product-info-heading">
                            <div class="tf-product-info-name">
                                <div class="text text-btn-uppercase">serum</div>
                                <h3 class="name">vitamin B serum</h3>
                                <div class="sub">
                                    <div class="tf-product-info-rate">
                                        <div class="list-star">
                                            <i class="icon icon-star"></i>
                                            <i class="icon icon-star"></i>
                                            <i class="icon icon-star"></i>
                                            <i class="icon icon-star"></i>
                                            <i class="icon icon-star"></i>
                                        </div>
                                        <div class="text text-caption-1">(134 reviews)</div>
                                    </div>
                                    <div class="tf-product-info-sold">
                                        <i class="icon icon-lightning"></i>
                                        <div class="text text-caption-1">18 sold in last 32 hours</div>
                                    </div>
                                </div>
                            </div>
                            <div class="tf-product-info-desc">
                                <div class="tf-product-info-price">
                                    <h5 class="price-on-sale font-2">₹79.99</h5>
                                    <div class="compare-at-price font-2">₹98.99</div>
                                    <div class="badges-on-sale text-btn-uppercase">
                                        -25%
                                    </div>
                                </div>
                                <p>The garments labelled as Committed are products that have been produced using sustainable fibres or processes, reducing their environmental impact.</p>
                                <div class="tf-product-info-liveview">
                                    <i class="icon icon-eye"></i>
                                    <p class="text-caption-1"><span class="liveview-count">28</span> people are viewing this right now</p>
                                </div>
                            </div>
                        </div>
                        <div class="tf-product-info-choose-option">
                            <div class="variant-picker-item">
                                <div class="variant-picker-label mb_12">
                                    Colors:<span class="text-title variant-picker-label-value">Beige</span>
                                </div>
                                <div class="variant-picker-values">
                                    <input id="values-beige1" type="radio" name="color2" checked>
                                    <label class="hover-tooltip tooltip-bot radius-60 color-btn btn-scroll-quickview active" data-slide="0" data-price="79.99" for="values-beige1" data-value="Beige" data-scroll-quickview="beige">
                                        <span class="btn-checkbox bg-color-beige1"></span>
                                        <span class="tooltip">Beige</span>
                                    </label>
                                    <input id="values-gray1" type="radio" name="color2">
                                    <label class="hover-tooltip tooltip-bot radius-60 color-btn btn-scroll-quickview" data-slide="1" data-price="79.99" for="values-gray1" data-value="Gray" data-scroll-quickview="gray">
                                        <span class="btn-checkbox bg-color-gray"></span>
                                        <span class="tooltip">Gray</span>
                                    </label>
                                    <input id="values-grey1" type="radio" name="color2">
                                    <label class="hover-tooltip tooltip-bot radius-60 color-btn btn-scroll-quickview" data-slide="2" data-price="89.99" for="values-grey1" data-value="Grey" data-scroll-quickview="grey">
                                        <span class="btn-checkbox bg-color-grey"></span>
                                        <span class="tooltip">Grey</span>
                                    </label>
                                </div>
                            </div>
                            <div class="variant-picker-item">
                                <div class="d-flex justify-content-between mb_12">
                                    <div class="variant-picker-label">
                                        Size:<span class="text-title variant-picker-label-value">L</span>
                                    </div>
                                    <a class="size-guide text-title link show-size-guide">Size Guide</a>
                                </div>
                                <div class="variant-picker-values gap12">
                                    <input type="radio" name="size2" id="values-s1">
                                    <label class="style-text size-btn" for="values-s1" data-value="S">
                                        <span class="text-title">S</span>
                                    </label>
                                    <input type="radio" name="size2" id="values-m1">
                                    <label class="style-text size-btn" for="values-m1" data-value="M">
                                        <span class="text-title">M</span>
                                    </label>
                                    <input type="radio" name="size2" id="values-l1" checked>
                                    <label class="style-text size-btn" for="values-l1" data-value="L" data-price="89.99">
                                        <span class="text-title">L</span>
                                    </label>
                                    <input type="radio" name="size2" id="values-xl1">
                                    <label class="style-text size-btn" for="values-xl1" data-value="XL" data-price="89.99">
                                        <span class="text-title">XL</span>
                                    </label>
                                </div>
                            </div>
                            <div class="tf-product-info-quantity">
                                <div class="title mb_12">Quantity:</div>
                                <div class="wg-quantity">
                                    <span class="btn-quantity btn-decrease">-</span>
                                    <input class="quantity-product" type="text" name="number" value="1">
                                    <span class="btn-quantity btn-increase">+</span>
                                </div>
                            </div>
                            <div>
                                <div class="tf-product-info-by-btn mb_10">
                                    <a class="btn-style-2 flex-grow-1 text-btn-uppercase fw-6 show-shopping-cart"><span>Add to cart -&nbsp;</span><span class="tf-qty-price total-price">₹79.99</span></a>
                                    <a href="#compare" data-bs-toggle="offcanvas" aria-controls="compare" class="box-icon hover-tooltip compare btn-icon-action show-compare">
                                        <span class="icon icon-gitDiff"></span>
                                        <span class="tooltip text-caption-2">Compare</span>
                                    </a>
                                    <a href="javascript:void(0);" class="box-icon hover-tooltip text-caption-2 wishlist btn-icon-action">
                                        <span class="icon icon-heart"></span>
                                        <span class="tooltip text-caption-2">Wishlist</span>
                                    </a>
                                </div>
                                <a href="#" class="btn-style-3 text-btn-uppercase">Buy it now</a>
                            </div>
                        </div>
                            
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- /quickView -->

    <!-- shoppingCart -->

    <div class="modal fullRight fade modal-shopping-cart" id="shoppingCart">
        <div class="modal-dialog">
            <div class="modal-content">
    
                <div class="d-flex flex-column flex-grow-1 h-100">
                    <div class="header">
                        <h5 class="title">Shopping Cart</h5>
                        <span class="icon-close icon-close-popup" data-bs-dismiss="modal"></span>
                    </div>
    
                    <div class="wrap">
                        <div class="tf-mini-cart-wrap">
    
                            <!-- MAIN CART SCROLL AREA -->
                            <div class="tf-mini-cart-main">
                                <div class="tf-mini-cart-sroll">
    
                                    <!-- *********************************** -->
                                    <!-- THIS IS THE ONLY CHANGE YOU MUST KEEP -->
                                    <!-- *********************************** -->
                                    <div class="tf-mini-cart-items"></div>
                                    <!-- cart.js will dynamically append items here -->
    
                                </div>
                            </div>
    
                            <!-- BOTTOM SECTION -->
                            <div class="tf-mini-cart-bottom">
                                <div class="tf-mini-cart-tool"></div>
    
                                <div class="tf-mini-cart-bottom-wrap">
                                    <div class="tf-cart-totals-discounts">
                                        <h5>Subtotal</h5>
    
                                        <!-- REQUIRED for JS -->
                                        <h5 class="tf-totals-total-value">₹0</h5>
                                    </div>
    
                                    <div class="tf-cart-checkbox">
                                        <div class="tf-checkbox-wrapp">
                                            <input type="checkbox" id="CartDrawer-Form_agree">
                                            <div><i class="icon-check"></i></div>
                                        </div>
                                        <label for="CartDrawer-Form_agree">
                                            I agree with
                                            <a href="/terms_and_conditions">Terms & Conditions</a>
                                        </label>
                                    </div>
    
                                    <div class="tf-mini-cart-view-checkout">
                                        <a href="/cart" class="tf-btn w-100 btn-white radius-4 has-border">
                                            <span class="text">View cart</span>
                                        </a>
                                        <a href="/cart" class="tf-btn w-100 btn-fill radius-4">
                                            <span class="text">Check Out</span>
                                        </a>
                                    </div>
    
                                    <div class="text-center">
                                        <a class="link text-btn-uppercase" href="/shop">Or continue shopping</a>
                                    </div>
                                </div>
                            </div>
    
                            <!-- EXTRA FEATURES (no change) -->
                            <div class="tf-mini-cart-tool-openable add-note">
                                <div class="tf-mini-cart-tool-content">
                                    <label for="Cart-note" class="tf-mini-cart-tool-text">
                                        <span class="icon">📝</span>
                                        <span class="text-title">Note</span>
                                    </label>
    
                                    <form class="form-add-note tf-mini-cart-tool-wrap">
                                        <fieldset>
                                            <textarea id="Cart-note"
                                                placeholder="Add special instructions for your order..."></textarea>
                                        </fieldset>
                                        <div class="tf-cart-tool-btns">
                                            <button type="submit" class="btn-style-2 w-100">
                                                <span class="text text-btn-uppercase">Save</span>
                                            </button>
                                            <div class="text-center tf-mini-cart-tool-close">Cancel</div>
                                        </div>
                                    </form>
                                </div>
                            </div>
    
                            <div class="tf-mini-cart-tool-openable estimate-shipping">
                                <div class="tf-mini-cart-tool-content">
                                    <label class="tf-mini-cart-tool-text">
                                        <span class="icon">🚚</span>
                                        <span class="text-title">Estimate shipping rates</span>
                                    </label>
                                    <!-- Shipping form unchanged -->
                                </div>
                            </div>
    
                            <div class="tf-mini-cart-tool-openable add-gift">
                                <form class="tf-product-form-addgift">
                                    <!-- unchanged -->
                                </form>
                            </div>
    
                            <div class="tf-mini-cart-tool-openable add-coupon">
                                <div class="tf-mini-cart-tool-content">
                                    <label class="tf-mini-cart-tool-text">
                                        <span class="icon">🎟</span>
                                        <span class="text-title">Add A Coupon Code</span>
                                    </label>
                                    <form class="form-add-coupon tf-mini-cart-tool-wrap">
                                        <!-- unchanged -->
                                    </form>
                                </div>
                            </div>
    
                        </div>
                    </div>
    
                </div>
    
            </div>
        </div>
    </div>

    <!-- /shoppingCart -->


    <!-- wishlist -->
    <div class="modal fullRight fade modal-wishlist" id="wishlist">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="header">
                    <h5 class="title">Wish List</h5>
                    <span class="icon-close icon-close-popup" data-bs-dismiss="modal"></span>
                </div>
                <div class="wrap">
                    <div class="tf-mini-cart-wrap">
                        <div class="tf-mini-cart-main">
                            <div class="tf-mini-cart-sroll">
                                <div class="tf-mini-cart-items">
                                    <div class="tf-mini-cart-item file-delete">
                                        <div class="tf-mini-cart-image">
                                            <img class="lazyload" data-src="/images/products/beauty-cosmetic/beauty8.jpg" src="/images/products/beauty-cosmetic/beauty8.jpg" alt="">
                                        </div>
                                        <div class="tf-mini-cart-info flex-grow-1">
                                            <div class="mb_12 d-flex align-items-center justify-content-between flex-wrap gap-12">
                                                <div class="text-title"><a href="product-detail.html" class="link text-line-clamp-1">Contrasting sheepskin</a></div>
                                                <div class="text-button tf-btn-remove remove">Remove</div>
                                            </div>
                                            <div class="d-flex align-items-center justify-content-between flex-wrap gap-12">
                                                <div class="text-secondary-2">XL/Blue</div>
                                                <div class="text-button">1 X ₹60.00</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tf-mini-cart-item file-delete">
                                        <div class="tf-mini-cart-image">
                                            <img class="lazyload" data-src="/images/products/beauty-cosmetic/beauty8.jpg" src="/images/products/beauty-cosmetic/beauty8.jpg" alt="">
                                        </div>
                                        <div class="tf-mini-cart-info flex-grow-1">
                                            <div class="mb_12 d-flex align-items-center justify-content-between flex-wrap gap-12">
                                                <div class="text-title"><a href="product-detail.html" class="link text-line-clamp-1">Suede leggings</a></div>
                                                <div class="text-button tf-btn-remove remove">Remove</div>
                                            </div>
                                            <div class="d-flex align-items-center justify-content-between flex-wrap gap-12">
                                                <div class="text-secondary-2">XL/Blue</div>
                                                <div class="text-button">1 X ₹60.00</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tf-mini-cart-item file-delete">
                                        <div class="tf-mini-cart-image">
                                            <img class="lazyload" data-src="/images/products/beauty-cosmetic/beauty8.jpg" src="/images/products/beauty-cosmetic/beauty8.jpg" alt="">
                                        </div>
                                        <div class="tf-mini-cart-info flex-grow-1">
                                            <div class="mb_12 d-flex align-items-center justify-content-between flex-wrap gap-12">
                                                <div class="text-title"><a href="product-detail.html" class="link text-line-clamp-1">Faux-leather trousers</a></div>
                                                <div class="text-button tf-btn-remove remove">Remove</div>
                                            </div>
                                            <div class="d-flex align-items-center justify-content-between flex-wrap gap-12">
                                                <div class="text-secondary-2">XL/Blue</div>
                                                <div class="text-button">1 X ₹60.00</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tf-mini-cart-item file-delete">
                                        <div class="tf-mini-cart-image">
                                            <img class="lazyload" data-src="/images/products/beauty-cosmetic/beauty8.jpg" src="/images/products/beauty-cosmetic/beauty8.jpg" alt="">
                                        </div>
                                        <div class="tf-mini-cart-info flex-grow-1">
                                            <div class="mb_12 d-flex align-items-center justify-content-between flex-wrap gap-12">
                                                <div class="text-title"><a href="product-detail.html" class="link text-line-clamp-1">mock product</a></div>
                                                <div class="text-button tf-btn-remove remove">Remove</div>
                                            </div>
                                            <div class="d-flex align-items-center justify-content-between flex-wrap gap-12">
                                                <div class="text-secondary-2">XL/Blue</div>
                                                <div class="text-button">1 X ₹60.00</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tf-mini-cart-item file-delete">
                                        <div class="tf-mini-cart-image">
                                            <img class="lazyload" data-src="/images/products/womens/women-4.jpg" src="/images/products/womens/women-4.jpg" alt="">
                                        </div>
                                        <div class="tf-mini-cart-info flex-grow-1">
                                            <div class="mb_12 d-flex align-items-center justify-content-between flex-wrap gap-12">
                                                <div class="text-title"><a href="product-detail.html" class="link text-line-clamp-1">Jacquard fluid trousers</a></div>
                                                <div class="text-button tf-btn-remove remove">Remove</div>
                                            </div>
                                            <div class="d-flex align-items-center justify-content-between flex-wrap gap-12">
                                                <div class="text-secondary-2">XL/Blue</div>
                                                <div class="text-button">1 X ₹60.00</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tf-mini-cart-bottom">
                            <a href="/wishlist" class="btn-style-2 w-100 radius-4 view-all-wishlist"><span class="text-btn-uppercase">View All Wish List</span></a>
                            <a href="shop-default-grid.html" class="text-btn-uppercase">Or continue shopping</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- /wishlist -->

    <!-- size-guide -->
    <div class="modal fade modal-size-guide" id="size-guide">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content widget-tabs style-2">
                <div class="header">
                    <ul class="widget-menu-tab">
                        <li class="item-title active">
                            <span class="inner text-button">Size </span>
                        </li>
                        <li class="item-title">
                            <span class="inner text-button">Size Guide</span>
                        </li>
                    </ul>
                    <span class="icon-close icon-close-popup" data-bs-dismiss="modal"></span>
                </div>
                <div class="wrap">
                    <div class="widget-content-tab">
                        <div class="widget-content-inner active">
                            <div class="tab-size">
                                <div>
                                    <div class="widget-size mb_16">
                                        <div class="box-title-size">
                                            <div class="title-size">Height</div>
                                            <div class="number-size">
                                                <span class="max-size">100</span>
                                                <span class="text-caption-1 text-secondary">Cm</span>
                                            </div>
                                        </div>
                                        <div class="range-input">
                                            <div class="tow-bar-block">
                                                <div class="progress-size" style="width: 50%;"></div>
                                            </div>
                                            <input type="range" min="0" max="200" value="100" class="range-max" />
                                        </div>
                                    </div>
                                    <div class="widget-size">
                                        <div class="box-title-size">
                                            <div class="title-size">Weight</div>
                                            <div class="number-size">
                                                <span class="max-size">50</span>
                                                <span class="text-caption-1 text-secondary">Kg</span>
                                            </div>
                                        </div>
                                        <div class="range-input">
                                            <div class="tow-bar-block">
                                                <div class="progress-size" style="width: 50%;"></div>
                                            </div>
                                            <input type="range" min="0" max="100" value="50" class="range-max" />
                                        </div>
                                    </div>
                                </div>
                                <div class="size-button-wrap choose-option-list">
                                    <div class="size-button-item choose-option-item">
                                        <h5>thin</h5>
                                    </div>
                                    <div class="size-button-item choose-option-item select-option">
                                        <h5>Normal</h5>
                                    </div>
                                    <div class="size-button-item choose-option-item">
                                        <h5>plump</h5>
                                    </div>
                                </div>
                                <div>
                                    <h6 class="suggests-title">Modave suggests for you:</h6>
                                    <div class="suggests-list">
                                        <a href="#" class="suggests-item link text-button">L - shirt</a>
                                        <a href="#" class="suggests-item link text-button">XL - Pant</a>
                                        <a href="#" class="suggests-item link text-button">31 - Jeans</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="widget-content-inner">
                            <table class="tab-sizeguide-table">
                                <thead>
                                    <tr>
                                        <th>Size</th>
                                        <th>US</th>
                                        <th>Bust</th>
                                        <th>Waist</th>
                                        <th>Low Hip</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>XS</td>
                                        <td>2</td>
                                        <td>32</td>
                                        <td>24 - 25</td>
                                        <td>33 - 34</td>
                                    </tr>
                                    <tr>
                                        <td>S</td>
                                        <td>4</td>
                                        <td>26 - 27</td>
                                        <td>34 - 35</td>
                                        <td>35 - 26</td>
                                    </tr>
                                    <tr>
                                        <td>M</td>
                                        <td>6</td>
                                        <td>28 - 29</td>
                                        <td>36 - 37</td>
                                        <td>38 - 40</td>
                                    </tr>
                                    <tr>
                                        <td>L</td>
                                        <td>8</td>
                                        <td>30 - 31</td>
                                        <td>38 - 29</td>
                                        <td>42 - 44</td>
                                    </tr>
                                    <tr>
                                        <td>XL</td>
                                        <td>10</td>
                                        <td>32 - 33</td>
                                        <td>40 - 41</td>
                                        <td>45 - 47</td>
                                    </tr>
                                    <tr>
                                        <td>XXL</td>
                                        <td>12</td>
                                        <td>34 - 35</td>
                                        <td>42 - 43</td>
                                        <td>48 - 50</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>


                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- /size-guide -->

    <!-- compare -->
    <div class="offcanvas offcanvas-bottom offcanvas-compare" id="compare">
        <div class="offcanvas-content">
            <div class="header">
                <span class="icon-close icon-close-popup" data-bs-dismiss="offcanvas" aria-label="Close"></span>
            </div>
            <div class="wrap">
                <div class="container">
                    <div class="row">
                        <div class="col-12">
                            <div class="tf-compare-list list-file-delete">
                                <div class="tf-compare-head">
                                    <h5 class="title">Compare <br> Products</h5>
                                </div>
                                <div class="tf-compare-wrap">
                                    <div class="tf-compare-item file-delete">
                                        <span class="btns-repeat">
                                            <svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <g clip-path="url(#clip0_5628_27028)">
                                                <path d="M11.334 1.33301L14.0007 3.99967L11.334 6.66634" stroke="#181818" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M2 7.99951V6.66618C2 5.95893 2.28095 5.28066 2.78105 4.78056C3.28115 4.28046 3.95942 3.99951 4.66667 3.99951H14" stroke="#181818" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M4.66667 15.9996L2 13.3329L4.66667 10.6663" stroke="#181818" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M14 9.33301V10.6663C14 11.3736 13.719 12.0519 13.219 12.552C12.7189 13.0521 12.0406 13.333 11.3333 13.333H2" stroke="#181818" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                </g>
                                                <defs>
                                                <clipPath id="clip0_5628_27028">
                                                <rect width="16" height="16" fill="white" transform="translate(0 0.66626)"/>
                                                </clipPath>
                                                </defs>
                                            </svg>
                                        </span>
                                        <span class="icon-close remove"></span>
                                        <a href="product-detail.html" class="image">
                                            <img class="lazyload" data-src="/images/products/beauty-cosmetic/beauty8.jpg" src="/images/products/beauty-cosmetic/beauty8.jpg" alt="">
                                        </a>
                                        <div class="content">
                                            <div class="text-title">
                                                <a class="link text-line-clamp-2" href="product-detail.html">V-neck cotton T-shirt</a>
                                            </div>
                                            <div class="text-button">₹59.99</div>
                                        </div>
                                    </div>
                                    <div class="tf-compare-item file-delete">
                                        <span class="btns-repeat">
                                            <svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <g clip-path="url(#clip0_5628_27028)">
                                                <path d="M11.334 1.33301L14.0007 3.99967L11.334 6.66634" stroke="#181818" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M2 7.99951V6.66618C2 5.95893 2.28095 5.28066 2.78105 4.78056C3.28115 4.28046 3.95942 3.99951 4.66667 3.99951H14" stroke="#181818" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M4.66667 15.9996L2 13.3329L4.66667 10.6663" stroke="#181818" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M14 9.33301V10.6663C14 11.3736 13.719 12.0519 13.219 12.552C12.7189 13.0521 12.0406 13.333 11.3333 13.333H2" stroke="#181818" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                </g>
                                                <defs>
                                                <clipPath id="clip0_5628_27028">
                                                <rect width="16" height="16" fill="white" transform="translate(0 0.66626)"/>
                                                </clipPath>
                                                </defs>
                                            </svg>
                                        </span>
                                        <span class="icon-close remove"></span>
                                        <a href="product-detail.html" class="image">
                                            <img class="lazyload" data-src="/images/products/beauty-cosmetic/beauty8.jpg" src="/images/products/beauty-cosmetic/beauty8.jpg" alt="">
                                        </a>
                                        <div class="content">
                                            <div class="text-title">
                                                <a class="link text-line-clamp-2" href="product-detail.html">Ramie shirt with pockets </a>
                                            </div>
                                            <div class="text-button">₹72.00</div>
                                        </div>
                                    </div>
                                    <div class="tf-compare-item file-delete">
                                        <span class="btns-repeat">
                                            <svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <g clip-path="url(#clip0_5628_27028)">
                                                <path d="M11.334 1.33301L14.0007 3.99967L11.334 6.66634" stroke="#181818" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M2 7.99951V6.66618C2 5.95893 2.28095 5.28066 2.78105 4.78056C3.28115 4.28046 3.95942 3.99951 4.66667 3.99951H14" stroke="#181818" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M4.66667 15.9996L2 13.3329L4.66667 10.6663" stroke="#181818" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M14 9.33301V10.6663C14 11.3736 13.719 12.0519 13.219 12.552C12.7189 13.0521 12.0406 13.333 11.3333 13.333H2" stroke="#181818" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                </g>
                                                <defs>
                                                <clipPath id="clip0_5628_27028">
                                                <rect width="16" height="16" fill="white" transform="translate(0 0.66626)"/>
                                                </clipPath>
                                                </defs>
                                            </svg>
                                        </span>
                                        <span class="icon-close remove"></span>
                                        <a href="product-detail.html" class="image">
                                            <img class="lazyload" data-src="/images/products/beauty-cosmetic/beauty8.jpg" src="/images/products/beauty-cosmetic/beauty8.jpg" alt="">
                                        </a>
                                        <div class="content">
                                            <div class="text-title">
                                                <a class="link text-line-clamp-2" href="product-detail.html">Ribbed cotton-blend top</a>
                                            </div>
                                            <div class="text-button">₹65.00</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tf-compare-buttons">
                                    <div class="tf-compare-buttons-wrap">
                                        <a href="compare-products.html" class="tf-btn w-100 btn-fill radius-4"><span class="text text-btn-uppercase">Compare Products</span></a>
                                        <div class="tf-compapre-button-clear-all clear-file-delete tf-btn w-100 btn-white radius-4 has-border">
                                            <span class="text text-btn-uppercase">Clear All Products</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- /compare -->

    <!-- quickAdd -->
    <div class="modal fade modal-quick-add" id="quickAdd">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="header">
                    <span class="icon-close icon-close-popup" data-bs-dismiss="modal"></span>
                </div>
                <div>
                    <div class="tf-product-info-list">
                        <div class="tf-product-info-item">
                            <div class="image">
                                <img src="/images/products/beauty-cosmetic/beauty8.jpg" alt="">
                            </div>
                            <div class="content">
                                <a href="product-detail.html">Ribbed Tank Top</a>
                                <div class="tf-product-info-price">
                                    <h5 class="price-on-sale font-2">₹79.99</h5>
                                    <div class="compare-at-price font-2">₹98.99</div>
                                    <div class="badges-on-sale text-btn-uppercase">
                                        -25%
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tf-product-info-choose-option">
                            <div class="variant-picker-item">
                                <div class="variant-picker-label mb_12">
                                    Colors:<span class="text-title variant-picker-label-value">Beige</span>
                                </div>
                                <div class="variant-picker-values type-click">
                                    <input id="values-beige2" type="radio" name="color3" checked>
                                    <label class="hover-tooltip tooltip-bot radius-60" for="values-beige2" data-value="Beige">
                                        <span class="btn-checkbox bg-color-beige1"></span>
                                        <span class="tooltip">Beige</span>
                                    </label>
                                    <input id="values-gray2" type="radio" name="color3">
                                    <label class="hover-tooltip tooltip-bot radius-60" for="values-gray2" data-value="Gray">
                                        <span class="btn-checkbox bg-color-gray"></span>
                                        <span class="tooltip">Gray</span>
                                    </label>
                                    <input id="values-grey3" type="radio" name="color3">
                                    <label class="hover-tooltip tooltip-bot radius-60" for="values-grey3" data-value="Grey">
                                        <span class="btn-checkbox bg-color-grey"></span>
                                        <span class="tooltip">Grey</span>
                                    </label>
                                </div>
                            </div>
                            <div class="variant-picker-item">
                                <div class="variant-picker-label">
                                    Size:<span class="text-title variant-picker-label-value">L</span>
                                </div>
                                <div class="variant-picker-values gap12">
                                    <input type="radio" name="size3" id="values-s2">
                                    <label class="style-text size-btn" for="values-s2" data-value="S">
                                        <span class="text-title">S</span>
                                    </label>
                                    <input type="radio" name="size3" id="values-m2">
                                    <label class="style-text size-btn" for="values-m2" data-value="M">
                                        <span class="text-title">M</span>
                                    </label>
                                    <input type="radio" name="size3" id="values-l2" checked>
                                    <label class="style-text size-btn" for="values-l2" data-value="L">
                                        <span class="text-title">L</span>
                                    </label>
                                    <input type="radio" name="size3" id="values-xl2">
                                    <label class="style-text size-btn" for="values-xl2" data-value="XL">
                                        <span class="text-title">XL</span>
                                    </label>
                                </div>
                            </div>
                            <div class="tf-product-info-quantity">
                                <div class="title mb_12">Quantity:</div>
                                <div class="wg-quantity">
                                    <span class="btn-quantity btn-decrease">-</span>
                                    <input class="quantity-product" type="text" name="number" value="1">
                                    <span class="btn-quantity btn-increase">+</span>
                                </div>
                            </div>
                            <div>
                                <div class="tf-product-info-by-btn mb_10">
                                    <a class="btn-style-2 flex-grow-1 text-btn-uppercase fw-6 show-shopping-cart"><span>Add to cart -&nbsp;</span><span class="tf-qty-price total-price">₹79.99</span></a>
                                    <a href="#compare" data-bs-toggle="offcanvas" aria-controls="compare" class="box-icon hover-tooltip compare btn-icon-action show-compare">
                                        <span class="icon icon-gitDiff"></span>
                                        <span class="tooltip text-caption-2">Compare</span>
                                    </a>
                                    <a href="javascript:void(0);" class="box-icon hover-tooltip text-caption-2 wishlist btn-icon-action">
                                        <span class="icon icon-heart"></span>
                                        <span class="tooltip text-caption-2">Wishlist</span>
                                    </a>
                                </div>
                                <a href="#" class="btn-style-3 text-btn-uppercase">Buy it now</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- /quickAdd -->
    
    <!-- modal ask_question -->
    <div class="modal modalCentered fade tf-product-modal modal-part-content" id="ask_question">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="header">
                    <div class="demo-title">Ask a question</div>
                    <span class="icon-close icon-close-popup" data-bs-dismiss="modal"></span>
                </div>
                <div class="overflow-y-auto">
                    <form class="">
                        <fieldset class="">
                            <label >Name *</label>
                            <input type="text" placeholder="" class="" name="text" tabindex="2" value=""
                                aria-required="true" required="">
                        </fieldset>
                        <fieldset class="">
                            <label >Email *</label>
                            <input type="email" placeholder="" class="" name="text" tabindex="2" value=""
                                aria-required="true" required="">
                        </fieldset>
                        <fieldset class="">
                            <label >Phone number</label>
                            <input type="number" placeholder="" class="" name="text" tabindex="2" value=""
                                aria-required="true" required="">
                        </fieldset>
                        <fieldset class="">
                            <label >Message</label>
                            <textarea name="message" rows="4" placeholder="" class="" tabindex="2" aria-required="true"
                                required=""></textarea>
                        </fieldset>
                        <button type="submit" class="btn-style-2 w-100"><span class="text">Send</span></button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!-- /modal ask_question -->

    <!-- modal delivery_return -->
    <div class="modal modalCentered fade tf-product-modal modal-part-content" id="delivery_return">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="header">
                    <div class="demo-title">Shipping & Delivery</div>
                    <span class="icon-close icon-close-popup" data-bs-dismiss="modal"></span>
                </div>
                <div class="overflow-y-auto">
                    <div class="tf-product-popup-delivery">
                        <div class="title">Delivery</div>
                        <p class="text-paragraph">All orders shipped with UPS Express.</p>
                        <p class="text-paragraph">Always free shipping for orders over US ₹250.</p>
                        <p class="text-paragraph">All orders are shipped with a UPS tracking number.</p>
                    </div>
                    <div class="tf-product-popup-delivery">
                        <div class="title">Returns</div>
                        <p class="text-paragraph">Items returned within 14 days of their original shipment date in same
                            as new condition will be eligible for a full refund or store credit.</p>
                        <p class="text-paragraph">Refunds will be charged back to the original form of payment used for
                            purchase.</p>
                        <p class="text-paragraph">Customer is responsible for shipping charges when making returns and
                            shipping/handling fees of original purchase is non-refundable.</p>
                        <p class="text-paragraph">All sale items are final purchases.</p>
                    </div>
                    <div class="tf-product-popup-delivery">
                        <div class="title">Help</div>
                        <p class="text-paragraph">Give us a shout if you have any other questions and/or concerns.</p>
                        <p class="text-paragraph">Email: <a href="mailto:contact@domain.com"
                                ><span
                                    class="__cf_email__">contact@domain.com</span></a></p>
                        <p class="text-paragraph mb-0">Phone: +1 (23) 456 789</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- /modal delivery_return -->

    <!-- modal share social -->
    <div class="modal modalCentered fade tf-product-modal modal-part-content" id="share_social">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="header">
                    <div class="demo-title">Share</div>
                    <span class="icon-close icon-close-popup" data-bs-dismiss="modal"></span>
                </div>
                <div class="overflow-y-auto">
                    <ul class="tf-social-icon d-flex gap-10">
                        <li><a href="#" class="box-icon social-facebook bg_line"><i class="icon icon-fb"></i></a></li>
                        <li><a href="#" class="box-icon social-twiter bg_line"><i class="icon icon-x"></i></a></li>
                        <li><a href="#" class="box-icon social-instagram bg_line"><i class="icon icon-instagram"></i></a></li>
                        <li><a href="#" class="box-icon social-tiktok bg_line"><i class="icon icon-tiktok"></i></a></li>
                        <li><a href="#" class="box-icon social-pinterest bg_line"><i class="icon icon-pinterest"></i></a></li>
                    </ul>
                    <form class="form-share"  method="post" accept-charset="utf-8">
                        <fieldset>
                            <input type="text" value="https://blushley.co/html/modave/" tabindex="0" aria-required="true">
                        </fieldset>
                        <div class="button-submit">
                            <button class="tf-btn radius-4 btn-fill" type="button"><span class="text">Copy</span></button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!-- /modal share social -->
    



    <!-- Javascript -->
    <script type="text/javascript" src="/js/cart.js"></script>
    <script type="text/javascript" src="/js/search.js"></script>
      <script type="text/javascript" src="/js/jquery.min.js"></script>
    <script type="text/javascript" src="/js/bootstrap.min.js"></script>   
    <script type="text/javascript" src="/js/bootstrap-select.min.js"></script>
    <script type="text/javascript" src="/js/lazysize.min.js"></script>
    <script type="text/javascript" src="/js/wow.min.js"></script>
    <script type="text/javascript" src="/js/drift.min.js"></script>
    <script type="text/javascript" src="/js/count-down.js"></script>
    <script type="text/javascript" src="/js/swiper-bundle.min.js"></script>
    <script type="text/javascript" src="/js/carousel.js"></script>
    <script type="text/javascript" src="/js/multiple-modal.js"></script>
    <script type="text/javascript" src="/js/main.js"></script>


    <script type="module" src="/js/model-viewer.min.js"></script>
    <script type="module" src="/js/zoom.js"></script>

 
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Check if nav-account exists before accessing it
    const navAccount = document.querySelector('.nav-account');
    
    if (navAccount) {
        const navIconItem = navAccount.querySelector('.nav-icon-item');
        
        if (navIconItem) {
            // Toggle dropdown on click
            navIconItem.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                navAccount.classList.toggle('show-dropdown');
            });
        }
        
        // Close dropdown when clicking outside
        document.addEventListener('click', function(e) {
            if (!navAccount.contains(e.target)) {
                navAccount.classList.remove('show-dropdown');
            }
        });
        
        // Prevent dropdown from closing when clicking inside it
        const dropdown = navAccount.querySelector('.dropdown-account');
        if (dropdown) {
            dropdown.addEventListener('click', function(e) {
                e.stopPropagation();
            });
        }
    }
    
    // CRITICAL FIX: Remove any leftover modal artifacts on page load
    function cleanupModalArtifacts() {
        // Remove all modal backdrops
        document.querySelectorAll('.modal-backdrop').forEach(function(backdrop) {
            backdrop.remove();
        });
        
        // Reset body styles
        document.body.classList.remove('modal-open');
        document.body.style.overflow = '';
        document.body.style.paddingRight = '';
    }
    
    // Clean up on page load
    cleanupModalArtifacts();
    
    // Clean up whenever a modal is hidden
    if (typeof $ !== 'undefined') {
        $(document).on('hidden.bs.modal', '.modal', function() {
            cleanupModalArtifacts();
        });
        
        // Also clean up when shopping cart is opened
        $(document).on('show.bs.modal', '#shoppingCart', function() {
            cleanupModalArtifacts();
        });
    }
});

// Also add a fallback cleanup that runs slightly later
setTimeout(function() {
    document.querySelectorAll('.modal-backdrop').forEach(function(backdrop) {
        backdrop.remove();
    });
    document.body.classList.remove('modal-open');
    document.body.style.overflow = '';
    document.body.style.paddingRight = '';
}, 500);
</script>



     <script>  if (document.querySelector("#sib-form")) { const script = document.createElement('script');script.src = '/js/sibforms.js';script.defer = true;document.body.appendChild(script);}</script>
    
</body>



</html>